package com.fr.bi.cal.analyze.cal.multithread;import com.fr.bi.cal.analyze.cal.result.Node;import com.fr.bi.cal.analyze.cal.sssecret.NoneDimensionGroup;import com.fr.bi.stable.report.result.TargetCalculator;/** * Created by Hiram on 2015/5/14. */public class SummaryCall implements BISingleThreadCal {    private Node node;    private NoneDimensionGroup noneDimensionGroup;    private TargetCalculator calculator;    public SummaryCall(Node node, NoneDimensionGroup noneDimensionGroup, TargetCalculator calculator) {        this.node = node;        this.noneDimensionGroup = noneDimensionGroup;        this.calculator = calculator;    }    @Override    public void cal() {        if (calculator != null) {            Number v = noneDimensionGroup.getSummaryValue(calculator);            if (v != null) {                node.setTargetGetter(calculator.createTargetGettingKey(), noneDimensionGroup.getRoot().getGroupValueIndex());                node.setTargetIndex(calculator.createTargetGettingKey(), noneDimensionGroup.getRoot().getGroupValueIndex());                node.setSummaryValue(calculator.createTargetGettingKey(), v);            }        }    }}
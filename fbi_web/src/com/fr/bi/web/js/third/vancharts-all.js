/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//Copyright (c) 2013, Baidu Inc.
//    All rights reserved.
//
//    Redistribution and use of this software in source and binary forms, with or
//    without modification, are permitted provided that the following conditions
//are met:
//
//    Redistributions of source code must retain the above copyright notice, this
//list of conditions and the following disclaimer.
//
//    Redistributions in binary form must reproduce the above copyright notice,
//    this list of conditions and the following disclaimer in the documentation
//and/or other materials provided with the distribution.
//
//    Neither the name of Baidu Inc. nor the names of its contributors may be used
//to endorse or promote products derived from this software without specific
//prior written permission of Baidu Inc.
//
//    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
//AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
//IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
//DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
//ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
//(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
//LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
//ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
//(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
//SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

//
//Copyright (c) 2014 Ga?tan Renaudeau
//
//Permission is hereby granted, free of charge, to any person
//obtaining a copy of this software and associated documentation
//files (the "Software"), to deal in the Software without
//restriction, including without limitation the rights to use,
//    copy, modify, merge, publish, distribute, sublicense, and/or sell
//copies of the Software, and to permit persons to whom the
//Software is furnished to do so, subject to the following
//conditions:
//
//    The above copyright notice and this permission notice shall be
//included in all copies or substantial portions of the Software.
//
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//OTHER DEALINGS IN THE SOFTWARE.

//Copyright (c) 2013 The New York Times
//
//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.VanCharts=e()}(this,function(){var t,e,i;!function(a){function r(t,e){return b.call(t,e)}function n(t,e){var i,a,r,n,s,o,l,h,c,d,u,g=e&&e.split("/"),f=_.map,p=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),s=t.length-1,_.nodeIdCompat&&C.test(t[s])&&(t[s]=t[s].replace(C,"")),t=g.slice(0,g.length-1).concat(t),c=0;c<t.length;c+=1)if(u=t[c],"."===u)t.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((g||p)&&f){for(i=t.split("/"),c=i.length;c>0;c-=1){if(a=i.slice(0,c).join("/"),g)for(d=g.length;d>0;d-=1)if(r=f[g.slice(0,d).join("/")],r&&(r=r[a])){n=r,o=c;break}if(n)break;!l&&p&&p[a]&&(l=p[a],h=c)}!n&&l&&(n=l,o=h),n&&(i.splice(0,o,n),t=i.join("/"))}return t}function s(t,e){return function(){var i=x.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),g.apply(a,i.concat([t,e]))}}function o(t){return function(e){return n(e,t)}}function l(t){return function(e){m[t]=e}}function h(t){if(r(v,t)){var e=v[t];delete v[t],y[t]=!0,u.apply(a,e)}if(!r(m,t)&&!r(y,t))throw new Error("No "+t);return m[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function d(t){return function(){return _&&_.config&&_.config[t]||{}}}var u,g,f,p,m={},v={},_={},y={},b=Object.prototype.hasOwnProperty,x=[].slice,C=/\.js$/;f=function(t,e){var i,a=c(t),r=a[0];return t=a[1],r&&(r=n(r,e),i=h(r)),r?t=i&&i.normalize?i.normalize(t,o(e)):n(t,e):(t=n(t,e),a=c(t),r=a[0],t=a[1],r&&(i=h(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},p={require:function(t){return s(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:d(t)}}},u=function(t,e,i,n){var o,c,d,u,g,_,b=[],x=typeof i;if(n=n||t,"undefined"===x||"function"===x){for(e=!e.length&&i.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(u=f(e[g],n),c=u.f,"require"===c)b[g]=p.require(t);else if("exports"===c)b[g]=p.exports(t),_=!0;else if("module"===c)o=b[g]=p.module(t);else if(r(m,c)||r(v,c)||r(y,c))b[g]=h(c);else{if(!u.p)throw new Error(t+" missing "+c);u.p.load(u.n,s(n,!0),l(c),{}),b[g]=m[c]}d=i?i.apply(m[t],b):void 0,t&&(o&&o.exports!==a&&o.exports!==m[t]?m[t]=o.exports:d===a&&_||(m[t]=d))}else t&&(m[t]=i)},t=e=g=function(t,e,i,r,n){if("string"==typeof t)return p[t]?p[t](e):h(f(t,e).f);if(!t.splice){if(_=t,_.deps&&g(_.deps,_.callback),!e)return;e.splice?(t=e,e=i,i=null):t=a}return e=e||function(){},"function"==typeof i&&(i=r,r=n),r?u(a,t,e,i):setTimeout(function(){u(a,t,e,i)},4),g},g.config=function(t){return g(t)},t._defined=m,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),r(m,t)||r(v,t)||(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("Constants",[],function(){return{INSTANCES_KEY:"vancharts_index_",SELECT_ANIMATION:"select",BAR_CHART:"bar",COLUMN_CHART:"column",LINE_CHART:"line",AREA_CHART:"area",PIE_CHART:"pie",SCATTER_CHART:"scatter",BUBBLE_CHART:"bubble",GAUGE_CHART:"gauge",RADAR_CHART:"radar",MAP_CHART:"map",POINT_MAP:"pointMap",GEO_COMPONENT:"geo",X_AXIS_COMPONENT:"xAxis",Y_AXIS_COMPONENT:"yAxis",POLAR_COMPONENT:"polar",RADIUS_AXIS_COMPONENT:"radiusAxis",ANGLE_AXIS_COMPONENT:"angleAxis",GAUGE_AXIS_COMPONENT:"gaugeAxis",VALUE_AXIS_COMPONENT:"value",CATEGORY_AXIS_COMPONENT:"category",DATE_AXIS_COMPONENT:"datetime",DATA_SHEET_COMPONENT:"dataSheet",LEGEND_COMPONENT:"legend",TITLE_COMPONENT:"title",AXIS_COMPONENT:"axis",TOOLTIP_COMPONENT:"tooltip",TOOLBAR_COMPONENT:"tools",ZOOM_COMPONENT:"zoom",RANGE_LEGEND_COMPONENT:"rangeLegend",DRILL_TOOLS:"dTools",VANCHART:"vanchart",MAX_ICON:"vancharts-icon-max",MIN_ICON:"vancharts-icon-min",MENU_ICON:"vancharts-icon-menu",REFRESH_ICON:"vancharts-icon-refresh",DECREASE_ICON:"vancharts-icon-decrease",INCREASE_ICON:"vancharts-icon-increase",EXPORT_ICON:"vancharts-icon-export",BOTTOM:"bottom",TOP:"top",LEFT:"left",RIGHT:"right",RIGHT_TOP:"right-top",LEFT_TO_RIGHT:"left-to-right",RIGHT_TO_LEFT:"right-to-right",BOTTOM_TO_TOP:"bottom-to-top",TOP_TO_BOTTOM:"top-to-botttom",NULL_MARKER:"null_marker",CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",TRIANGLE:"triangle",CIRCLE_HOLLOW:"circle_hollow",SQUARE_HOLLOW:"square_hollow",DIAMOND_HOLLOW:"diamond_hollow",TRIANGLE_HOLLOW:"triangle_hollow",NORMAL_ICON:"normal-legend-icon",PIE_ICON:"pie-legend-icon",DONUT_ICON:"donut-legend-icon",BUBBLE_ICON:"bubble-legend-icon",SCATTER_ICON:"scatter-legend-icon",DASH_TYPE:{Solid:"0,0",Dash:"8,6"},SAME_ARC:"sameArc",DIFFERENT_ARC:"differentArc",DISORDER:"disorder",DESCENDING:"descending",ASCENDING:"ascending",STATE_INIT:"init-state",STATE_RESTORE_REFRESH:"restore-refresh-state",STATE_CHANGE_DATA_REFRESH:"change-data-refresh-state",STATE_ZOOM_REFRESH:"zoom-refresh-state",OUTSIDE:"outside",INSIDE:"inside",CENTER:"center",VANCHART_SVG:"vanchart-svg-render",VANCHART_VML:"vanchart-vml-render",PIE_SVG:"pie-svg-render",PIE_VML:"pie-vml-render",BAR_SVG:"bar-svg-render",BAR_VML:"bar-vml-render",LINE_SVG:"line-svg-render",LINE_VML:"line-vml-render",AREA_SVG:"area-svg-render",AREA_VML:"area-vml-render",GAUGE_SVG:"gauge-svg-render",GAUGE_VML:"gauge-vml-render",RADAR_SVG:"radar-svg-render",RADAR_VML:"radar-vml-render",BUBBLE_SVG:"bubble-svg-render",BUBBLE_VML:"bubble-vml-render",SCATTER_SVG:"scatter-svg-render",SCATTER_VML:"scatter-vml-render",MAP_SVG:"map-svg-render",MAP_VML:"map-vml-render",TITLE_SVG:"title-svg-render",TITLE_VML:"title-vml-render",LEGEND_SVG:"legend-svg-render",LEGEND_VML:"legend-vml-render",RANGE_LEGEND_SVG:"range-legend-svg-render",RANGE_LEGEND_VML:"range-legend-vml-render",TOOLBAR_SVG:"toolbar-svg-render",TOOLBAR_VML:"toolbar-vml-render",DRILL_TOOLS_SVG:"dTools-svg-render",DRILL_TOOLS_VML:"dTools-vml-render",ZOOM_SVG:"zoom-svg-render",DATA_SHEET_SVG:"data-sheet-svg-render",DATA_SHEET_VML:"data-sheet-vml-render",AXIS_RENDER:"axis-render",RADIUS_AXIS_RENDER:"radius-axis-render",ANGLE_AXIS_RENDER:"angle-axis-render",CATEGORY_AXIS_SVG:"category-axis-svg-render",CATEGORY_AXIS_VML:"category-axis-vml-render",VALUE_AXIS_SVG:"value-axis-svg-render",VALUE_AXIS_VML:"value-axis-vml-render",DATE_AXIS_SVG:"date-axis-svg-render",DATE_AXIS_VML:"date-axis-vml-render",RADIUS_AXIS_SVG:"radius-axis-svg-render",RADIUS_AXIS_VML:"radius-axis-vml-render",ANGLE_AXIS_SVG:"angle-axis-svg-render",ANGLE_AXIS_VML:"angle-axis-vml-render",STYLE_GRADUAL:"gradual",GAUGE_POINTER:"pointer",GAUGE_POINTER_SEMI:"pointer_semi",GAUGE_SLOT:"slot",GAUGE_THERMOMETER:"thermometer",GAUGE_RING:"ring",HORIZONTAL_LAYOUT:"horizontal",VERTICAL_LAYOUT:"vertical",POLYGON_RADAR:"polygon",CIRCLE_RADAR:"circle",SIZE_BY_AREA:"area",SIZE_BY_WIDTH:"width",TOOLTIP_CATEGORY_STYLE:'<span style="font-size:16px;font-family:Verdana;color:white;">',TOOLTIP_SERIES_STYLE:'<span style="font-size:14px;font-family:Verdana;color:white">',TOOLTIP_VALUE_STYLE:'<span style="font-size:14px;font-family:Verdana;font-weight:bold;color:white">'}}),i("utils/ColorUtils",[],function(){function t(t){return String(t).replace(/\s+/g,"")}function e(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}function i(t,e){if("function"!=typeof e)throw new TypeError;for(var i=t?t.length:0,a=0;i>a;a++)t[a]=e(t[a]);return t}function a(a){if(m[a]&&(a=m[a]),a=t(a),/^#[\da-f]{3}$/i.test(a)){a=parseInt(a.slice(1),16);var r=(3840&a)<<8,n=(240&a)<<4,s=15&a;a="#"+((1<<24)+(r<<4)+r+(n<<4)+n+(s<<4)+s).toString(16).slice(1)}var o,l,h,r=a.match(v),c=[];if(r[2])o=r[2].replace("#","").split(""),h=[o[0]+o[1],o[2]+o[3],o[4]+o[5]],c=i(h,function(t){return e(parseInt(t,16),[0,255])});else if(r[4]){var d=r[4].split(",");l=d[3],h=d.slice(0,3),c=i(h,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e(t,[0,255])}),"undefined"!=typeof l&&c.push(e(parseFloat(l),[0,1]))}return 3==c.length&&c.push(1),c}function r(t,a){if(a=a||"rgb",t&&(3===t.length||4===t.length)){if(t=i(t,function(t){return t>1?Math.ceil(t):t}),a.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(a.indexOf("hs")>-1){var r=i(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return a.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=e(t[3],[0,1]),a+"("+t.slice(0,4).join(",")+")"):a+"("+t.slice(0,3).join(",")+")"}}function n(t){for(var i=a(t),n=[],s=0;3>s;s++){var o=i[s];128>=o?n.push(e(o-(255-o)*(255-2*o)/(2*o),[0,255])):n.push(e(o+o*(2*o-255)/(2*(255-o)),[0,255]))}var l=[];for(s=0;3>s;s++)l.push(.65*i[s]+.35*n[s]);return isNaN(i[3])?r(l):(l.push(i[3]),r(l,"rgba"))}function s(t,e){for(var i=a(t),n=0;3>n;n++)i[n]/=e;return r(i,"rgba")}function o(t){for(var e=a(t),i=0;3>i;i++)e[i]*=.95;return r(e,"rgba")}function l(t,e){var i=a(t);return i[3]=e,r(i,"rgba")}function h(t,e,i,n){var s=a(t),o=d(s[0],s[1],s[2]);o[0]+=e,o[1]+=i,o[2]+=n;var l=c(o[0],o[1],o[2]);return r(l,"rgb")}function c(t,e,i){e=Math.min(1,Math.max(0,e)),i=Math.min(1,Math.max(0,i));var a=0,r=0,n=0;if(0===e)a=r=n=255*i+.5;else{var s=6*(t-Math.floor(t)),o=s-Math.floor(s),l=i*(1-e),h=i*(1-e*o),c=i*(1-e*(1-o));switch(Math.floor(s)){case 0:a=255*i+.5,r=255*c+.5,n=255*l+.5;break;case 1:a=255*h+.5,r=255*i+.5,n=255*l+.5;break;case 2:a=255*l+.5,r=255*i+.5,n=255*c+.5;break;case 3:a=255*l+.5,r=255*h+.5,n=255*i+.5;break;case 4:a=255*c+.5,r=255*l+.5,n=255*i+.5;break;case 5:a=255*i+.5,r=255*l+.5,n=255*h+.5}}var d=[];return d.push(Math.floor(a)),d.push(Math.floor(r)),d.push(Math.floor(n)),d}function d(t,e,i){var a,r,n,s=[3],o=t>e?t:e;i>o&&(o=i);var l=e>t?t:e;if(l>i&&(l=i),n=o/255,r=0!==o?(o-l)/o:0,0===r)a=0;else{var h=(o-t)/(o-l),c=(o-e)/(o-l),d=(o-i)/(o-l);a=t==o?d-c:e==o?2+h-d:4+c-h,a/=6,0>a&&(a+=1)}return s[0]=a,s[1]=r,s[2]=n,s}function u(t){var e=a(t);return e[3]}function g(t){return t&&"string"==typeof t&&-1!=t.indexOf("rgba")?u(t):void 0}function f(t){return p(t).hex}function p(t){var e,i,n,s,o=r(a(t),"rgba"),l=/rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/,h=o.replace(/\s+/g,"").match(l);return e=(+h[1]).toString(16),e=1===e.length?"0"+e:e,i=(+h[2]).toString(16),i=1===i.length?"0"+i:i,n=(+h[3]).toString(16),n=1===n.length?"0"+n:n,s=100*+(h[5]?h[5]:1),{hex:"#"+e+i+n,alpha:Math.ceil(s)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},v=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;return{toColor:r,hsb2rgb:c,rgb2hsb:d,getRGBAColorArray:a,mixColorWithHSB:h,getHighLightColor:n,getColorWithDivider:s,mixColorWithAlpha:l,getColorOpacity:u,getColorOpacityWithoutDefault:g,colorToHex:f,colorToHexAlpha:p,getClickColor:o}}),i("utils/QueryUtils",["require","./BaseUtils"],function(t){function e(t,e){if(t&&e){e=e.split(".");for(var i=0,a=e.length;a>i;i++)if(t=t[e[i]],void 0==t)return;return t}}function i(t,i){if(t&&t.length&&i)for(var a=0;a<t.length;a++){var r=e(t[a],i);if(void 0!=r)return r}}function a(t,e,i){for(var r in e)if(e.hasOwnProperty(r)){var n=t[r];"object"==typeof n?a(t[r],e[r],i):!i&&r in t||(t[r]=e[r])}return t}function r(t,i){if(t&&t.length&&i){for(var r,s=0,o=t.length;o>s;s++){var l=e(t[s],i);void 0==r?r=n.clone(l):a(r,l)}return r}}var n=t("./BaseUtils");return{mergeList:r,queryList:i,query:e,merge:a}}),i("ComponentLibrary",[],function(){function t(t){return i[t]}function e(t,e){i[t]=e}var i=Object.create(null);return{get:t,register:e}}),i("ChartLibrary",[],function(){function t(t){return i[t]}function e(t,e){i[t]=e}var i={};return{get:t,register:e}}),i("render/RenderLibrary",[],function(){function t(t){return a[t]}function e(e,i){var a=t(e);return a?new a(i):void 0}function i(t,e){a[t]=e}var a=Object.create(null);return{get:t,getRender:e,register:i}}),i("render/RenderFactory",["require","./RenderLibrary","../Constants","../utils/BaseUtils"],function(t){function e(t,e){var a=r.isSupportSVG()?n[t]:s[t];return i.getRender(a,e)}var i=t("./RenderLibrary"),a=t("../Constants"),r=t("../utils/BaseUtils"),n={};n[a.VANCHART]=a.VANCHART_SVG,n[a.PIE_CHART]=a.PIE_SVG,n[a.BAR_CHART]=a.BAR_SVG,n[a.COLUMN_CHART]=a.BAR_SVG,n[a.LINE_CHART]=a.LINE_SVG,n[a.AREA_CHART]=a.AREA_SVG,n[a.GAUGE_CHART]=a.GAUGE_SVG,n[a.RADAR_CHART]=a.RADAR_SVG,n[a.BUBBLE_CHART]=a.BUBBLE_SVG,n[a.SCATTER_CHART]=a.SCATTER_SVG,n[a.MAP_CHART]=a.MAP_SVG,n[a.TITLE_COMPONENT]=a.TITLE_SVG,n[a.DRILL_TOOLS]=a.DRILL_TOOLS_SVG,n[a.LEGEND_COMPONENT]=a.LEGEND_SVG,n[a.TOOLBAR_COMPONENT]=a.TOOLBAR_SVG,n[a.X_AXIS_COMPONENT]=a.AXIS_RENDER,n[a.Y_AXIS_COMPONENT]=a.AXIS_RENDER,n[a.RADIUS_AXIS_COMPONENT]=a.AXIS_RENDER,n[a.ANGLE_AXIS_COMPONENT]=a.AXIS_RENDER,n[a.RADIUS_AXIS_RENDER]=a.RADIUS_AXIS_SVG,n[a.ANGLE_AXIS_RENDER]=a.ANGLE_AXIS_SVG,n[a.CATEGORY_AXIS_COMPONENT]=a.CATEGORY_AXIS_SVG,n[a.VALUE_AXIS_COMPONENT]=a.VALUE_AXIS_SVG,n[a.DATE_AXIS_COMPONENT]=a.DATE_AXIS_SVG,n[a.ZOOM_COMPONENT]=a.ZOOM_SVG,n[a.DATA_SHEET_COMPONENT]=a.DATA_SHEET_SVG,n[a.RANGE_LEGEND_COMPONENT]=a.RANGE_LEGEND_SVG;var s={};return s[a.VANCHART]=a.VANCHART_VML,s[a.PIE_CHART]=a.PIE_VML,s[a.BAR_CHART]=a.BAR_VML,s[a.COLUMN_CHART]=a.BAR_VML,s[a.LINE_CHART]=a.LINE_VML,s[a.AREA_CHART]=a.AREA_VML,s[a.GAUGE_CHART]=a.GAUGE_VML,s[a.RADAR_CHART]=a.RADAR_VML,s[a.BUBBLE_CHART]=a.BUBBLE_VML,s[a.SCATTER_CHART]=a.SCATTER_VML,s[a.MAP_CHART]=a.MAP_VML,s[a.TITLE_COMPONENT]=a.TITLE_VML,s[a.DRILL_TOOLS]=a.DRILL_TOOLS_VML,s[a.LEGEND_COMPONENT]=a.LEGEND_VML,s[a.TOOLBAR_COMPONENT]=a.TOOLBAR_VML,s[a.X_AXIS_COMPONENT]=a.AXIS_RENDER,s[a.Y_AXIS_COMPONENT]=a.AXIS_RENDER,s[a.RADIUS_AXIS_COMPONENT]=a.AXIS_RENDER,s[a.ANGLE_AXIS_COMPONENT]=a.AXIS_RENDER,s[a.RADIUS_AXIS_RENDER]=a.RADIUS_AXIS_VML,s[a.ANGLE_AXIS_RENDER]=a.ANGLE_AXIS_VML,s[a.CATEGORY_AXIS_COMPONENT]=a.CATEGORY_AXIS_VML,s[a.VALUE_AXIS_COMPONENT]=a.VALUE_AXIS_VML,s[a.DATE_AXIS_COMPONENT]=a.DATE_AXIS_VML,s[a.DATA_SHEET_COMPONENT]=a.DATA_SHEET_VML,s[a.RANGE_LEGEND_COMPONENT]=a.RANGE_LEGEND_VML,{getRender:e}}),i("Handler",["require","./utils/BaseUtils","./Constants"],function(t){function e(t){this.vanchart=t,this._setDomEvents()}var i=5,a=t("./utils/BaseUtils"),r=t("./Constants");return e.prototype={_setDomEvents:function(){var t=this.vanchart.dom;a.hasTouch()?(a.addEvent(t,"touchstart",this._onContainerTouchStart.bind(this)),a.addEvent(t,"touchend",this._onContainerTouchEnd.bind(this))):(a.addEvent(t,"mousedown",this._onContainerMouseDown.bind(this)),a.addEvent(t,"mouseup",this._onContainerMouseUp.bind(this)),a.addEvent(t,"mousemove",this._onContainerMouseMove.bind(this)),a.addEvent(t,"mouseleave",this._onContainerMouseLeave.bind(this)))},trackerPointLeave:function(t){var e=this._getPointData(t);e&&e.series.chart.cancelChosenState(e),this._hideTooltip(),e==this.vanchart.hoverPoint&&(this.vanchart.hoverPoint=null)},trackerPointMove:function(t){this._showTooltip(t)},trackerPointEnter:function(t){var e=this._getPointData(t);this.updateHoverPoint(e,t)},trackerPointDown:function(){var t=this.vanchart.hoverPoint;t&&t.series.chart.makeClickedState(t)},trackerPointUp:function(t){var e=this.vanchart.hoverPoint;e&&(e.series.chart.cancelClickedState(e),e.onClick(t))},trackerSeriesEnter:function(t){var e=this._getSeriesData(t);e.chart.makeSeriesChosenState(e),this.vanchart.hoverSeries=e},trackerSeriesLeave:function(t){var e=this._getSeriesData(t);e.chart.cancelSeriesChosenState(e)},trackerPointTouchStart:function(t){t=t||window.event;var e=t.target||t.srcElement,i=d3.select(e).datum();this.updateHoverPoint(i,t),this._showTooltip(t),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},trackerPointTouchEnd:function(t){var e=this.vanchart.hoverPoint;e&&e.onClick(t),t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},_onContainerTouchStart:function(t){var e=this.vanchart,i=this.vanchart.getParentDom(),r=a.getMousePos(t,i),n=this.vanchart.getPlotBounds();if(a.containsPoint(n,r)){var s=e.hoverPoint?e.hoverPoint.series:e.hoverSeries;e.series.length&&(s?s.chart.onContainerMouseMove(t):e.series[0].chart.onContainerMouseMove(t)),this._showTooltip(t)}},_onContainerTouchEnd:function(t){var e=this.vanchart.hoverPoint;e&&e.onClick(t)},updateHoverPoint:function(t,e){t&&t!=this.vanchart.hoverPoint&&(this.vanchart.hoverPoint&&(t.series.chart.cancelChosenState(this.vanchart.hoverPoint),this.vanchart.isMouseDown&&t.series.chart.cancelClickedState(this.vanchart.hoverPoint)),this.vanchart.hoverPoint=t,this.vanchart.hoverSeries=t.series,t.series.chart.makeChosenState(t),this.vanchart.isMouseDown&&t.series.chart.makeClickedState(t),this._showTooltip(e))},_hideTooltip:function(){var t=this.vanchart.components.tooltip;t.hide()},_showTooltip:function(t){var e=this.vanchart.components.tooltip,i=this.vanchart.hoverPoint;if(i&&i.visible){var a=i.tooltip,r=e.calculateTooltipDivDim(a,i.tooltipText),n=i.series.chart.getTooltipPos(i,r,t);e.show(n,a,i.tooltipText)}},_onContainerMouseDown:function(t){var e=this.vanchart,i=this.vanchart.getParentDom(),r=a.getMousePos(t,i),n=e.getPlotBounds();e.isMouseDown=!0,e.downPos=r,this._supportCoordinateZoom()&&a.containsPoint(n,r)&&(this.selectRect=this.vanchart.render.getRenderRoot().append("rect"));var s=e.hoverPoint,o=e.hoverSeries;s&&o&&o.chart.makeClickedState(s),o&&o.chart.onContainerMouseDown(t);var l=this.vanchart.components.tooltip;l.immediateHide()},_onContainerMouseUp:function(t){var e=this.vanchart,n=e.components;if(this.selectRect){var s=a.getMousePos(t,this.vanchart.getParentDom());if(e.downPos&&s&&a.distance(e.downPos,s)>i&&(e.dealAxisZoom(e.downPos,s),n[r.TOOLBAR_COMPONENT])){var o=n[r.TOOLBAR_COMPONENT];o.showRefreshIconWhenZoom()}this.selectRect&&(this.selectRect.remove(),this.selectRect=null)}e.isMouseDown=!1;var l=e.hoverSeries,h=e.hoverPoint;h&&l&&l.chart.cancelClickedState(h),l&&l.chart.onContainerMouseUp(t)},_onContainerMouseLeave:function(){this._hideTooltip()},_onContainerMouseMove:function(t){var e=this.vanchart,i=this.vanchart.getParentDom(),n=a.getMousePos(t,i),s=this.vanchart.getPlotBounds();if(this.selectRect){var o=this.vanchart.getOptions(),l=o.zoom.zoomType,h=Math.min(n[0],e.downPos[0]),c=Math.min(n[1],e.downPos[1]),d=Math.abs(n[0]-e.downPos[0]),u=Math.abs(n[1]-e.downPos[1]),g=-1!=l.indexOf("x"),f=-1!=l.indexOf("y");g&&!f?(c=s.y,u=s.height):f&&!g&&(h=s.x,d=s.width),this.selectRect.attr("x",h).attr("y",c).attr("width",d).attr("height",u).style({fill:"rgba(69,114,167,0.25)"})}if(a.containsPoint(s,n)){var p=e.hoverSeries;p&&p.visible&&p.chart.onContainerMouseMove(t);var m=this.vanchart.getOptions();if(m.plotOptions.large){var e=this.vanchart.getChart(r.BUBBLE_CHART)||this.vanchart.getChart(r.SCATTER_CHART);e&&e.onContainerMouseMove(t)}}},validClick:function(t){var e=this.vanchart.getParentDom(),r=a.getMousePos(t,e);return this.vanchart.downPos?a.distance(this.vanchart.downPos,r)<i:!0},_getSeriesData:function(t){t=t||window.event;var e=t.target||t.srcElement,i=a.isSupportSVG()?d3.select(e).datum():e._data_;return i.lineData||i.series||i},_getPointData:function(t){t=t||window.event;var e=t.target||t.srcElement;return a.isSupportSVG()?d3.select(e).datum():e._data_},_supportCoordinateZoom:function(){var t=this.vanchart.getOptions(),e=this.vanchart.hoverPoint;return e&&e.series.chart.isUpdateWithForce()?void 0:a.isSupportSVG()&&t.zoom&&t.zoom.zoomType}},e}),i("utils/Formatter",["require","./BaseUtils"],function(t){function e(t,e){return e=i.getFormatterFunction(e),e?e.bind(t)(t):t}var i=t("./BaseUtils");return{format:e}}),i("theme/options",["require","../Constants"],function(t){var e=t("../Constants"),i={};return i[e.PIE_CHART]={plotOptions:{}},i[e.COLUMN_CHART]={plotOptions:{}},i[e.BAR_CHART]={plotOptions:{}},i[e.LINE_CHART]=i[e.AREA_CHART]={plotOptions:{large:!1,marker:{symbol:"null_marker"},dataLabels:{enabled:!1,align:"outside"}}},i[e.GAUGE_CHART]={plotOptions:{}},i[e.RADAR_CHART]={plotOptions:{columnType:!1,marker:{symbol:"null_marker"},borderWidth:1,borderColor:"white",lineWidth:1}},i[e.SCATTER_CHART]={plotOptions:{}},i[e.BUBBLE_CHART]={plotOptions:{}},i[e.MAP_CHART]={plotOptions:{fillColor:"#cccccc",fillColorOpacity:.75,borderColor:"#ffffff",borderWidth:1,borderOpacity:1}},i}),i("component/Point",["require","../utils/QueryUtils","../utils/BaseUtils","../utils/ColorUtils","../utils/Formatter","../Constants","../theme/options"],function(t){function e(t,e,i){t&&e&&(this.series=t,this.index=i,this.pointOption=e,this.updateClassName(i),this._init(e))}var i=t("../utils/QueryUtils"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../utils/Formatter"),s=t("../Constants"),o=t("../theme/options"),l="CATEGORY",h="SERIES",c="VALUE",d="PERCENT",u=2;return e.prototype={constructor:e,_init:function(t){var e=this.series,n=this.series.chart,l=[t,e.seriesOption,e.chart.option.plotOptions[e.type],e.chart.option.plotOptions,o[e.type].plotOptions],h=i.queryList(l,"dataLabels"),c=i.queryList(l,"tooltip"),d=a.pick(t.y,t[2],t.value),u=e.valueAxis?e.valueAxis.getValueFromData(t):d,g="-"===u||void 0===u;u=g?0:u;var f=e.baseAxis&&!e.chart.isForceBubble()?e.baseAxis.getValueFromData(t,this.index):a.pick(t.x,e.seriesOption.name),p=e.name;(e.type===s.PIE_CHART||e.type===s.GAUGE_CHART)&&(p=[f,f=p][0]);var m=n.vanchart.getDefaultSeriesColor(p),v=n.vanchart.getComponent(s.RANGE_LEGEND_COMPONENT);if(v){var _=a.pick(i.queryList(l,"size"),0);_=n.isForceBubble()?t.y:_,m=v.getColorWithSize(_)||m}m=i.queryList(l,"color")||m,m=e._getBandsColor(this)||m;var y=r.getClickColor(m);i.merge(this,{value:u,y:u,y0:e.valueAxis?e.valueAxis.getStartPosValue():0,category:f,seriesName:p,visible:a.pick(t.visible,!0),name:t.name,lnglat:t.lnglat,isNull:g,style:e.style,color:m,clickColor:y,hyperlink:i.queryList(l,"hyperlink"),jsonHyperlink:i.queryList(l,"jsonHyperlink"),click:i.queryList(l,"click"),borderWidth:i.queryList(l,"borderWidth")||0,borderColor:i.queryList(l,"borderColor")||"white",borderRadius:i.queryList(l,"borderRadius")||0,image:i.queryList(l,"image"),imageWidth:i.queryList(l,"imageWidth")||0,imageHeight:i.queryList(l,"imageHeight")||0,dataLabels:g?null:h,tooltip:c,mouseOverColor:i.queryList(l,"mouseOverColor")||r.getHighLightColor(m)},!0),n.mergeDataPointAttributes(this)},updateClassName:function(t){this.className="vancharts-dataPoint-series"+this.series.index+"point"+t},setPercentage:function(t){this.percentage=t,this.dataLabels&&this.dataLabels.enabled&&i.merge(this,this._calculateLabelInfo(this.dataLabels),!0)},_calculateLabelInfo:function(t){var e=t||{},i=e.formatter,r=e.useHtml;if(!i)return{};var s=[];if("object"==typeof i){var o=i.identifier;if(-1!=o.indexOf(l)||-1!=o.indexOf(h)){var u,g=n.format(this.category,i.categoryFormat),f=n.format(this.seriesName,i.seriesFormat);u=-1!=o.indexOf(l)&&-1!=o.indexOf(h)?g+" "+f:-1!=o.indexOf(l)?g:f;var p=this.getCategorySeriesStyle(e),m=a.getTextDimension(u,p,r);s.push({text:u,style:p,dim:m})}if(-1!=o.indexOf(c)||-1!=o.indexOf(d)){var v=n.format(this.value,i.valueFormat),_=n.format(this.percentage,i.percentFormat),u="";u=-1!=o.indexOf(c)&&-1!=o.indexOf(d)?v+" "+_:-1!=o.indexOf(c)?v:_;var p=this.getValuePercentageStyle(e),m=a.getTextDimension(u,p,r);s.push({text:u,style:p,dim:m})}}else this.pushCustomLabelContent(i,e,r,s);var y=this.calculateTextDim(s);return{labelContent:s,labelDim:y}},pushCustomLabelContent:function(t,e,i,r,n){var s=a.getFormatterFunction(t).call(this),o=this.getValuePercentageStyle(e,n),l=a.getTextDimension(s,o,i);e.useHtml&&(l.width=isNaN(parseFloat(e.labelWidth))?l.width:parseFloat(e.labelWidth),l.height=isNaN(parseFloat(e.labelHeight))?l.height:parseFloat(e.labelHeight)),r.push({text:s,style:o,dim:l})},calculateTextDim:function(t){var e=0,i=0;if(t&&t.length){for(var a=0,r=t.length;r>a;a++){var n=t[a].dim;e=Math.max(e,n.width),i+=n.height}i+=(r-1)*u}return{width:e,height:i}},getCategorySeriesStyle:function(t,e){if(t&&t.style)return t.style;var i=e||(this.columnType?s.INSIDE:t.align||s.OUTSIDE);return{color:i==s.OUTSIDE?this.series.color:"#ffffff",fontSize:"12px",fontFamily:"Verdana",fontWeight:"bold"}},getValuePercentageStyle:function(t,e){if(t&&t.style)return t.style;var i=e||(this.columnType?s.INSIDE:t.align||s.OUTSIDE);return{fontSize:"12px",fontFamily:"Verdana",textShadow:"1px 1px 1px rgba(0,0,0,0.15)",color:i==s.OUTSIDE?this.series.color:"#ffffff"}},onMouseMove:function(t){},onClick:function(t){if(this.click)this.click.call(this,t);else if(this.hyperlink){t=t||window.event;var e=this.hyperlink;e&&window.FR&&FR.doHyperlink(t,new Function("return "+e)(),!0)}},onMouseDown:function(t){},onMouseUp:function(t){}},e}),i("component/Series",["require","../utils/BaseUtils","../utils/QueryUtils","../Constants","./Point","../theme/options"],function(t){function e(t,e,i){this.chart=t,this.index=i,this._init(e)}var i=t("../utils/BaseUtils"),a=t("../utils/QueryUtils"),r=t("../Constants"),n=t("./Point"),s=t("../theme/options");return e.prototype={constructor:e,_init:function(t){var e=this.chart.vanchart,o=this.chart.option.plotOptions;this.type=this.chart.componentType;var l=[t,o[this.type],o,s[this.type].plotOptions];this.seriesOption=t,this.name=i.pick(t.name,"Series"+this.index),this.className="vancharts-series-"+this.index,this.type!==r.PIE_CHART&&(this.color=a.queryList(l,"color")||this.chart._getDefaultSeriesColor(this.name)),this.visible=a.queryList(l,"visible"),this.stack=a.queryList(l,"stack"),this.stackByPercent=a.queryList(l,"stackByPercent"),this.style=a.queryList(l,"style"),this.trendLine=a.queryList(l,"trendLine"),this.bands=a.queryList(l,"bands");var h=i.clone(a.queryList(l,"marker"));switch(h&&(!i.isSupportSVG()||i.isIE())&&i.isImageMarker(h.symbol)&&(h.symbol=r.CIRCLE),this.marker=h,this.type){case r.PIE_CHART:break;case r.GAUGE_CHART:this.gaugeAxis=e.gaugeAxis(a.queryList(l,"gaugeAxis"));break;case r.RADAR_CHART:var c=a.queryList(l,"columnType");c&&(this.stack=r.RADAR_CHART),this.polar=e.polar(a.queryList(l,"polar")),this.radiusAxis=this.polar.radiusAxis,this.angleAxis=this.polar.angleAxis,this.radiusAxis&&this.angleAxis&&(this.baseAxis=this.angleAxis,this.baseAxis.isBaseAxis=!0,this.valueAxis=this.radiusAxis);break;default:this.xAxis=e.xAxis(a.queryList(l,"xAxis")),this.yAxis=e.yAxis(a.queryList(l,"yAxis")),this.xAxis&&this.yAxis&&(this.baseAxis=this._getBaseAxis(),this.baseAxis.isBaseAxis=!0,this.valueAxis=this._getValueAxis())}this.chart.mergeSeriesAttributes(this),this.points=[],this.visiblePoints=[];var d=this.chart.vanchart.getComponent(r.RANGE_LEGEND_COMPONENT),u=t.data,g=this;this.points=u.map(function(t,e){return new n(g,t,e)}).filter(function(t){return g._isValidPoint(d,t)}),this.updateVisiblePoints()},_isValidPoint:function(t,e){return!this._isBubbleAndNegative(e)&&!this._isNullPoint(e)&&!this._isOutRangeLegend(t,e)},_isBubbleAndNegative:function(t){var e=t.series.type==r.BUBBLE_CHART,i=!t.displayNegative&&t.size<0;return e&&i},_isNullPoint:function(t){var e=t.series.type==r.BUBBLE_CHART&&("-"==t.size||t.isNull),i=t.series.type==r.SCATTER_CHART&&t.isNull;return e||i},_isOutRangeLegend:function(t,e){return t?!t.getColorWithSize(e.size):!1},updateVisiblePoints:function(){this.visiblePoints=this.points.filter(function(t){return t.visible})},updateClassName:function(){if(this.baseAxis&&this.baseAxis.type==r.CATEGORY_AXIS_COMPONENT){var t=this.baseAxis.categories,e=[];this.points.forEach(function(r){var s=a.merge(new n,r);s.updateClassName(i.indexInArray(t,r.category)),e.push(s)}),this.points=e}},getDataPointCount:function(){return this.seriesOption.data.length},getSeryTotalValue:function(){var t=0;return this.points.forEach(function(e){t+=e.value}),t},getLocation:function(){return this.baseAxis?this.baseAxis.getPosition():r.BOTTOM},isValueAxisBased:function(){var t=r.CATEGORY_AXIS_COMPONENT;return this.xAxis&&this.xAxis.type!=t&&this.yAxis&&this.yAxis.type!=t},_getBaseAxis:function(){var t=r.CATEGORY_AXIS_COMPONENT;return this.xAxis.type==t?this.xAxis:this.yAxis.type==t?this.yAxis:this.type==r.BAR_CHART?this.yAxis:this.xAxis},_getValueAxis:function(){var t=r.CATEGORY_AXIS_COMPONENT;return this.xAxis.type==t?this.yAxis:this.yAxis.type==t?this.xAxis:this.type==r.BAR_CHART?this.xAxis:this.yAxis},_getBandsColor:function(t){var e=this.bands;if(e){e=i.isArray(e)?e:[e];for(var a=0,n=e.length;n>a;a++){var s=e[a];if(s.axis){var o="x"==s.axis?this.xAxis:this.yAxis,l=o.getValueFromData(t.pointOption),h=s.from,c=s.to;o.type==r.CATEGORY_AXIS_COMPONENT&&(l=o.indexOfLabel(l),h=h?o.indexOfLabel(h):h,c=c?o.indexOfLabel(h):c);var d=i.hasDefined(h)?l>=h:!0,u=i.hasDefined(c)?c>=l:!0;if(d&&u)return s.color}else{var h=Math.min(s.from,s.to),c=Math.max(s.from,s.to);if(t.value>=h&&t.value<c)return s.color}}if(i.hasDefined(t.valueInDomain))for(var a=0,g=e.length;g>a;a++){var s=e[a],h=Math.min(s.from,s.to),c=Math.max(s.from,s.to);if(t.valueInDomain>=h&&t.valueInDomain<=c)return s.color}}},onMouseMove:function(t){},onClick:function(t){},onMouseDown:function(t){},onMouseUp:function(t){}},e}),i("render/LegendIconFactory",["require","../Constants"],function(t){function e(t){return n[t]}function i(t){return s[t]}function a(t){return n[t]}var r=t("../Constants"),n={},s={};return n[r.PIE_ICON]="M15.795,7.943L7.909,12.5L0.205,8.052C1.756,5.333,4.68,3.5,8.032,3.5C11.338,3.5,14.23,5.287,15.795,7.943z",
s[r.PIE_ICON]={width:16,height:16},n[r.DONUT_ICON]="M8.945,11.107c1.671,0,3.181,0.684,4.269,1.786l4.271-4.271c-4.686-4.686-12.284-4.686-16.971,0l4.216,4.216C5.815,11.768,7.302,11.107,8.945,11.107z",s[r.DONUT_ICON]={width:18,height:18},n[r.NORMAL_ICON]="M0,0L12,0L12,12L0,12Z",s[r.NORMAL_ICON]={width:12,height:12},n[r.BUBBLE_ICON]="M6,11.5c-1.47,0-2.851-0.572-3.889-1.611C1.072,8.851,0.5,7.47,0.5,6s0.572-2.851,1.611-3.889C3.149,1.072,4.53,0.5,6,0.5s2.851,0.572,3.889,1.611C10.928,3.149,11.5,4.53,11.5,6s-0.572,2.851-1.611,3.889C8.851,10.928,7.47,11.5,6,11.5z",s[r.BUBBLE_ICON]={width:11,height:11},n[r.NULL_MARKER]="M1,8L1,8c0-0.552,0.448-1,1-1h12c0.552,0,1,0.448,1,1v0c0,0.552-0.448,1-1,1H2C1.448,9,1,8.552,1,8z",s[r.NULL_MARKER]={width:16,height:16},n[r.CIRCLE]="M11,8c0,1.657-1.343,3-3,3S5,9.657,5,8s1.343-3,3-3S11,6.343,11,8z M14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,8c0-0.347,0.058-0.678,0.142-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.142C4.058,8.678,4,8.347,4,8z",s[r.CIRCLE]={width:16,height:16},n[r.SCATTER_ICON+r.NULL_MARKER]="M0,0L12,0L12,12L0,12Z",s[r.SCATTER_ICON+r.NULL_MARKER]={width:12,height:12},n[r.SCATTER_ICON+r.NORMAL_ICON]="M0,0L12,0L12,12L0,12Z",s[r.SCATTER_ICON+r.NORMAL_ICON]={width:12,height:12},n[r.SCATTER_ICON+r.CIRCLE]="M4,8C2.897,8,1.897,7.551,1.173,6.827S0,5.103,0,4s0.449-2.103,1.173-2.827S2.897,0,4,0s2.103,0.449,2.827,1.173S8,2.897,8,4S7.551,6.103,6.827,6.827S5.103,8,4,8",s[r.SCATTER_ICON+r.CIRCLE]={width:8,height:8},n[r.SQUARE]="M11,11H5V5h6V11z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2V7z",s[r.SQUARE]={width:16,height:16},n[r.SCATTER_ICON+r.SQUARE]="M0,0h8c0,0,0,3.889,0,8C4,8,0,8,0,8V0z",s[r.SCATTER_ICON+r.SQUARE]={width:8,height:8},n[r.DIAMOND]="M8,11L5,8l3-3l3,3L8,11z M14,7h-2.586l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M3.586,8l1-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.586L3.586,8z",s[r.DIAMOND]={width:16,height:16},n[r.SCATTER_ICON+r.DIAMOND]="M0,4.5L4.502,0l4.5,4.5c0,0,0,0-4.5,4.5C0,4.5,0,4.5,0,4.5z",s[r.SCATTER_ICON+r.DIAMOND]={width:9,height:9},n[r.TRIANGLE]="M5,10l3-5.196L11,10H5z M14,7h-3.577l1.155,2H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M5.577,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.423L5.577,7z",s[r.TRIANGLE]={width:16,height:16},n[r.SCATTER_ICON+r.TRIANGLE]="M4.5,0L9,8c0,0-4.617,0-9,0L4.5,0z",s[r.SCATTER_ICON+r.TRIANGLE]={width:9,height:8},n[r.CIRCLE_HOLLOW]="M4.142,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.142C4.058,7.322,4,7.653,4,8S4.058,8.678,4.142,9zM14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,7C7.449,7,7,7.449,7,8s0.449,1,1,1s1-0.449,1-1S8.551,7,8,7 M8,5c1.657,0,3,1.343,3,3s-1.343,3-3,3S5,9.657,5,8S6.343,5,8,5L8,5z",s[r.CIRCLE_HOLLOW]={width:16,height:16},n[r.SCATTER_ICON+r.CIRCLE_HOLLOW]="M4,2c1.102,0,2,0.898,2,2S5.102,6,4,6S2,5.102,2,4S2.898,2,4,2 M4,0C1.791,0,0,1.791,0,4s1.791,4,4,4s4-1.791,4-4S6.209,0,4,0",s[r.SCATTER_ICON+r.CIRCLE_HOLLOW]={width:8,height:8},n[r.SQUARE_HOLLOW]="M4,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2V9z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M9,7H7v2h2V7 M11,5v6H5V5H11L11,5z",s[r.SQUARE_HOLLOW]={width:16,height:16},n[r.SCATTER_ICON+r.SQUARE_HOLLOW]="M6,6H2V2h4V6z M8,0H0v8h8V0z",s[r.SCATTER_ICON+r.SQUARE_HOLLOW]={width:8,height:8},n[r.DIAMOND_HOLLOW]="M4.157,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.157l-1,1L4.157,9z M14,7h-2.157l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,5.986L5.986,8L8,10.014L10.014,8L8,5.986 M8,4.571L11.429,8L8,11.429L4.571,8L8,4.571L8,4.571z",s[r.DIAMOND_HOLLOW]={width:16,height:16},n[r.SCATTER_ICON+r.DIAMOND_HOLLOW]="M2.121,4.999L5,2.121l2.878,2.878L5,7.879L2.121,4.999z M5,0L0,4.999L5,10l4.999-5.001L5,0z",s[r.SCATTER_ICON+r.DIAMOND_HOLLOW]={width:10,height:10},n[r.TRIANGLE_HOLLOW]="M4.5,9H2C1.448,9,1,8.552,1,8s0.448-1,1-1h3.655L4.5,9z M14,7h-3.655L11.5,9H14c0.552,0,1-0.448,1-1S14.552,7,14,7z M8,6.938L6.232,10h3.536L8,6.938 M8,4.938L11.5,11h-7L8,4.938L8,4.938z",s[r.TRIANGLE_HOLLOW]={width:16,height:16},n[r.SCATTER_ICON+r.TRIANGLE_HOLLOW]="M5.001,3.34L7.402,7.5H2.598L5.001,3.34z M5.001,0.34L0,9h10L5.001,0.34z",s[r.SCATTER_ICON+r.TRIANGLE_HOLLOW]={width:10,height:9},{getLegendIconPath:e,getLegendIconSize:i,hasIcon:a}}),i("component/Base",["require","../utils/BaseUtils","../Constants","../render/RenderFactory","../utils/QueryUtils","../utils/Formatter","../render/LegendIconFactory"],function(t){function e(t,e,i){this.vanchart=t,this.option=e,this.componentType=i,this.componentOption=e[i];var n;if(this.type)switch(i){case a.RADIUS_AXIS_COMPONENT:n=a.RADIUS_AXIS_RENDER;break;case a.ANGLE_AXIS_COMPONENT:n=a.ANGLE_AXIS_RENDER;break;default:n=this.type}else n=i;this.render=r.getRender(n,this),this.isFloat=!1,this._needLayout=!0,this._floatX=0,this._floatY=0,this.bounds={x:0,y:0,width:0,height:0}}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("../render/RenderFactory"),n=(t("../utils/QueryUtils"),t("../utils/Formatter")),s=t("../render/LegendIconFactory"),o=2,l="CATEGORY",h="SERIES",c="VALUE",d="PERCENT",u=4.5;return e.prototype={constructor:e,refresh:function(t,e){this._refreshOption(t,e),this._refresh()},doLayout:function(){},fixBoundsByPlot:function(){},initAttributesWithSeries:function(){},_refresh:function(){},remove:function(){this.render&&this.render.remove()},_refreshOption:function(t,e){t&&(this.option=t,this.componentOption=e?e:t[this.componentType],this._refreshFloatPosition())},_refreshFloatPosition:function(){var t=this.componentOption;t&&(this.isFloat=t.floating,this._floatX=this._getPercentValue(t.x,this.vanchart.chartWidth()),this._floatY=this._getPercentValue(t.y,this.vanchart.chartHeight()))},groupDataByClassName:function(){return i.pick(this.option.byClassName,!0)},getMaxBubbleRadius:function(){var t=0,e=this.vanchart.series;return e.forEach(function(e){e.visible&&e.type==a.BUBBLE_CHART&&(t=Math.max(t,e.maxSize))}),t/2},_getDefaultSeriesColor:function(t){return this.vanchart.getDefaultSeriesColor(t)},_getLegendType:function(t){var e=t.marker,i="";switch(t.type){case a.PIE_CHART:i=t.innerRadius||t.innerRadius&&parseFloat(t.innerRadius)>0?a.DONUT_ICON:a.PIE_ICON;break;case a.BUBBLE_CHART:i=a.BUBBLE_ICON;break;case a.SCATTER_CHART:i=a.SCATTER_ICON;case a.RADAR_CHART:if(t.columnType){i=a.NORMAL_ICON;break}case a.LINE_CHART:case a.AREA_CHART:i+=this._getLegendTypeFromMarker(e)||a.NULL_MARKER;break;default:i=a.NORMAL_ICON}return i},_getLegendTypeFromMarker:function(t){return t&&s.hasIcon(t.symbol)?t.symbol:null},_isLineTypeSeries:function(t){return t==a.LINE_CHART||t==a.AREA_CHART||t==a.RADAR_CHART||t==a.SCATTER_CHART},_getPercentValue:function(t,e){return t?(t+="",-1!=t.indexOf("%")&&(t=parseFloat(t)*e/100),parseFloat(t)):0},_setComponentBounds:function(t,e){this.isFloat?this._updateFloatBounds(t,e):this._updateComponentBounds(t,e)},_updateFloatBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=this._floatX,n=this._floatY,s=i.x+i.width-r,o=i.y+i.height-n;switch(t){case a.TOP:this.bounds={x:r,y:n,width:s,height:e};break;case a.BOTTOM:this.bounds={x:r,y:n,width:s,height:e};break;case a.LEFT:this.bounds={x:r,y:n,width:e,height:o};break;case a.RIGHT_TOP:case a.RIGHT:this.bounds={x:r,y:n,width:e,height:o}}},_updateComponentBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=i.x,n=i.y,s=i.width,o=i.height;switch(t){case a.TOP:this.bounds={x:r,y:n,width:s,height:e};break;case a.BOTTOM:this.bounds={x:r,y:n+o-e,width:s,height:e};break;case a.LEFT:this.bounds={x:r,y:n,width:e,height:o};break;case a.RIGHT_TOP:case a.RIGHT:this.bounds={x:r+s-e,y:n,width:e,height:o}}this.vanchart.setPlotBounds(i),this._clipPlotBounds(t,e)},_clipPlotBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=i.x,n=i.y,s=i.width,o=i.height;switch(t){case a.TOP:i={x:r,y:n+e,width:s,height:o-e};break;case a.BOTTOM:i={x:r,y:n,width:s,height:o-e};break;case a.LEFT:i={x:r+e,y:n,width:s-e,height:o};break;case a.RIGHT_TOP:case a.RIGHT:i={x:r,y:n,width:s-e,height:o}}this.vanchart.setPlotBounds(i)},_getBackgroundColor:function(){var t=this.option,e="string"==typeof t.plotBackgroundColor,i="string"==typeof t.backgroundColor;return e?t.plotBackgroundColor:i?t.backgroundColor:"white"},getPosition:function(){return this.componentOption.position},isHorizontal:function(){return this.componentOption.position==a.TOP||this.componentOption.position==a.BOTTOM},getMousePos:function(t){var e=this.vanchart.getParentDom();return i.getMousePos(t,e)},isLargeMode:function(){return this.option.plotOptions.large},_maxHeight:function(){var t=this.vanchart.chartHeight();return this.componentOption.maxHeight?this._getPercentValue(this.componentOption.maxHeight,t):t},_maxWidth:function(){var t=this.vanchart.chartWidth();return this.componentOption.maxWidth?this._getPercentValue(this.componentOption.maxWidth,t):t},_calculateSingleLineLabelContent:function(t,e){if(!t)return"";if("object"==typeof t){var a="",r=t.identifier,s=n.format(e.category,t.categoryFormat),o=n.format(e.seriesName,t.seriesFormat);if((-1!=r.indexOf(l)||-1!=r.indexOf(h))&&(a+=-1!=r.indexOf(l)&&-1!=r.indexOf(h)?s+" "+o:-1!=r.indexOf(l)?s:o),-1!=r.indexOf(c)||-1!=r.indexOf(d)){i.isEmpty(a)||(a+=":");var u=n.format(e.value,t.valueFormat),g=n.format(e.percentage,t.percentFormat);a+=-1!=r.indexOf(c)&&-1!=r.indexOf(d)?u+" "+g:-1!=r.indexOf(c)?u:g}return a}return i.getFormatterFunction(t).call(e)},_createMultiLineLabelContent:function(t,e){if(!t)return[];if("object"==typeof t){var a=[],r=t.identifier,s=n.format(e.category,t.categoryFormat),o=n.format(e.seriesName,t.seriesFormat),u=n.format(e.value,t.valueFormat),g=n.format(e.percentage,t.percentFormat);return-1!=r.indexOf(l)&&a.push(s),-1!=r.indexOf(h)&&a.push(o),-1!=r.indexOf(c)&&a.push(u),-1!=r.indexOf(d)&&a.push(g),a}return[i.getFormatterFunction(t).call(e)]},_getTickContent:function(t,e){return e?n.format(t,e):t},getLabelGap:function(){return o},getDefaultMarkerRadius:function(){return u},getPlotBounds:function(){return this.vanchart.getPlotBounds()},getChartBounds:function(){return this.vanchart.getChartBounds()},getVanchartRender:function(){return this.vanchart.getRender()},getRender:function(){return this.render},getParentDom:function(){return this.vanchart.getParentDom()},getTooltipComponent:function(){return this.vanchart.components.tooltip}},e}),i("component/Title",["require","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.textDim=null,this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=.2,s=5;return e.prototype={constructor:e,doLayout:function(){var t,e=this.componentOption,i=this.vanchart.getPlotBounds(),n=i.width,o=i.height;if(this.isFloat?(n-=this._floatX-i.x,o-=this._floatY-i.y):(this.initBarWidth=a.pick(this.initBarWidth,this.vanchart.getToolbarWidth()),n-=this.initBarWidth,"center"===e.align&&(n-=this.initBarWidth)),n-=2*s,o-=2*s,t=a.getTextWrapDimension(e.text,e.style,e.useHtml),t.width>n){var l=a.clone(e.style);l.width=n+"px",t=a.getTextWrapDimension(e.text,l,e.useHtml)}else t.width+=.5;if(t.height=Math.min(this._maxHeight(),o,t.height),this.isFloat)this.bounds={x:this._floatX,y:this._floatY,width:t.width+2*s,height:t.height+2*s};else{var h=t.height+2*s;this._setComponentBounds(r.TOP,h),"center"!==e.align&&(t.width=n)}this.textDim=t},getPadding:function(){return s},getLineGapPercent:function(){return n},translateX:function(t){this.render.translateX(t)},changeTextRightSpace:function(t){this.render.changeTextRightSpace(t)}},a.inherit(e,i),t("../ComponentLibrary").register(r.TITLE_COMPONENT,e),e}),i("component/DrillTools",["require","./Base","../utils/BaseUtils","../utils/ColorUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.iconData=[]}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=.417,o=.583,l=.25,h=.333,c=.1665;return e.prototype={constructor:e,doLayout:function(){var t=this.componentOption;this._setComponentBounds(n.TOP,a.getTextHeight(t.style)*(2*c+1))},addIconData:function(t){this.iconData.push(t),t.aniStart=this.getMarkAnimationStartPos(t),t.aniEnd=this.getMarkPos(t)},deleteIconData:function(t){for(var e;(e=this.iconData[this.iconData.length-1])&&e.series!=t;)this.iconData.pop()},getIconData:function(){return this.iconData},getBookMarkPath:function(t){var e=this.componentOption.style,i=a.getTextDimension(t.geo.geoName,e),r=t.layerIndex,n=(0==r?s:o)+l;n=i.height*n+i.width;var d=i.height*h,u=(1+2*c)*i.height,g=[0,0],f=[n,0],p=[n+d,u/2],m=[n,u],v=[0,u];return"M"+g+"L"+f+"L"+p+"L"+m+"L"+v+"Z"},isCurrent:function(t){return this.iconData[this.iconData.length-1]==t},textColor:function(t){var e=this.componentOption;return this.isCurrent(t)?e.currentColor:e.style.color},mouseOverColor:function(t){var e;if(!(e=this.componentOption.mouseOverColor)){var i=this.textColor(t),a=r.getRGBAColorArray(i),n=r.rgb2hsb(a[0],a[1],a[2]),s=r.hsb2rgb(n[0],n[1]/2,(n[2]+1)/2);e=r.toColor(s,"rgb")}return e},leftPadding:function(t){return 0==t.layerIndex?s:o},topPadding:function(){return c},calculateExitAnimation:function(t){t.reverse();for(var e=600,i=0,a=t.length;a>i;i++)t[i].time=e,e=Math.max(e-100,0);var r=0;for(i=a-1;i>=0;i--)t[i].time?(t[i].delay=r,r+=200):t[i].delay=0},getMarkPos:function(t){for(var e=0,i=0;i<t.layerIndex;i++)e+=this.getBookMarkLength(this.iconData[i],i);return e},getMarkAnimationStartPos:function(t){var e=t.layerIndex;return 0==e?0:this.getMarkPos(this.iconData[e-1])-this.getBookMarkLength(t,e)},getBookMarkLength:function(t,e){var i=this.componentOption,r=a.getTextHeight(i.style),n=a.getTextDimension(t.geo.geoName,i.style).width,h=(0==e?s:o)+l;return n+h*r}},a.inherit(e,i),t("../ComponentLibrary").register(n.DRILL_TOOLS,e),e}),i("utils/BoundsManager",["require","./BaseUtils"],function(t){function e(){this.addedBounds=[]}var i=t("./BaseUtils");return e.prototype={constructor:e,addBounds:function(t){this.addedBounds.push(t)},isOverlapped:function(t){for(var e=0,a=this.addedBounds.length;a>e;e++)if(i.rectangleOverlapped(t,this.addedBounds[e]))return!0;return!1},isEmpty:function(){return 0==this.addedBounds.length}},e}),i("utils/BezierEasing",[],function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function i(t){return 3*t}function a(a,r,n){return((t(r,n)*a+e(r,n))*a+i(r))*a}function r(a,r,n){return 3*t(r,n)*a*a+2*e(r,n)*a+i(r)}function n(t,e,i,r,n){var s,o,l=0;do o=e+(i-e)/2,s=a(o,r,n)-t,s>0?i=o:e=o;while(Math.abs(s)>c&&++l<d);return o}function s(t,e,i,s){function o(e,n){for(var s=0;l>s;++s){var o=r(n,t,i);if(0===o)return n;var h=a(n,t,i)-e;n-=h/o}return n}function c(){for(var e=0;u>e;++e)v[e]=a(e*g,t,i)}function d(e){for(var a=0,s=1,l=u-1;s!=l&&v[s]<=e;++s)a+=g;--s;var c=(e-v[s])/(v[s+1]-v[s]),d=a+c*g,f=r(d,t,i);return f>=h?o(e,d):0===f?d:n(e,a,a+g,t,i)}function p(){_=!0,(t!=e||i!=s)&&c()}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var m=0;4>m;++m)if("number"!=typeof arguments[m]||isNaN(arguments[m])||!isFinite(arguments[m]))throw new Error("BezierEasing arguments should be integers.");if(0>t||t>1||0>i||i>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var v=f?new Float32Array(u):new Array(u),_=!1,y=function(r){return _||p(),t===e&&i===s?r:0===r?0:1===r?1:a(d(r),e,s)};y.getControlPoints=function(){return[{x:t,y:e},{x:i,y:s}]};var b=[t,e,i,s],x="BezierEasing("+b+")";return y.toString=function(){return x},y}var o=this,l=4,h=.001,c=1e-7,d=10,u=11,g=1/(u-1),f="Float32Array"in o;return s.css={ease:s(.25,.1,.25,1),linear:s(0,0,1,1),"ease-in":s(.42,0,1,1),"ease-out":s(0,0,.58,1),"ease-in-out":s(.42,0,.58,1),swing:s(.02,.01,.47,1),"ease-in-quart":s(.895,.03,.685,.22),"ease-out-back":s(.175,.885,.32,1.275)},s}),i("component/BaseAxis",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","../utils/Formatter","../utils/BoundsManager","./Base","../utils/BezierEasing"],function(t){function e(t,e,i){s.call(this,t,e,i),this.scale=null,this.lastScale=null,this.tickLabelLength=0,this.tickData=[],this.minorTickData=[],this.usedTickData=[],this.polar=null}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=(t("../utils/Formatter"),t("../utils/BoundsManager")),s=t("./Base"),o=(t("../utils/BezierEasing"),3),l=5,h=5,c=5,d=4,u=100,g=5,f=10,p="radar-top",m="radar-bottom",v="radar-left",_="radar-right";return e.prototype={constructor:e,doLayout:function(){switch(this.componentType){case i.X_AXIS_COMPONENT:case i.Y_AXIS_COMPONENT:this._updateAxisBounds();break;case i.RADIUS_AXIS_COMPONENT:case i.ANGLE_AXIS_COMPONENT:this._updatePolarBounds()}},refresh:function(t,e){switch(s.prototype.refresh.call(this,t,e),this.componentType){case i.RADIUS_AXIS_COMPONENT:this.polar=this.vanchart.polar(e.polarIndex),this.polar.radiusAxis=this;break;case i.ANGLE_AXIS_COMPONENT:this.polar=this.vanchart.polar(e.polarIndex),this.polar.angleAxis=this}},_updatePolarBounds:function(){if(this.componentType==i.ANGLE_AXIS_COMPONENT&&!this.polar.radius){var t=this.vanchart.getPlotBounds(),e=this.polar.center,a=[e[1]-t.y,t.x+t.width-e[0],t.y+t.height-e[1],e[0]-t.x],r=Math.min.apply(null,a);r-=f;var n={x:-a[3],y:-a[0],width:t.width,height:t.height};this.componentOption.showLabel&&(this._testRadius(r,n)||(r=this._findNiceRadius(n),this._testRadius(r,n))),this.polar.setRadius(r)}},_updateAxisBounds:function(){var t=this.componentOption;this.tickLabelLength=this._getTickLabelLength();var e=this._getAxisTitleLength()+h,a=this.tickLabelLength+e,r=0,n=0,s=this.isHorizontal();if(this.tickData&&this.tickData.length>1){var o,l;this.isAxisReversed()?(o=this.tickData[this.tickData.length-1].tickDim,l=this.tickData[0].tickDim):(o=this.tickData[0].tickDim,l=this.tickData[this.tickData.length-1].tickDim),r=s?o.width:o.height,n=s?l.width:o.height}if(a=s?t.maxHeight?Math.min(this._maxHeight(),a):a:t.maxWidth?Math.min(this._maxWidth(),a):a,t.onZero){var c=this.componentType==i.X_AXIS_COMPONENT?i.Y_AXIS_COMPONENT:i.X_AXIS_COMPONENT;c=this.vanchart[c](),t.position=c.isHorizontal()?i.RIGHT:i.BOTTOM,s=t.position==i.BOTTOM,this._updateFloatBounds(t.position,a)}else this.getRender()&&this._setComponentBounds(t.position,a);var d=this.vanchart.getPlotBounds(),u=this.vanchart.chartWidth(),f=this.vanchart.chartHeight();if(s){var p=Math.round(r/2)+g,m=Math.round(n/2)+g;this._clipPlotBounds(i.LEFT,Math.max(p-d.x,0)),this._clipPlotBounds(i.RIGHT,Math.max(m-(u-d.x-d.width),0))}else{var v=Math.round(n/2),_=Math.round(r/2);_=Math.max(_-(f-d.y-d.height),0),this._clipPlotBounds(i.TOP,v),this._clipPlotBounds(i.BOTTOM,_)}},dealOnZero:function(){var t=this.componentOption;if(t.onZero){var e=t.onZero===!0?0:t.onZero,a=this.componentType==i.X_AXIS_COMPONENT?i.Y_AXIS_COMPONENT:i.X_AXIS_COMPONENT;a=this.vanchart.getComponent(a).getAxis(e);var r;r=a.type===i.CATEGORY_AXIS_COMPONENT?0:a.scale(0);var n,s,o,l,h=this.vanchart.getPlotBounds();this.isHorizontal()?(n=h.x,s=r+h.y,o=h.width,l=this.bounds.height):(n=r+h.x,s=h.y,o=this.bounds.width,l=h.height),this.bounds={x:n,y:s,width:o,height:l}}},_getTickLabelLength:function(){var t=this.componentOption,e=t.tickPadding||o;t.enableTick&&(e+=t.tickLength||l);var i=this.isHorizontal(),a=0;return t.showLabel&&this.tickData.length&&this.tickData.forEach(function(t){var e=t.tickDim;a=Math.max(a,i?e.height:e.width)}),e+a},_updateOriginTickData:function(){var t=this._getTickValues(),e=this.componentOption,i=e.formatter;this.tickData=[];for(var r=0,n=t.length;n>r;r++){var s=t[r],o=this._getTickContent(s,i),l=a.getTextDimensionWithRotation(o,e.labelStyle,e.useHtml,e.labelRotation);e.useHtml&&(l.width=isNaN(parseFloat(e.labelWidth))?l.width:parseFloat(e.labelWidth),l.height=isNaN(parseFloat(e.labelHeight))?l.height:parseFloat(e.labelHeight)),this.tickData.push({tickValue:s,tickContent:o,tickDim:l})}},_calculateTickData:function(){if(this.componentType===i.ANGLE_AXIS_COMPONENT){var t=this.polar.radius;this.tickData.map(function(e){this._getCateLabelBounds(t,e)},this)}else this._updateTickContent();var e=this._getStartIndex(),a=this._getEndIndex()+1;this.usedTickData=[];for(var r=e;a>r;r++)this.usedTickData.push(this.tickData[r]);this.minorTickData=[],this.componentOption.enableMinorTick&&this.usedTickData.length&&(this.type==i.CATEGORY_AXIS_COMPONENT?this._updateCategoryMinorTickData():this._updateValueMinorTickData())},_getAxisTitleLength:function(){var t=this.componentOption.title,e=0;if(t){var i=a.getTextDimensionWithRotation(t.text,t.style,t.useHtml,t.rotation);e=this.isHorizontal()?i.height:i.width}return e},getAxisTitleBounds:function(){var t=this.bounds,e=this.tickLabelLength+h,a=this.componentOption.position,r=t.x,n=t.y,s=t.width,o=t.height;switch(a){case i.LEFT:s-=e;break;case i.BOTTOM:n+=e,o-=e;break;case i.RIGHT:r+=e,s-=e;break;case i.TOP:o-=e}return{x:r,y:n,width:s,height:o}},_updateRange:function(){this.scale.rangeRound(this._getRange())},_updateDomainWhenSizeFixed:function(){},_getRange:function(){switch(this.componentType){case i.RADIUS_AXIS_COMPONENT:return[0,this.polar.radius];default:var t=this.vanchart.getPlotBounds(),e=this.componentOption;return this.isHorizontal()?e.reversed?[t.width,0]:[0,t.width]:e.reversed?[0,t.height]:[t.height,0]}},_preCalculatePlotLines:function(){var t=this.componentOption.plotLines||[],e=this.componentOption.position,r=this.vanchart.getPlotBounds(),n=this.scale,s=this.type==i.DATE_AXIS_COMPONENT,l=[];return t.forEach(function(t){var h,c,d=n(s?a.object2date(t.value):t.value)+(n.rangeBand?n.rangeBand()/2:0);switch(d=a.lineSubPixelOpt(d,t.width),e){case i.TOP:case i.BOTTOM:h={x:d,y:0},c={x:d,y:r.height};break;case i.LEFT:case i.RIGHT:h={x:0,y:d},c={x:r.width,y:d}}var u,g,f,p;u=g=0,f="",p={};var m=Math.min(h.x,c.x),v=Math.max(h.x,c.x),_=Math.min(h.y,c.y),y=Math.max(h.y,c.y);if(n.rangeBand)if(e==i.TOP||e==i.BOTTOM){if(0>m||v>r.width)return}else if(0>_||y>r.height)return;if(t.label&&t.label.text&&t.label.style){p=t.label.style,f=t.label.text;var b=t.label.align,x=a.getTextDimension(f,p,t.label.useHtml);switch(t.label.useHtml&&(x.width=a.pick(t.label.labelWidth,x.width),x.height=a.pick(t.label.labelHeight,x.height)),b){case i.TOP:u=m-x.width,g=_;break;case i.BOTTOM:u=m-x.width,g=y-x.height;break;case i.LEFT:u=m,g=_-x.height-o;break;case i.RIGHT:u=v-x.width,g=_-x.height-o}}l.push({color:t.color,startPos:h,endPos:c,width:t.width,dataArray:i.DASH_TYPE[t.dashStyle],text:f,textDim:x,style:p,textX:u,textY:g})}),l},_preCalculatePlotBands:function(){var t=this._getPlotBands(),e=this.scale,a=!!e.rangeBand,r=a?e.rangeBand():0,n=[],s=this.vanchart.getPlotBounds(),o=this,l=this.scale.domain();return t.forEach(function(t){var a=t.from,h=t.to;o.type!=i.CATEGORY_AXIS_COMPONENT&&(a=Math.max(Math.min(t.from,t.to),l[0]),h=Math.min(Math.max(t.from,t.to),l[1]));var c=e(a),d=e(h);a=Math.min(c,d),h=Math.max(c,d),h+=r;var u=0,g=0,f=s.width,p=s.height,m=Math.abs(h-a);o.isHorizontal()?(u=Math.max(0,a),f=Math.min(f,m)):(g=Math.max(0,a),p=Math.min(p,m)),n.push({x:u,y:g,width:f,height:p,color:t.color})}),n},_getPlotBands:function(){var t=this.componentOption.plotBands,e=this.scale,i=!!e.rangeBand;if("string"==typeof t){var r=t;t=[];for(var n=this._getTickValuesWithEndValue(),s=i?-1:0,o=n.length-1;o>s;o-=2)t.push({color:r,from:i?n[o]:n[o-1],to:n[o]})}else{t=t||[];for(var l=[],h=0,c=t.length;c>h;h++){var d=t[h];a.hasDefined(d.from)&&a.hasDefined(d.to)&&l.push(d)}t=l}return t},_getTickValues:function(){return[]},_getTickInterval:function(){return this.valueList.length>2?a.accAdd(this.valueList[2],-this.valueList[1]):a.accAdd(this.valueList[1],-this.valueList[0])},_getTickValuesWithEndValue:function(){return this._getTickValues()},getTickData:function(){return this.usedTickData},getMaxTickWidth:function(){var t=0;return this.usedTickData.forEach(function(e){t=Math.max(t,e.tickDim.width)}),t},getTickHeight:function(){return this.componentOption.labelStyle?a.getTextHeight(this.componentOption.labelStyle):0},getMinorTickData:function(){return this.minorTickData},getMainTickData:function(){var t=this.componentOption,e=!t.log&&!this.byPercent&&this.type==i.VALUE_AXIS_COMPONENT;if(e){var r=this._getTickInterval();if(this.usedTickData.length>3){var n=this.usedTickData[1].tickValue,s=this.usedTickData[this.usedTickData.length-2].tickValue,o=0,l=this.usedTickData.length;a.hasDefined(t.min)&&a.accAdd(n,-r)<t.min&&(o+=1),a.hasDefined(t.max)&&a.accAdd(s,r)>t.max&&(l-=1);for(var h=[],c=o;l>c;c++)h.push(this.usedTickData[c]);return h}}return this.getTickData()},_updateCategoryMinorTickData:function(){var t=Math.round(this.getTickLength()/5),e=this.usedTickData.length;e=this.scale.rangeBand?e:e-1;for(var i=0;e>i;i++)for(var a=this.usedTickData[i].tickPos,r=1;5>r;r++)this.minorTickData.push(a+t*r)},_updateValueMinorTickData:function(){for(var t=this.componentOption,e=this._getTickInterval(),i=t.minorTickInterval?t.minorTickInterval:e/5,r=0,n=this.usedTickData.length;n-1>r;r++){var s=this.usedTickData[r].tickValue,o=this.usedTickData[r+1].tickValue,l=s instanceof Date&&o instanceof Date;if(s=l?a.date2int(s):s,o=l?a.date2int(o):o,0==r)for(var h=a.accAdd(o,-i);h>s;h=a.accAdd(h,-i))this.minorTickData.push(l?a.int2date(h):h);else for(var h=a.accAdd(s,i);o>h;h=a.accAdd(h,i))this.minorTickData.push(l?a.int2date(h):h)}var c=this.tickData[this.tickData.length-1].tickValue,d=this.scale.domain()[1],l=c instanceof Date&&d instanceof Date;if(c=l?a.date2int(c):c,d=l?a.date2int(d):d,d>c)for(var h=c+i;d>=h;h+=i)this.minorTickData.push(l?a.int2date(h):h)},_updateTickContent:function(){var t=this.componentOption,e=this.scale,i=e.rangeBand?e.rangeBand()/2:0;if(this.tickData.forEach(function(t){t.tickPos=e(t.tickValue),t.tickLabelPos=t.tickPos+i}),t.showLabel)if(t.step){var r=0;this.tickData.forEach(function(e){r++%t.step&&(e.tickContent="")})}else{var s=new n,o=this.isHorizontal(),l=1,h=1;this.tickData.forEach(function(t){var i=o?{x:e(t.tickValue),y:0}:{x:0,y:e(t.tickValue)},r=a.makeBounds(i,t.tickDim);s.isOverlapped(r)?(l++,h=Math.max(h,l)):(l=1,s.addBounds(r))});var r=0;this.tickData.forEach(function(t){r++%h&&(t.tickContent="")})}else this.tickData.forEach(function(t){t.tickContent=""})},_getStartIndex:function(){return a.pick(this.componentOption.startIndex,0)},_getEndIndex:function(){return a.pick(this.componentOption.endIndex,this.tickData.length-1)},_getOriginDet:function(){var t=this._getPlotOriginPoint(),e=this._getAxisOriginPoint();return{x:t.x-e.x,y:t.y-e.y}},_getPlotOriginPoint:function(){var t,e,a=this.vanchart.getPlotBounds(),r=this.componentOption.position;switch(r){case i.TOP:t=a.x,e=a.y;break;case i.BOTTOM:t=a.x,e=a.y+a.height;break;case i.LEFT:t=a.x,e=a.y;break;case i.RIGHT:t=a.x+a.width,e=a.y}return{x:t,y:e}},_getAxisOriginPoint:function(){var t,e,a=this.bounds,r=this.componentOption.position;switch(r){case i.TOP:t=a.x,e=a.y+a.height;break;case i.BOTTOM:t=a.x,e=a.y;break;case i.LEFT:t=a.x+a.width,e=a.y;break;case i.RIGHT:t=a.x,e=a.y}return{x:t,y:e}},getTickScale:function(){return this.scale},axisZoom:function(t,e){},_initZoomStatus:function(){},isAxisReversed:function(){return this.componentOption.reversed},isOnZero:function(){return this.componentOption.onZero},getLineWidth:function(){return this.componentOption.lineWidth},showArrow:function(){return this.componentOption.showArrow},getTitleLabelGap:function(){return h},getAxisIndex:function(){return this.componentOption.axisIndex},_calculateValueNiceDomain:function(t,e,r,n,s){var o=this.type==i.VALUE_AXIS_COMPONENT,l=this.componentOption;t=o?Math.min(0,t):t,t=a.hasDefined(r)?r:t,e=a.hasDefined(n)?n:e,t>=e&&(t=o?Math.min(0,e):e,e=t+u);var h=l.tickInterval||this._linearTickInterval(t,e),c=this._linearNiceDomain(t,e,h);t=a.hasDefined(r)?r:c[0],e=a.hasDefined(n)?n:c[1],t>=e&&(t=o?Math.min(0,e):e,e=t+u);var d=c[0];if(a.hasDefined(r)){for(var g;(g=a.accAdd(d,-h))>r;)d=g;for(;r>d;)d=a.accAdd(d,h)}for(this.valueList=[];e>=d;d=a.accAdd(d,h))this.valueList.push(d);return this.lastScale=this.scale&&this.scale.copy(),this.scale=this.scale?this.scale.domain([t,e]):d3.scale.linear().domain([t,e]),{minValue:t,maxValue:e}},_linearTickInterval:function(t,e,i){i=i||this._getDefaultTickCount();var a=e-t,r=Math.pow(10,Math.floor(Math.log(a/i)/Math.LN10)),n=i/a*r;return.15>=n?r*=10:.35>=n?r*=5:.75>=n&&(r*=2),r},_linearNiceDomain:function(t,e,i){return t=a.accMul(Math.floor(t/i),i),e=a.accMul(Math.ceil(e/i),i),[t,e]},_getDefaultTickCount:function(){return this.option.chartType==i.RADAR_CHART?d:c},_isSeriesVisible:function(t){var e=[t,this.option.plotOptions[t.type],this.option.plotOptions];return a.pick(r.queryList(e,"visible"),!0)},getRender:function(){var t=this.option.chartType;return t===i.GAUGE_CHART||this.option.plotOptions.force?null:this.render},getPolarInitPoint:function(){return a.getArcPoint(this.polar.radius,0)},getRadiusPlotBands:function(){var t=this._getPlotBands(),e=[],i=this;return t.forEach(function(t){e.push({path:i._getRadiusPlotBandsPath(t.from,t.to),color:t.color})}),e},_getRadiusPlotBandsPath:function(t,e){var a=this.option.plotOptions.shape||i.CIRCLE_RADAR;if(a===i.POLYGON_RADAR)return this._getRadiusGridPath(Math.min(t,e))+this._getRadiusGridPath(Math.max(t,e),!0);var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI);return r.innerRadius(this.scale(Math.min(t,e))).outerRadius(this.scale(Math.max(t,e)))()},getPlotLines:function(){var t=this.componentOption.plotLines||[],e=this,a=[];return t.forEach(function(t){var r,n,s;t.label&&t.label.text&&t.label.style&&(r=t.label.text,n=t.label.style,s=t.label.align),a.push({color:t.color,value:t.value,width:t.width,dataArray:i.DASH_TYPE[t.dashStyle],text:r,baseY:-e.scale(t.value),textAnchor:s==i.LEFT?"end":"start",style:n})}),a},_getRadiusGridPath:function(t,e){var i=this._getRadiusGridData(t,e);return this._getRadiusGridPathByData(i)},_getRadiusGridData:function(t,e,r){var n=r||this.scale,s=this.polar.angleAxis,o=this.option.plotOptions.shape||i.CIRCLE_RADAR;if(o===i.POLYGON_RADAR){var l=[],h=s.scale,c=h.domain();return c.forEach(function(e){var i=h(e)*s.piece,r=n(t);l.push(a.getArcPoint(r,i))}),e&&l.reverse(),l}return n(t)},_getRadiusGridPathByData:function(t){if(a.isArray(t)){var e="";if(t.length){for(var i=0,r=t.length;r>i;i++){var n=i?"L":"M";e+=n+a.dealFloatPrecision(t[i][0])+","+a.dealFloatPrecision(t[i][1])}e+="Z"}return e}var s=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0);return s.outerRadius(t)()},getAngleAxisLineData:function(){var t=[],e=this.polar.angleAxis,i=e.scale.domain(),r=this;return i.forEach(function(i){var n=e.scale(i)*e.piece,s=r.polar.radius;t.push(a.getArcPoint(s,n))}),t=t.length?t:[a.getArcPoint(this.polar.radius,0)]},_testRadius:function(t,e){for(var i=0,r=this.tickData.length;r>i;i++){var n=this.tickData[i],s=this._getCateLabelBounds(t,n);if(!a.containsRect(e,s))return!1}},_getCateLabelBounds:function(t,e){var i,r=e.tickValue,n=e.tickDim,s=this.scale.domain(),o=s.indexOf(r),l=a.getArcPoint(t+f,o*this.piece),h=this._getPolarPosition(r);switch(h){case p:i={x:-n.width/2,y:-t-.65*n.height-f};break;case _:i={x:l[0],y:l[1]-n.height/2};break;case m:i={x:-n.width/2,y:t+f};break;case v:i={x:l[0]-n.width,y:l[1]-n.height/2}}return e.tickPos=i,a.makeBounds(i,n)},_getPolarPosition:function(t){var e=this.scale.domain(),i=e.indexOf(t),a=e.length/2;return 0==i?p:i>0&&a>i?_:i==a?m:i>a?v:void 0},_findNiceRadius:function(t){var e=[-t.y,t.width-t.x,t.height+t.y,-t.x],i=Math.min.apply(null,e),a=this.scale.domain(),r=this;return this.tickData.forEach(function(t){if(t.tickContent){var n,s=t.tickValue,o=t.tickDim,l=a.indexOf(s),h=r._getPolarPosition(s);switch(h){case p:n=e[0]-o.height;break;case _:n=(e[1]-o.width)/Math.abs(Math.sin(l*r.piece));break;case m:n=e[2]-o.height;break;case v:n=(e[3]-o.width)/Math.abs(Math.sin(l*r.piece))}i=Math.min(i,n)}}),i-f}},a.inherit(e,s),e}),i("component/CategoryAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,a,r){i.call(this,t,e,r),
this.isRangePoints=!1,this.piece=null,this.refresh(e,a)}var i=(t("./Base"),t("./BaseAxis")),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,type:r.CATEGORY_AXIS_COMPONENT,initAttributesWithSeries:function(){var t=this.componentOption,e=this.vanchart.series,i={},n=this.isBaseAxis,s=t.categories||[];s.forEach(function(t){i[t]=!0});for(var o=!1,l=!1,h=0,c=e.length;c>h;h++){var d=e[h],u=d[this.componentType];u==this&&(d.points.forEach(function(t){var e=n?t.category:t.value;a.hasDefined(e)&&!i[e]&&(s.push(e),i[e]=!0)}),d.type==r.AREA_CHART?o=!0:(d.type==r.BAR_CHART||d.type==r.COLUMN_CHART)&&(l=!0))}switch(this.isRangePoints=!l&&o,this.categories=s,this.scale=d3.scale.ordinal().domain(this.categories),this.componentType){case r.ANGLE_AXIS_COMPONENT:this.isRangePoints=!0,this.piece=2*Math.PI/Math.max(s.length,1)}this._updateOriginTickData()},updateCategories:function(t){this.categories=t,this.scale.domain(t),this._updateOriginTickData()},_updateIndex:function(t,e){this.componentOption.startIndex=t,this.componentOption.endIndex=e},getCategoryCount:function(){return this.categories.length},indexOfLabel:function(t){return a.indexInArray(this.categories,t)},getTickLength:function(){var t=this.scale.domain(),e=this.scale.rangeExtent(),i=Math.abs(e[1]-e[0]);return this.isRangePoints&&t.length<=1?i:this.isRangePoints?i/(t.length-1):this.scale.rangeBand()},_updateRange:function(){this.updateAxisScale(this._getStartIndex(),this._getEndIndex())},getValueFromData:function(t,e){var i=this.componentOption.categories,r=this.isBaseAxis?0:1,n=this.isBaseAxis?"x":"y",s=a.isArray(t)?t[r]:t[n];return a.hasDefined(s)?s:i[e]},_getTickValues:function(){return this.scale.domain()},getCategories:function(){return this.scale.domain()},axisZoom:function(t,e){var i,r,n=this.vanchart.getPlotBounds();this.isHorizontal()?(i=Math.min(t[0],e[0])-n.x,r=Math.max(t[0],e[0])-n.x):(i=Math.min(t[1],e[1])-n.y,r=Math.max(t[1],e[1])-n.y);var s=this.scale.domain(),o=this.scale.rangeExtent();o=this._getRangeWithMinMax(o[0],o[1]);var l=d3.scale.quantize().domain(o).range(s),h=a.indexInArray(this.categories,l(i)),c=a.indexInArray(this.categories,l(r));this.updateAxisScale(Math.min(h,c),Math.max(h,c))},updateAxisScale:function(t,e){var i=this.scale.domain();if(-1!=t&&-1!=e){var a;if(this.componentType===r.ANGLE_AXIS_COMPONENT)a=[0,this.categories.length-1];else{for(var n=[],s=t;e>=s;s++)n.push(i[s]);this._updateIndex(t,e);var o,l=this._getRange();o=this.isRangePoints?Math.abs(l[0]-l[1])/Math.max(n.length-1,1):Math.abs(l[0]-l[1])/n.length;var h=Math.min(l[0],l[1]),c=Math.max(l[0],l[1]),d=t,u=e;if(this.isAxisReversed()){var g=this.categories.length-1;d=Math.min(g-t,g-e),u=Math.max(g-t,g-e)}this.isHorizontal()?(h-=d*o,c+=(this.categories.length-u-1)*o):(h-=(this.categories.length-u-1)*o,c+=d*o),a=this._getRangeWithMinMax(h,c)}this.isRangePoints?this.scale.rangePoints(a):this.scale.rangeBands(a),this._updateOriginTickData(),this._calculateTickData()}},_getRangeWithMinMax:function(t,e){var i=this.componentOption;return this.isHorizontal()?i.reversed?[e,t]:[t,e]:i.reversed?[t,e]:[e,t]},_initZoomStatus:function(){var t=this.vanchart.getComponent(r.ZOOM_COMPONENT);if(t&&t.zoomToolEnabled()&&a.isSupportSVG())if(this.vanchart.isInitOrRestoreState()){var e=0,i=this.categories.length-1,n=t.componentOption.zoomTool;n.from&&-1!=a.indexInArray(this.categories,n.from)&&(e=a.indexInArray(this.categories,n.from)),n.to&&-1!=a.indexInArray(this.categories,n.to)&&(i=a.indexInArray(this.categories,n.to)),this.updateAxisScale(Math.min(e,i),Math.max(e,i))}else this.updateAxisScale(this._getStartIndex(),this._getEndIndex())}},a.inherit(e,i),t("../ComponentLibrary").register(r.CATEGORY_AXIS_COMPONENT,e),e}),i("component/ValueAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../utils/QueryUtils","../Constants","../Constants","../ComponentLibrary"],function(t){function e(t,e,a,r){i.call(this,t,e,r),this.originalDomain=null,this.refresh(e,a)}var i=(t("./Base"),t("./BaseAxis")),a=t("../utils/BaseUtils"),r=(t("../utils/QueryUtils"),t("../Constants")),r=t("../Constants");return e.prototype={constructor:e,type:r.VALUE_AXIS_COMPONENT,initAttributesWithSeries:function(){this._hasInited=!0;var t=this.vanchart.series;this.byPercent=!1;for(var e=0,i=t.length;i>e&&!this.byPercent;e++){var a=t[e],r=a[this.componentType];r==this&&a.visible&&(this.byPercent=a.stackByPercent&&!this.isBaseAxis)}var n=this._calculateMinMaxValue(),s=this.componentOption;this.originalDomain=this._calculateNiceDomain(n.minValue,n.maxValue,s.min,s.max),this._updateOriginTickData()},_updateDomainWhenSizeFixed:function(){var t=this.getMaxBubbleRadius();if(t&&this.type==r.VALUE_AXIS_COMPONENT&&this._hasInited){this._hasInited=!1;var e=this.scale,i=e.domain(),a=e.range(),n=this._calculateMinMaxValue(),s=Math.abs(t*(i[0]-i[1])/(a[1]-a[0])),o=n.minValue-s,l=n.maxValue+s,h=this.componentOption;this.originalDomain=this._calculateNiceDomain(o,l,h.min,h.max),this._updateOriginTickData()}},_calculateNiceDomain:function(t,e,i,a,r){var n=this.componentOption;return n.log&&1!=n.log?this._calculateLogNiceDomain(t,e):this.byPercent?this._calculatePercentValueDomain():this._calculateValueNiceDomain(t,e,i,a,r)},_calculateLogNiceDomain:function(t,e,i){var r=this.componentOption,n=r.log,s=parseInt(a.pick(r.tickInterval,1));this.valueList=[],t=t>=1?1:t,t=0>=t?1:t,t=i?t:a.pick(r.min,t),e=i?e:a.pick(r.max,e),t=Math.pow(n,Math.floor(a.log(n,t))),e=Math.pow(n,Math.ceil(a.log(n,e))),this.scale=this.scale?this.scale.domain([t,e]):d3.scale.log().base(n).domain([t,e]);for(var o=0;t*Math.pow(n,o)<=e;)this.valueList.push(t*Math.pow(n,o)),o+=s;return{minValue:t,maxValue:e}},_calculatePercentValueDomain:function(){var t=this.componentOption,e=a.pick(t.min,0),i=a.pick(t.max,1),r=a.pick(t.tickInterval,.25);this.valueList=[];for(var n=e;i>=n;n=a.accAdd(n,r))this.valueList.push(n);return this.scale=this.scale?this.scale.domain([e,i]):d3.scale.linear().domain([e,i]),{minValue:e,maxValue:i}},_calculateMinMaxValue:function(){for(var t=Number.MAX_VALUE,e=-t,i=!0,a=this.vanchart.series,r={},n=0,s=a.length;s>n;n++){var o=a[n],l=o[this.componentType];l==this&&o.visible&&this._getSeriesValue(r,o)}for(var h in r)for(var c=r[h],d=0,u=c.length;u>d;d++)isNaN(c[d])||(t=Math.min(t,c[d]),e=Math.max(e,c[d]),i=!1);return i&&(t=0,e=100),{minValue:t,maxValue:e}},_getSeriesValue:function(t,e){var i=e.name||"",r=this.isBaseAxis;if(a.hasNotDefined(e.stack)||r)t[i]=t[i]||[],e.points.forEach(function(e){t[i].push(r?e.category:e.value)});else{var n=e.stack+"STACK_POSITIVE",s=e.stack+"STACK_NEGATIVE";t[n]=t[n]||[],t[s]=t[s]||[],e.points.forEach(function(e,i){var a=r?e.category:e.value;a>0?null!=t[n][i]&&void 0!=t[n][i]?t[n][i]+=a:t[n][i]=a:null!=t[s][i]&&void 0!=t[s][i]?t[s][i]+=a:t[s][i]=a})}},getValueFromData:function(t){var e=this.componentType==r.X_AXIS_COMPONENT?0:1,i=this.componentType==r.X_AXIS_COMPONENT?"x":"y",n=a.isArray(t)?t[e]:t[i];return n=a.pick(n,t),n=+n,isNaN(n)?"-":n},getStartPos:function(){return this.scale(this.getStartPosValue())},getStartPosValue:function(){var t=this.componentOption;return t.log&&1!=t.log?1:0},getOriginalDomain:function(){return this.originalDomain},_getTickValues:function(){return this.valueList},_getTickValuesWithEndValue:function(){var t=a.clone(this.valueList),e=this.scale.domain()[1];return t.length&&t[t.length-1]<e&&t.push(e),t},axisZoom:function(t,e){var i,a,r=this.vanchart.getPlotBounds();this.isHorizontal()?(i=Math.min(t[0],e[0])-r.x,a=Math.max(t[0],e[0])-r.x,i=Math.max(i,0),a=Math.min(a,r.width)):(i=Math.min(t[1],e[1])-r.y,a=Math.max(t[1],e[1])-r.y,i=Math.max(i,0),a=Math.min(a,r.height));var n=this.scale.invert(i),s=this.scale.invert(a);this.updateAxisScale(Math.min(n,s),Math.max(n,s),!0)},updateAxisScale:function(t,e,i){var a=this.componentOption;this._calculateNiceDomain(t,e,this.isBaseAxis?t:a.min,this.isBaseAxis?e:a.max,i&&this.isBaseAxis),this._updateOriginTickData(),this._calculateTickData()},_initZoomStatus:function(){var t=this.vanchart.getComponent(r.ZOOM_COMPONENT);if(t&&t.zoomToolEnabled()&&a.isSupportSVG()&&this.isBaseAxis&&this.vanchart.isInitOrRestoreState()){var e=t.getRevisedDomain(),i=this.scale.domain(),n=i[0],s=i[1];e.from&&(n=parseFloat(e.from)),e.to&&(s=parseFloat(e.to)),this.updateAxisScale(n,s)}}},a.inherit(e,i),t("../ComponentLibrary").register(r.VALUE_AXIS_COMPONENT,e),e}),i("component/DateAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../utils/Formatter","../ComponentLibrary"],function(t){function e(t,e,a,r){i.call(this,t,e,r),this.refresh(e,a)}var i=(t("./Base"),t("./BaseAxis")),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/Formatter"),s=864e5,o=31*s;return e.prototype={constructor:e,type:r.DATE_AXIS_COMPONENT,initAttributesWithSeries:function(){this.scale=d3.time.scale();var t=this._calculateMinMaxValue(),e=t.minValue,i=t.maxValue,r=this.componentOption,n=this._calculateValueNiceDomain(e,i,r.min,r.max);e=a.int2date(n.minValue),i=a.int2date(n.maxValue),this.originalDomain={minValue:e,maxValue:i},this.scale=this.scale?this.scale.domain([e,i]):d3.time.scale().domain([e,i]),this._calculateDateFormat(),this._updateOriginTickData()},getOriginalDomain:function(){return this.originalDomain},_calculateDateFormat:function(){var t=this._getTickInterval(),e="Dyyyy-MM-dd";e=s>t?"Dyyyy-M-d H:mm":o>t?"Dyyyy-M-d":"Dyyyy-MM",this.dateFormat=e},_getTickContent:function(t,e){if(!e||"function(){return arguments[0]}"==e){var i=this.dateFormat;e=function(){return window.FR?FR.contentFormat(arguments[0],i):arguments[0]}}return n.format(t,e)},_getTickValues:function(){var t=[];return this.valueList.forEach(function(e){t.push(a.int2date(e))}),t},_calculateMinMaxValue:function(){for(var t=Math.ceil(Number.MAX_VALUE),e=-t,i=this.componentOption,r=this.option.series,n=!1,s=0,o=r.length;o>s;s++){var l=r[s],h=l[this.componentType]||0;if(h==i.axisIndex&&this._isSeriesVisible(l))for(var c=l.data,s=0,o=c.length;o>s;s++){var d=this.getValueFromData(c[s]);d.getTime&&(n=!0,d=a.date2int(d),t=Math.min(t,d),e=Math.max(e,d))}}return n||(t=e=(new Date).getTime()),e=t>=e?t+1e3:e,{minValue:t,maxValue:e}},getValueFromData:function(t){var e=this.componentType==r.X_AXIS_COMPONENT?0:1,i=this.componentType==r.X_AXIS_COMPONENT?"x":"y",n=a.isArray(t)?t[e]:t[i];return a.object2date(n)},axisZoom:function(t,e){var i,r,n=this.vanchart.getPlotBounds();this.isHorizontal()?(i=Math.min(t[0],e[0])-n.x,r=Math.max(t[0],e[0])-n.x):(i=Math.min(t[1],e[1])-n.y,r=Math.max(t[1],e[1])-n.y);var s=this.scale.invert(i),o=this.scale.invert(r);s=a.date2int(s),o=a.date2int(o);var l=Math.min(s,o),h=Math.max(s,o);this._updateDomain(l,h,!0)},_updateDomain:function(t,e,i){var r=this._calculateValueNiceDomain(t,e,t,e,i),n=a.int2date(r.minValue),s=a.int2date(r.maxValue);this.scale=this.scale?this.scale.domain([n,s]):d3.time.scale().domain([n,s]),this._calculateDateFormat(),this._updateOriginTickData()},updateAxisScale:function(t,e,i){t=a.date2int(t),e=a.date2int(e),this._updateDomain(t,e,i)},_initZoomStatus:function(){var t=this.vanchart.getComponent(r.ZOOM_COMPONENT);if(t&&t.zoomToolEnabled()&&a.isSupportSVG()&&this.isBaseAxis&&this.vanchart.isInitOrRestoreState()){var e=t.getRevisedDomain(),i=this.scale.domain(),n=a.date2int(i[0]),s=a.date2int(i[1]);e.from&&(n=a.object2date(e.from),n=a.date2int(n)),e.to&&(s=a.object2date(e.to),s=a.date2int(s)),this._updateDomain(n,s)}}},a.inherit(e,i),t("../ComponentLibrary").register(r.DATE_AXIS_COMPONENT,e),e}),i("component/Polar",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","../utils/Formatter","../utils/BoundsManager","./Base","../utils/BezierEasing","../ComponentLibrary"],function(t){function e(t,e,i,a){r.call(this,t,e,a),this.radius=null,this.center=[null,null],this.radiusAxis=null,this.angleAxis=null,this.refresh(e,i)}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=(t("../utils/QueryUtils"),t("../utils/Formatter"),t("../utils/BoundsManager"),t("./Base"));t("../utils/BezierEasing");return e.prototype={constructor:e,doLayout:function(){var t=this.componentOption,e=t.radius,i=t.center;if(!i||0===i.length){var a=this.vanchart.getPlotBounds();i=[a.width/2+a.x,a.height/2+a.y]}this.setRadius(e),this.setCenter(i)},setRadius:function(t){t&&(this.radius=this._numPctHelper(t,Math.min(this.vanchart.chartWidth(),this.vanchart.chartHeight())/2),this.radiusAxis&&this.radiusAxis._updateRange())},setCenter:function(t){t&&(this.center[0]=this._numPctHelper(t[0],this.vanchart.chartWidth()),this.center[1]=this._numPctHelper(t[1],this.vanchart.chartHeight()))},_numPctHelper:function(t,e){return t&&e?isNaN(t)?"string"==typeof t&&-1!=t.indexOf("%")?this._getPercentValue(t,e):null:t:null}},a.inherit(e,r),t("../ComponentLibrary").register(i.POLAR_COMPONENT,e),e}),i("utils/LabelDivManager",["require","./BaseUtils","./ColorUtils","./BezierEasing"],function(t){function e(t){this.dom=t,this.labelList={}}var i=t("./BaseUtils"),a=t("./ColorUtils"),r=t("./BezierEasing"),n="div-label-key";return e.prototype={constructor:e,addLabel:function(t,e,r,s,o,l){"undefined"==typeof o&&(o=!1),"undefined"==typeof l&&(l=!0),s=s||n,this.labelList[s]||(this.labelList[s]=[]);var h=this.labelList[s],c=document.createElement("div");l?c.innerHTML=t:c.textContent?c.textContent=t:c.innerText=t,c.style.position="absolute",c.style.left=e.x+"px",c.style.top=e.y+"px",c.style.overflow="hidden",o?(c.style.whiteSpace="normal",c.style.wordWrap="break-word"):c.style.whiteSpace="nowrap",i.hasDefined(e.width)&&i.hasDefined(e.height)&&(c.style.width=e.width+"px",c.style.height=e.height+"px");for(var d in r)"color"!=d||i.isSupportSVG()?c.style[d]=r[d]:c.style.color=a.colorToHex(r.color);return this.dom.appendChild(c),h.push(c),c},addLabelWidthBounds:function(t,e,i,a,r,n){var s=this.addLabel(t,e,i,a,r,n);return s.style.width=e.width+"px",s.style.height=e.height+"px",s},clearLabels:function(t){t=t||n;for(var e=this.labelList[t]||[],i=0,a=e.length;a>i;i++)this.dom.removeChild(e[i]);this.labelList[t]=[]},clearAllLabels:function(){for(var t in this.labelList)this.clearLabels(t)},translateLabelsHorizontal:function(t,e){e=e||n;for(var a=this.labelList[e]||[],s=0,o=a.length;o>s;s++){var l=a[s],h=parseFloat(l.style.left);h+=t,i.isSupportSVG()?d3.select(l).transition().ease(r.css.swing).duration(300).style("left",h+"px"):l.style.left=h+"px"}},changeLabelDim:function(t,e){if(t){e=e||n;var a=this.labelList[e]||[];a.map(function(e){var a={};for(var n in t){var s=parseFloat(e.style[n]);a[n]=s+t[n]+"px"}if(i.isSupportSVG())d3.select(e).transition().ease(r.css.swing).duration(300).style(a);else for(var n in a)e.style[n]=a[n]})}},setLabelOpacity:function(t,e){for(var i=this.labelList[t]||[],a=0,r=i.length;r>a;a++){var n=i[a];n.style.opacity=e}}},e}),i("render/CanvasRender",["require","../utils/BaseUtils","../Constants"],function(t){function e(t,e){this._init(t,e)}var i=(t("../utils/BaseUtils"),t("../Constants"));return e.prototype={constructor:e,_init:function(t,e){var i=e.getPlotBounds();this.width=i.width,this.height=i.height,this.dom=this._createCanvas(t,i),this.ctx=this.dom.getContext("2d")},_createCanvas:function(t,e){var i=document.createElement("canvas"),a=e.width,r=e.height;return i.style.position="absolute",i.style.left=e.x+"px",i.style.top=e.y+"px",i.style.width=a+"px",i.style.height=r+"px",i.width=a,i.height=r,i.onselectstart=function(){return!1},i.style["-webkit-user-select"]="none",i.style["user-select"]="none",i.style["-webkit-touch-callout"]="none",t.appendChild(i),window.vmlCanvasManager&&vmlCanvasManager.initElement(i),i},clearAll:function(){this.ctx.clearRect(0,0,this.width,this.height)},addBubbleSeries:function(t){var e=this.ctx;e.save();for(var i=0,a=t.points.length;a>i;i++){var r=t.points[i];r.visible&&(e.fillStyle=r.color,e.globalAlpha=r.fillColorOpacity,e.beginPath(),e.arc(r.posX,r.posY,r.radius,0,2*Math.PI),e.fill())}e.restore()},addScatterSeries:function(t){var e=this.ctx;e.save();for(var i=0,a=t.points.length;a>i;i++){var r=t.points[i];if(r.visible){var n=r.marker.symbol,s=r.marker.radius||4.5,o=r.marker.fillColor||r.color;e.translate(r.posX,r.posY),e.fillStyle=o,e.strokeStyle=o,e.globalAlpha=r.fillColorOpacity,this._drawMarker(e,n,s),e.translate(-r.posX,-r.posY)}}e.restore()},addSeries:function(t){t.chart.componentType==i.SCATTER_CHART?this.addScatterSeries(t):this.addBubbleSeries(t)},_drawMarker:function(t,e,a){-1!=e.indexOf(i.CIRCLE)?(t.beginPath(),t.arc(0,0,a,0,2*Math.PI)):-1!=e.indexOf(i.SQUARE)?(t.beginPath(),t.moveTo(-a,-a),t.lineTo(a,-a),t.lineTo(a,a),t.lineTo(-a,a),t.closePath()):-1!=e.indexOf(i.DIAMOND)?(a=2*a/Math.sqrt(2),t.beginPath(),t.moveTo(-a,0),t.lineTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.closePath()):-1!=e.indexOf(i.TRIANGLE)?(t.beginPath(),t.moveTo(-a,a/Math.sqrt(3)),t.lineTo(0,-(2*Math.sqrt(3)/3)*a),t.lineTo(a,a/Math.sqrt(3)),t.closePath()):(t.beginPath(),t.arc(0,0,a,0,2*Math.PI)),-1==e.indexOf("hollow")?t.fill():(t.fillStyle="white",t.lineWidth=2,t.fill(),t.stroke())}},e}),i("render/BaseRender",["require","../utils/BaseUtils","../utils/LabelDivManager","../utils/ColorUtils","../Constants","./CanvasRender"],function(t){function e(t){this.component=t,t&&t.getParentDom&&(this.labelDivManager=new a(t.getParentDom())),this.drawLabelTimeOut={}}var i=t("../utils/BaseUtils"),a=t("../utils/LabelDivManager"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=t("./CanvasRender"),o="markerG",l="markerPath",h="markerStrokePath",c=2;return e.prototype={constructor:e,render:function(){},_createHorizontalLinearGradient:function(t,e,i,a){this._createLinearGradient(t,e,i,a,!0)},_createVerticalLinearGradient:function(t,e,i,a){this._createLinearGradient(t,e,i,a,!1)},_createLinearGradient:function(t,e,i,a,r){var n="0%",s="0%";r?n="100%":s="100%";var o=t.append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2",n).attr("y2",s).attr("id",e);o.append("stop").attr("offset","0%").style("stop-color",i),o.append("stop").attr("offset","100%").style("stop-color",a)},_createDropShadowFilter:function(t,e,i,a,r,n){var s=t.append("filter").attr("id",e).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");s.append("feOffset").attr("in","SourceAlpha").attr("dx",i).attr("dy",a).attr("result","offOut"),s.append("feColorMatrix").attr("in","offOut").attr("type","matrix").attr("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+r+" 0").attr("result","matrixOut"),s.append("feGaussianBlur").attr("in","matrixOut").attr("stdDeviation",n).attr("result","blurOut"),s.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")},_createInnerShadowFilter:function(t,e,i,a,r,n){var s=t.append("filter").attr("id",e).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");s.append("feComponentTransfer").attr("in","SourceAlpha").append("feFuncA").attr("type","table").attr("tableValues","1 0"),s.append("feGaussianBlur").attr("stdDeviation",n),s.append("feOffset").attr("dx",i).attr("dy",a).attr("result","offsetblur"),s.append("feFlood").attr("flood-color","black").attr("flood-opacity",r).attr("result","color"),s.append("feComposite").attr("in2","offsetblur").attr("operator","in"),s.append("feComposite").attr("in2","SourceAlpha").attr("operator","in");var o=s.append("feMerge");o.append("feMergeNode").attr("in","SourceGraphic"),o.append("feMergeNode")},_createVmlMarker:function(t,e,a){var s=this.component.getPlotBounds(),o=this.component.getDefaultMarkerRadius(),l=e.marker.radius;if(i.hasDefined(l)&&c>l)return{};if(l=l||o,i.outsideRect(s,i.makeBounds(a,[l,l])))return{};var h=e.marker.symbol,d=h==n.NULL_MARKER,u=this.component._getBackgroundColor(),g=this._isHollowMarker(h)?l-1:l,f=r.getColorOpacityWithoutDefault(e.marker.fillColor);f=i.hasDefined(f)?f:e.fillColorOpacity;var p,m=t.path(this._getMarkerPath(h,g)).attr({fill:this._isHollowMarker(h)||d?u:e.marker.fillColor,"fill-opacity":d?0:f,stroke:e.marker.fillColor,"stroke-width":this._isHollowMarker(h)?2:0}).transform(i.makeTranslate(a));return this.component.type==n.LINE_CHART&&(p=t.path(this._getMarkerPath(h,l+1)).attr({"stroke-width":d?0:2,stroke:u,fill:"none"}).transform(i.makeTranslate(a))),m.node._data_=e,this.addShapeEventHandler(m),{marker:m,strokeMarker:p}},_getMarkerGroupClass:function(t){return t.className+" "+o},_createSvgMarker:function(t){var e=this,a=this.component.getDefaultMarkerRadius(),r=this.component._getBackgroundColor();t.enter().append("g").attr("class",function(t){return e._getMarkerGroupClass(t)}).filter(function(t){var e=t.marker.radius;return t.visible&&(i.hasNotDefined(e)||e>=c)}).each(function(t){if(!t.isNull){var s=d3.select(this),o=t.marker.symbol,c=o==n.NULL_MARKER;i.isImageMarker(o)?e._createImageMarker(o,function(e,i){var e=t.marker.width||e,i=t.marker.height||i;t.marker.width=e,t.marker.height=i,s.append("image").attr("preserveAspectRatio","none").attr("xlink:href",o).attr("x",-e/2).attr("y",-i/2).attr("width",e).attr("height",i)}):(s.append("path").attr("class",l).attr("d",function(t){var i=t.marker.radius||a;return e._isHollowMarker(o)&&(i-=1),e._getMarkerPath(o,i)}).style("fill",function(t){return e._isHollowMarker(o)?r:t.marker.fillColor}).style("fill-opacity",c?0:function(t){return t.fillColorOpacity}).style("stroke",function(t){return t.marker.fillColor}).style("stroke-width",function(){return e._isHollowMarker(o)?2:0}),e.component.type==n.LINE_CHART&&s.append("path").attr("class",h).attr("d",function(t){var i=t.marker.radius||a;return e._getMarkerPath(o,i+1)}).style("stroke-width",c?0:2).style("stroke",r).style("fill","none")),e.addShapeEventHandler(s)}})},_createImageMarker:function(t,e){var i=new Image;i.onload=function(){e(this.width,this.height)},i.src=t},_getMarkerClass:function(){return o},_makeVmlMarkerChosenState:function(t){var e=t.marker.symbol,i=t.marker.radius||this.component.getDefaultMarkerRadius(),a=this._isHollowMarker(e)?i-1:i,r=this.component._getBackgroundColor(),n=this.getElementByData(t);if(n&&n.marker){var s=n.marker,o=n.strokeMarker;s.attr({path:this._getMarkerPath(e,a+2),fill:this._isHollowMarker(e)?r:t.marker.fillColor,"fill-opacity":1}),o&&o.attr({path:this._getMarkerPath(e,i+3)})}},_cancelVmlMarkerChosenState:function(t){var e=t.marker.symbol,i=e==n.NULL_MARKER,a=t.marker.radius||this.component.getDefaultMarkerRadius(),r=this._isHollowMarker(e)?a-1:a,s=this.component._getBackgroundColor(),o=this.getElementByData(t);if(o&&o.marker){var l=o.marker,h=o.strokeMarker;l.attr({path:this._getMarkerPath(e,r),fill:this._isHollowMarker(e)||i?s:t.marker.fillColor,"fill-opacity":i?0:1}),h&&h.attr({path:this._getMarkerPath(e,a+1),"stroke-width":i?0:2})}},_makeMarkerClickedState:function(t,e){var i=t.select("g."+e.className),a=this.component._getBackgroundColor(),n=e.marker.fillColor;a=r.getClickColor(a),n=r.getClickColor(n);var s=e.marker.symbol;i.select("path."+l).style("fill",this._isHollowMarker(s)?a:n).style("stroke",n),i.select("path."+h).style("stroke",a)},_cancelMarkerClickedState:function(t,e){var i=t.select("g."+e.className),a=this.component._getBackgroundColor(),r=e.marker.fillColor,n=e.marker.symbol;i.select("path."+l).style("fill",this._isHollowMarker(n)?a:r).style("stroke",r),i.select("path."+h).style("stroke",a)},_makeMarkerChosenState:function(t,e,a,s){a=a||2,s=s||0;var o=e.marker.symbol,c=e.marker.radius||this.component.getDefaultMarkerRadius(),d=o==n.NULL_MARKER,u=c,g=r.getHighLightColor(this.component._getBackgroundColor()),f=r.getHighLightColor(e.marker.fillColor),p=this;this._isHollowMarker(o)&&(u-=1);var m=t.select("g."+e.className);if(m){m.select("path."+l).style("fill",this._isHollowMarker(o)?g:f).style("fill-opacity",d?1:i.pick(e.fillColorOpacity,1)).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION).duration(s).ease("ease-out-expo").attr("d",p._getMarkerPath(o,d?u:u+a)),m.select("path."+h).attr("d",p._getMarkerPath(o,d?c:c+3)).style("stroke-width",2);var v=m.select("image");if(!v.empty()){var _=e.marker.width+4,y=e.marker.height+4;v.attr("x",-_/2).attr("y",-y/2).attr("width",_).attr("height",y)}}},_cancelMarkerChosenState:function(t,e){var a=this.component._getBackgroundColor(),r=e.marker.symbol,s=r==n.NULL_MARKER,o=e.marker.radius||this.component.getDefaultMarkerRadius(),c=this,d=o;this._isHollowMarker(r)&&(d-=1);var u=t.select("g."+e.className);if(u){u.select("path."+l).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION),u.select("path."+l).attr("d",c._getMarkerPath(r,d)).style("fill",c._isHollowMarker(r)?a:e.marker.fillColor).style("fill-opacity",s?0:i.pick(e.fillColorOpacity,1)),u.select("path."+h).attr("d",function(){return c._getMarkerPath(r,o+1)}).style("stroke-width",s?0:2);var g=u.select("image");if(!g.empty()){var f=e.marker.width,p=e.marker.height;g.interrupt().attr("x",-f/2).attr("y",-p/2).attr("width",f).attr("height",p)}}},_renderDivLabels:function(t,e,a,r){for(var s=this.component.getPlotBounds(),o=(this.component.componentType==n.PIE_CHART,0),l=t.length;l>o;o++){var h=t[o];if(h.visible&&h.dataLabels&&h.dataLabels.enabled&&h.dataLabels.useHtml&&h.labelPos&&h.labelContent.length)for(var c=h.labelPos.x+e,d=h.labelPos.y+a,u=h.labelContent,g=0,f=u.length;f>g;g++){var p=u[g],m=p.dim,v={x:c,y:d};if(!i.outsideRect(s,i.makeBounds(v,m))){this.labelDivManager.addLabel(p.text,i.makeBounds(v,m),p.style,r)}d+=m.height+this.component.getLabelGap()}}},_removeSvgDataLabels:function(t,e){t.selectAll("text").remove(),t.selectAll("path").remove(),this.labelDivManager.clearLabels(e)},_updateChartBodyTranslate:function(t,e,i){var a=this.component.getPlotBounds(),r=this.component.vanchart.getBodyClipID();t.forEach(function(t){t.attr("clip-path","url(#"+r+")").transition().duration(e?i:0).ease("back-out").attr("transform","translate("+a.x+","+a.y+")")})},_drawNormalChartLabels:function(t,e){var a=this.component.getVisibleChartData(),r=this.component.getPlotBounds(),n=[];a.forEach(function(t){n=n.concat(t.points)});var s=[],o=i.makeBounds(0,0,r.width,r.height);n.forEach(function(t){if(t.labelPos&&t.labelDim){var e=t.labelPos.x+t.labelDim.width/2,a=t.labelPos.y+t.labelDim.height/2;i.containsPoint(o,[e,a])&&s.push(t)}}),this._drawSvgDataLabels(t,s,r.x,r.y,e)},_drawSvgDataLabels:function(t,e,a,r,s,o){s=s||0,o=o||"default-label-key",clearTimeout(this.drawLabelTimeOut[o]);var l=this;this._removeSvgDataLabels(t,o),this.drawLabelTimeOut[o]=setTimeout(function(){t.style("opacity",0).selectAll("text").data(e).enter().append("text").filter(function(t){return t.visible&&t.labelPos&&t.dataLabels&&t.dataLabels.enabled&&!t.dataLabels.useHtml}).each(function(t){for(var e=t.labelContent,a=t.labelPos.x+t.labelDim.width/2,r=t.labelPos.y,n=0,s=e.length;s>n;n++){var o=e[n],h=o.dim,c=o.text,d=o.style;d3.select(this).append("tspan").attr("x",a).attr("y",r+h.height/2).attr("dy",".32em").attr("text-anchor","middle").text(c).call(i.setTextStyle,d),r+=h.height+l.component.getLabelGap()}}),t.transition("linear").duration(400).style("opacity",1),l._renderDivLabels(e,a,r,o),(l.component.componentType==n.PIE_CHART||l.component.componentType==n.BUBBLE_CHART)&&(l.addShapeEventHandler(t.selectAll("text").filter(function(t){return t.dataLabels&&t.dataLabels.align!=n.OUTSIDE})),t.selectAll("path").data(e).enter().append("path").filter(function(t){return t.visible&&t.labelPos&&t.dataLabels&&t.dataLabels.enabled&&t.dataLabels.align==n.OUTSIDE}).attr("d",function(t){var e=t.labelPos.startPos,i=t.labelPos.midPos,a=t.labelPos.endPos;return"M"+e.x+","+e.y+"L"+i.x+","+i.y+"L"+a.x+","+a.y}).style("fill","none").style("stroke",function(t){return t.dataLabels.connectorColor||t.color}).style("stroke-width",function(t){return t.dataLabels.connectorWidth||0}))},s)},_createSingleDataLabel:function(t,e){this._createSingleSvgDataLabel(t,e),this._createSingleDivDataLabel(t)},_createSingleSvgDataLabel:function(t,e){if(t.visible&&t.labelPos&&t.dataLabels&&t.dataLabels.enabled&&!t.dataLabels.useHtml)for(var a=t.labelContent,r=t.labelPos.x+t.labelDim.width/2,n=t.labelPos.y,s=0,o=a.length;o>s;s++){var l=a[s],h=l.dim,c=l.text,d=l.style;e.append("tspan").attr("x",r).attr("y",n+h.height/2).attr("dy",".32em").attr("text-anchor","middle").text(c).call(i.setTextStyle,d),n+=h.height+this.component.getLabelGap()}},_createSingleDivDataLabel:function(t){var e=this.component.getPlotBounds();if(t.visible&&t.dataLabels&&t.dataLabels.enabled&&t.dataLabels.useHtml&&t.labelPos&&t.labelContent.length)for(var a=t.labelPos.x+e.x,r=t.labelPos.y+e.y,n=t.labelContent,s=0,o=n.length;o>s;s++){var l=n[s],h=l.dim,c={x:a,y:r};if(!i.outsideRect(e,i.makeBounds(c,h))){this.labelDivManager.addLabel(l.text,i.makeBounds(c,h),l.style,t.className)}r+=h.height+this.component.getLabelGap()}},_drawTitleWithHtml:function(t,e,a){var r=i.clone(t.style),n=this.component.getPadding();r.textAlign=t.align||"left";var s={x:e.x+n,y:e.y+n,width:e.width-2*n-a,height:e.height-2*n};this.labelDivManager.addLabelWidthBounds(t.text,s,r,0,!1,!0)},_drawTitle:function(t,e){var a=i.clone(t.style);a.textAlign=t.align||"left",this.labelDivManager.addLabelWidthBounds(t.text,e,a,0,!0,t.useHtml)},_renderVmlBackground:function(t,e,i,a){if(i.shadow){for(var r=i.borderWidth||0,n=r%2==0?.5:0,s=[5,3,1],o=[.05,.1,.15],l=0;3>l;l++)t.push(e.rect(a.x+n,a.y+n,a.width,a.height).attr({fill:"none",stroke:"rgb(0,0,0)","stroke-opacity":o[l],"stroke-width":s[l],rx:i.borderRadius,ry:i.borderRadius}).transform("t1,1"));t.push(e.rect(a.x,a.y,a.width,a.height).attr({fill:"white",stroke:"none",rx:i.borderRadius,ry:i.borderRadius}))}t.push(e.rect(a.x,a.y,a.width,a.height).attr("class","legend-background").attr("rx",i.borderRadius).attr("ry",i.borderRadius).attr("fill",this._getRaphaelFill(i.backgroundColor)).attr("fill-opacity",this._getFillOpacity(i.backgroundColor)).attr("stroke",i.borderColor).attr("stroke-width",i.borderWidth))},_renderSvgBackground:function(t,e,a,r){if(!(a.width<=0||a.height<=0)){e.backgroundColor&&t.select("defs").empty()&&this._createGradualDefs(t,e.backgroundColor,r);var n=e.borderWidth||0,s=i.rectSubPixelOpt(0,0,a.width,a.height,n);if(e.shadow){var o=i.lineSubPixelOpt(0,n),l=[5,3,1],h=[.05,.1,.15],c=t.selectAll("rect.shadow").data(l);c.enter().append("rect").attr("class","shadow"),c.attr("x",o).attr("y",o).attr("width",a.width).attr("height",a.height).attr("rx",e.borderRadius).attr("ry",e.borderRadius).attr("transform","translate(1, 1)").style("fill","none").style("stroke","black").style("stroke-width",function(t){return t}).style("stroke-opacity",function(t,e){return h[e]});var d=t.selectAll("rect.shadowBackground").data([0]);d.enter().append("rect").attr("class","shadowBackground"),d.attr("x",s.x).attr("y",s.y).attr("width",s.width).attr("height",s.height).attr("rx",e.borderRadius).attr("ry",e.borderRadius).style("fill","white")}var d=t.selectAll("rect.background").data([0]);d.enter().append("rect").attr("class","background"),d.attr("x",s.x).attr("y",s.y).attr("width",s.width).attr("height",s.height).attr("rx",e.borderRadius).attr("ry",e.borderRadius).style("fill",e.backgroundColor?"string"==typeof e.backgroundColor?e.backgroundColor:"url(#"+r+")":"none").style("stroke",e.borderColor).style("stroke-width",e.borderWidth)}},_createGradualDefs:function(t,e,i){if(e&&"object"==typeof e){var a=t.append("defs").append("linearGradient").attr("id",i).attr("x1",e.x1).attr("y1",e.y1).attr("x2",e.x2).attr("y2",e.y2);a.append("stop").attr("offset","0%").style("stop-color",e.startColor),a.append("stop").attr("offset","100%").style("stop-color",e.endColor)}},_getRaphaelFill:function(t){if(t){if("string"==typeof t)return t;var e=0,i=parseFloat(t.x1),a=parseFloat(t.x2);return t.x1==t.x2&&(e=270,i=100*parseFloat(t.y1),a=100*parseFloat(t.y2)),e+"-"+t.startColor+":"+i+"-"+t.endColor+":"+a}return"none"},_drawVmlDataLabels:function(t,e,a,r,s){for(var o=this.component.getPlotBounds(),l=[],h=0,c=a.length;c>h;h++){var d=a[h];if(d&&d.visible&&d.dataLabels&&d.dataLabels.enabled&&d.labelPos){var u={x:d.labelPos.x+r,y:d.labelPos.y+s};i.containsPoint(o,u)&&l.push(d)}}for(var h=0,c=l.length;c>h;h++){for(var d=l[h],g=d.labelContent,f=d.labelDim,p=d.labelPos.x+r,m=d.labelPos.y+s,v=0,_=g.length;_>v;v++){var y=g[v],b=y.dim,x=(f.width-b.width)/2;
x=Math.max(0,x),this.labelDivManager.addLabel(y.text,i.makeBounds({x:p+x,y:m},b),y.style,d.category),m+=b.height+this.component.getLabelGap()}if(d.dataLabels.align==n.OUTSIDE&&this.component.componentType==n.PIE_CHART){var C=d.labelPos.startPos,L=d.labelPos.midPos,A=d.labelPos.endPos,T=t.path("M"+i.dealFloatPrecision(C.x)+","+i.dealFloatPrecision(C.y)+"L"+i.dealFloatPrecision(L.x)+","+i.dealFloatPrecision(L.y)+"L"+i.dealFloatPrecision(A.x)+","+i.dealFloatPrecision(A.y)).transform("t"+r+","+s).attr("fill","none").attr("stroke",d.dataLabels.connectorColor||d.color).attr("stroke-width",d.dataLabels.connectorWidth||0);e.push(T)}}},_isHollowMarker:function(t){return t?-1!=t.indexOf("hollow")&&t!=n.NULL_MARKER:!1},_getMarkerPath:function(t,e){switch(t){case n.NULL_MARKER:case n.CIRCLE:case n.CIRCLE_HOLLOW:return d3.svg.arc().outerRadius(e)({startAngle:0,endAngle:2*Math.PI});case n.SQUARE:case n.SQUARE_HOLLOW:var i=-e+","+-e,a=e+","+-e,r=e+","+e,s=-e+","+e;return"M"+i+"L"+a+"L"+r+"L"+s+"Z";case n.DIAMOND:case n.DIAMOND_HOLLOW:e=2*e/Math.sqrt(2);var o=-e+",0",l="0,"+-e,h=e+",0",c="0,"+e;return"M"+o+"L"+l+"L"+h+"L"+c+"Z";case n.TRIANGLE:case n.TRIANGLE_HOLLOW:var o=-e+","+e/Math.sqrt(3),l="0,"+-(2*Math.sqrt(3)/3)*e,h=e+","+e/Math.sqrt(3);return"M"+o+"L"+l+"L"+h+"Z"}},_getLinePath:function(t,e){return"M"+this._dealWithFloat(t[0])+","+this._dealWithFloat(t[1])+"L"+this._dealWithFloat(e[0])+","+this._dealWithFloat(e[1])},_dealWithFloat:function(t){return Math.abs(t)<1e-6?0:t},_getFillOpacity:function(t){return t&&"string"==typeof t?r.getColorOpacity(t):1},removeDivLabels:function(){this.labelDivManager&&this.labelDivManager.clearAllLabels()},addSeriesEventHandler:function(t){var e=this;i.isSupportSVG()&&t.each?t.each(function(){e._addSingleSeriesEventHandler(this)}):this._addSingleSeriesEventHandler(t.node)},_addSingleSeriesEventHandler:function(t){var e=this.component.vanchart.handler;i.addEvent(t,"mouseenter",e.trackerSeriesEnter.bind(e)),i.addEvent(t,"mouseleave",e.trackerSeriesLeave.bind(e))},addShapeEventHandler:function(t){var e=this;i.isSupportSVG()?t.each(function(){e._addSingleShapeEventHandler(this)}):this._addSingleShapeEventHandler(t.node)},_addSingleShapeEventHandler:function(t){var e=this.component.vanchart.handler;i.hasTouch()?(i.addEvent(t,"touchstart",e.trackerPointTouchStart.bind(e)),i.addEvent(t,"touchend",e.trackerPointTouchEnd.bind(e))):(i.addEvent(t,"mouseenter",e.trackerPointEnter.bind(e)),i.addEvent(t,"mouseleave",e.trackerPointLeave.bind(e)),i.addEvent(t,"mousemove",e.trackerPointMove.bind(e)),i.addEvent(t,"mousedown",e.trackerPointDown.bind(e)),i.addEvent(t,"mouseup",e.trackerPointUp.bind(e)))},_canvasRender:function(){var t=this.component.vanchart.getParentDom(),e=this.component.getPlotBounds();this._canvas||(this._canvas=new s(t,this.component.vanchart)),this._canvas.clearAll();for(var i=this.component.getVisibleChartData(),a=0,r=i.length;r>a;a++)this._canvas.addSeries(i[a],e)},_drawHorizontalAxisTitleWithHtml:function(t,e){var a,r,n=t.rotation||0,s=i.getTextDimension(t.text,t.style,t.useHtml),o=t.align||"left";switch(o){case"left":a=e.x;break;case"center":a=e.x+e.width/2-s.width/2;break;case"right":a=e.x+e.width-s.width}r=e.y+e.height/2-s.height/2;var l=this.labelDivManager.addLabel(t.text,{x:a,y:r},t.style);i.divRotate(l,n),l.style.left=a+"px",l.style.top=r+"px"},_drawVerticalAxisTitleWithHtml:function(t,e){var a,r,n=t.rotation||0,s=i.getTextDimension(t.text,t.style,t.useHtml),o=i.getTextDimensionWithRotation(t.text,t.style,t.useHtml,n);a=e.x+e.width/2-s.width/2;var l=t.align||"top";switch(l){case"top":r=Math.max(o.height/2-s.height,0);break;case"center":r=(e.height-s.height)/2;break;case"bottom":r=e.height-o.height/2-s.height/2}r+=e.y;var h=this.labelDivManager.addLabel(t.text,{x:a,y:r},t.style);i.divRotate(h,n),h.style.left=a+"px",h.style.top=r+"px"},remove:function(){},makeChosenState:function(t){},cancelChosenState:function(t){},makeClickedState:function(t){},cancelClickedState:function(t){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){}},e}),i("render/AxisRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.axis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){for(var t=this.axis.getAxisRender(),e=0,i=t.length;i>e;e++)t[e].render()},dataChangeRender:function(){for(var t=this.axis.getAxisRender(),e=0,i=t.length;i>e;e++)t[e].dataChangeRender()},monitorRender:function(){for(var t=this.axis.getAxisRender(),e=0,i=t.length;i>e;e++)t[e].monitorRender()}},a.inherit(e,i),t("./RenderLibrary").register(r.AXIS_RENDER,e),e}),i("component/Axis",["require","./Base","../utils/BaseUtils","../Constants","./CategoryAxis","./ValueAxis","./DateAxis","./Polar","../render/AxisRender","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this._axisList=[],this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./CategoryAxis"),s=t("./ValueAxis"),o=t("./DateAxis"),l=t("./Polar");return t("../render/AxisRender"),e.prototype={constructor:e,_refresh:function(){var t=this.option,e=this.componentOption;a.isArray(e)||(e=[e]);for(var i=e.length,h=i;h<this._axisList.length;h++)this._axisList[h].remove(),this._axisList[h]=null;for(var h=i-1;h>=0;h--)if(e[h].axisIndex=h,this._axisList[h]&&this._axisList[h].type!=e[h].type&&(this._axisList[h].remove(),this._axisList[h]=null),this._axisList[h])this._axisList[h].refresh(t,e[h]);else{var c;if(this.componentType===r.POLAR_COMPONENT)c=l;else{var d=e[h].type||r.VALUE_AXIS_COMPONENT;d==r.VALUE_AXIS_COMPONENT?c=s:d==r.CATEGORY_AXIS_COMPONENT?c=n:d==r.DATE_AXIS_COMPONENT&&(c=o)}this._axisList[h]=new c(this.vanchart,this.option,e[h],this.componentType)}},fixBoundsByPlot:function(){for(var t=this.vanchart.getPlotBounds(),e={},i=0,n=this._axisList.length;n>i;i++){var s=this._axisList[i],o=s.getPosition();e[o]=e[o]||[],e[o].push(s)}for(var o in e)for(var l=e[o],h=o==r.TOP||o==r.BOTTOM,i=0,c=l.length;c>i;i++){var s=l[i],d=0==i?t:l[i-1].bounds,u=s.bounds;if(h){var g=o==r.TOP?d.y-u.height:d.y+d.height;s.bounds=a.makeBounds(d.x,g,d.width,u.height)}else{var f=o==r.LEFT?d.x-u.width:d.x+d.width;s.bounds=a.makeBounds(f,d.y,u.width,d.height)}s._updateRange(),s._updateDomainWhenSizeFixed(),s._calculateTickData(),s._initZoomStatus()}},calculateTickData:function(){this._axisList.forEach(function(t){t._updateRange(),t._calculateTickData()})},initAttributesWithSeries:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e].initAttributesWithSeries()},doLayout:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e].doLayout()},getAxis:function(t){return t>=this._axisList.length&&(t=0),this._axisList[t]},axisZoom:function(t,e){this._axisList.forEach(function(i){i.axisZoom(t,e)})},dealOnZero:function(){this._axisList.forEach(function(t){t.isOnZero()&&(t.dealOnZero(),t._updateRange(),t._calculateTickData(),t._initZoomStatus())})},getAllAxis:function(){return this._axisList},getAxisRender:function(){var t=[];return this._axisList.forEach(function(e){var i=e.getRender();i&&t.push(i)}),t}},a.inherit(e,i),t("../ComponentLibrary").register(r.AXIS_COMPONENT,e),e}),i("utils/GeoJsonLoader",["require"],function(t){function e(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){d3.json(t,function(e){i[t]=e})}else if(t&&"object"==typeof t)return t;return i[t]}var i={};return{get:e}}),i("theme/Options",["require","../Constants"],function(t){var e=t("../Constants"),i={};return i[e.PIE_CHART]={plotOptions:{}},i[e.COLUMN_CHART]={plotOptions:{}},i[e.BAR_CHART]={plotOptions:{}},i[e.LINE_CHART]=i[e.AREA_CHART]={plotOptions:{large:!1,marker:{symbol:"null_marker"},dataLabels:{enabled:!1,align:"outside"}}},i[e.GAUGE_CHART]={plotOptions:{}},i[e.RADAR_CHART]={plotOptions:{columnType:!1,marker:{symbol:"null_marker"},borderWidth:1,borderColor:"white",lineWidth:1}},i[e.SCATTER_CHART]={plotOptions:{}},i[e.BUBBLE_CHART]={plotOptions:{}},i[e.MAP_CHART]={plotOptions:{fillColor:"#cccccc",fillColorOpacity:.75,borderColor:"#ffffff",borderWidth:1,borderOpacity:1}},i}),i("component/Geo",["require","./Base","../utils/BaseUtils","../utils/QueryUtils","../Constants","../utils/GeoJsonLoader","../theme/Options","../ComponentLibrary"],function(t){function e(t,e,r){i.call(this,t,e,r),this.mapData=[];var n=this.componentOption;if(n.data){var o=a.isArray(n.data)?n.data:[n.data];this.mapData=o.map(s.get)}this.geoName=n.geoName}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("../Constants"),s=t("../utils/GeoJsonLoader"),o=t("../theme/Options");return e.prototype={constructor:e,getFeature:function(t){for(var e=this.mapData,i=e.length-1;i>=0;i--)for(var a=e[i].features||[],r=a.length-1;r>=0;r--)if(a[r].properties&&a[r].properties.name==t)return a[r]},getAllFeatures:function(){var t=[];return this.mapData.forEach(function(e){t=t.concat(e.features)}),t},getDefaultMapStyle:function(){var t=[o[n.MAP_CHART].plotOptions,this.option.plotOptions],e={fillColor:r.queryList(t,"fillColor"),fillColorOpacity:r.queryList(t,"fillColorOpacity"),borderWidth:r.queryList(t,"borderWidth"),borderColor:r.queryList(t,"borderColor"),borderOpacity:r.queryList(t,"borderOpacity")};return e},getFeatureMap:function(t){for(var e=[],i=[],s=[],o=[],l={},h=t.length-1;h>=0;h--){var c=t[h];if(c.type==n.MAP_CHART)for(var d=c.points,u=d.length-1;u>=0;u--){var g=d[u];g.feature||r.merge(g,g.feature=this.getFeature(g.location)),l[g.location]=!0,r.merge(g,g.visible&&c.visible?g.mapStyle:c.mapStyle,!0),e.push(g)}else c.visible&&(c.type==n.BUBBLE_CHART?i=i.concat(c.points):c.points.forEach(function(t){var e={iconUrl:"../../doc/example/marker-icon.png",iconSize:[25,41]};t.marker&&a.isImageMarker(t.marker.symbol)?(e={iconUrl:t.marker.symbol,iconSize:[t.marker.width,t.marker.height]},t.icon=e,o.push(t)):s.push(t)}))}var f=this.getAllFeatures(),p=this.getDefaultMapStyle();return f.forEach(function(t){t.properties&&!l[t.properties.name]&&(t=r.merge({},t,!0),r.merge(t,p,!0),e.push(t))}),{areaFeatures:e,bubbleFeatures:i,scatterFeatures:s,imageFeatures:o}},getFitBounds:function(){for(var t=this.mapData.map(d3.geo.bounds),e=t[0][0],i=t[0][1],a=t.length-1;a>0;a--){var r=t[a];e[0]=Math.min(r[0][0],e[0]),e[1]=Math.min(r[0][1],e[1]),i[0]=Math.max(r[1][0],i[0]),i[1]=Math.max(r[1][1],i[1])}return[[e[1],e[0]],[i[1],i[0]]]}},a.inherit(e,i),t("../ComponentLibrary").register(n.GEO_COMPONENT,e),e}),i("component/Legend",["require","./Base","../utils/BaseUtils","../Constants","../utils/QueryUtils","../render/LegendIconFactory","../ComponentLibrary"],function(t){function e(t,e,a){this.hasEnoughSpace=!0,this.verticalAlign=0,i.call(this,t,e,a),this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),s=t("../render/LegendIconFactory"),o=10,l=8,h=12,c=52,d=4,u=16;return e.prototype={constructor:e,initAttributesWithSeries:function(){this.items=[],this._updateLegendItems()},doLayout:function(){var t=this._getLegendSize();if(this._setComponentBounds(this.componentOption.position||r.RIGHT_TOP,t),this._resetLegendBounds(),this._calculateVerticalPages(),!this.hasEnoughSpace){var e=c+2*o,i=Math.max(e-this.bounds.width,0);this.vanchart.bounds.width-=i,this.bounds.width+=i,this.bounds.x-=i,this.verticalAlign=i/2}},_updateLegendItems:function(){var t=this.vanchart.series,e={},i=this;t.map(function(t){switch(t.type){case r.GAUGE_CHART:break;case r.PIE_CHART:t.points.map(function(a){if(!e[a.seriesName]){var r={color:a.color,itemName:a.seriesName,visible:a.visible,pieDataIndex:a.index};i._mergeCommonLegendAttr(t,r),e[a.seriesName]=!0,i.items.push(r)}});break;default:if(!e[t.name]){var a={color:t.color,itemName:t.name,visible:t.visible};i._mergeCommonLegendAttr(t,a),e[t.name]=!0,i.items.push(a)}}})},_calculateVerticalPages:function(){var t=this.componentOption.position||r.RIGHT;if(this.pages=[],t!=r.TOP&&t!=r.BOTTOM){var e=this.bounds.height,i=this.getPreHeight(this.items.length);if(e>=i)return void(this.hasEnoughSpace=!0);this.hasEnoughSpace=!1;for(var a=0,n=0,i=0,s=0,o=this.items.length;o>s;s++){var l=i;i=this.getPreHeight(n,s+1),i>e&&(a++,n=s,this.bounds.height=l+h),this.pages[a]=this.pages[a]||[],this.pages[a].push(this.items[s])}}},_mergeCommonLegendAttr:function(t,e){var i=this.componentOption,a=i.hiddenColor,r=i.hoverColor||i.style.color;n.merge(e,{series:t,hiddenColor:a,hoverColor:r,legendIconType:this._getLegendType(t),lineIndex:0},!0)},_getLegendSize:function(){var t=this.componentOption,e=t.position||r.RIGHT,i=2*o;if(e==r.TOP||e==r.BOTTOM){var a=this._getTopAndBottomLegendSize()+i,n=this._maxHeight();return t.maxHeight&&a>n?n:a}var a=this._getLeftAndRightLegendSize()+i,s=this.getPreHeight()+o,l=this.vanchart.getPlotBounds().height;l>s&&(a=Math.max(a,c));var h=this._maxWidth();return t.maxWidth&&a>h?h:a},_getLeftAndRightLegendSize:function(){this.maxLabelWidth=0,this.maxLabelHeight=0,this.maxIconWidth=0,this.maxIconHeight=0;for(var t=0,e=this.items.length;e>t;t++){var i=a.getTextDimension(this.items[t].itemName,this.componentOption.style,!0);this.maxLabelWidth=Math.max(this.maxLabelWidth,i.width),this.maxLabelHeight=Math.max(this.maxLabelHeight,i.height);var r=s.getLegendIconSize(this.items[t].legendIconType);this.maxIconWidth=Math.max(this.maxIconWidth,r.width),this.maxIconHeight=Math.max(this.maxIconHeight,r.height)}return 2*o+this.maxIconWidth+l+this.maxLabelWidth},_getTopAndBottomLegendSize:function(){this.lineHeight=[];for(var t=this.vanchart.getPlotBounds(),e=t.width-4*o,i=0,r=0,n=0,h=0,c=this.items.length;c>h;h++){var d=this.items[h],g=s.getLegendIconSize(d.legendIconType),f=a.getTextDimension(d.itemName,this.componentOption.style,!0),p=g.width+l+f.width;e>i+p?(d.lineIndex=n,r=Math.max(r,f.height,g.height),i+=p+u):(this.lineHeight.push(r),n++,d.lineIndex=n,i=p,r=Math.max(f.height,g.height)),h==c-1&&this.lineHeight.push(r)}var m=0;if(this.lineHeight.forEach(function(t){m+=t+o}),this.maxLineIndex=this.lineHeight.length-1,this.componentOption.maxHeight){var v=this._maxHeight();for(this.maxLineIndex=-1,m=0;v>m&&this.maxLineIndex<this.lineHeight.length-1;){var _=m+this.lineHeight[this.maxLineIndex+1]+o;if(!(v>_))break;m=_,this.maxLineIndex++}}return m},_resetLegendBounds:function(){var t=this.componentOption.position;if(t==r.LEFT||t==r.RIGHT||t==r.RIGHT_TOP){if(t==r.RIGHT||t==r.RIGHT_TOP){var e=this.vanchart.getToolbarHeight();this.bounds.y+=e,this.bounds.height-=e}var i=this.bounds.x+o,n=this.bounds.y+o,h=this.bounds.height-2*o,c=this.bounds.width-2*o,d=this.getPreHeight();d=Math.min(d,h),n+=Math.round((h-d)/2),t==r.RIGHT_TOP||this.isFloat?this.bounds.height=d:this.bounds={x:i,y:n,width:c,height:d}}else{var i=this.bounds.x+o,n=this.bounds.y+o,h=this.bounds.height-2*o,c=this.bounds.width-2*o,g=c;if(1==this.lineHeight.length){g=2*o;for(var f=0,p=this.items.length;p>f;f++){var m=this.items[f],v=s.getLegendIconSize(m.legendIconType),_=a.getTextDimension(m.itemName,this.componentOption.style,!0);g+=v.width+_.width+l}g+=u*(this.items.length-1),i+=(c-g)/2}if(this.bounds={x:i,y:n,width:g,height:h},t==r.BOTTOM){var y=this.vanchart.getComponent(r.ZOOM_COMPONENT);y&&y.zoomToolEnabled()&&(this.bounds.y+=y.bounds.height)}}},getLegendItems:function(){if(this.isHorizontal()){var t=[],e=this.maxLineIndex;return this.items.forEach(function(i){i.lineIndex<=e&&t.push(i)}),t}return this.items},getLineHeight:function(){return this.lineHeight},getPadding:function(){return o},getGap:function(){return l},getHorizontalGap:function(){return u},getPreHeight:function(){var t=0,e=this.items.length;1==arguments.length?e=arguments[0]:2==arguments.length&&(t=arguments[0],e=arguments[1]);for(var i=o,a=this.maxLabelHeight,r=t;e>r;r++){var n=this.items[r],l=s.getLegendIconSize(n.legendIconType);i+=Math.max(l.height,a)+d}return Math.floor(i)},getVerticalItemHeight:function(t){var e=o,i=this.maxLabelHeight,a=this.items[t],r=s.getLegendIconSize(a.legendIconType);return e+=Math.max(r.height,i)+d},getHorizontalItemWidth:function(t){var e=this.items[t],i=this.componentOption,r=s.getLegendIconSize(e.legendIconType),n=a.getTextDimension(e.itemName,i.style,!0);return r.width+l+n.width+u},getHorizontalItemsWidth:function(t){for(var e=this.componentOption,i=0,r=0,n=t.length;n>r;r++){var o=t[r],h=s.getLegendIconSize(o.legendIconType),c=a.getTextDimension(o.itemName,e.style,!0);i+=h.width+c.width+l}return i+=u*(t.length-1)},getHorizontalLineItems:function(){for(var t=[],e=0,i=this.items.length;i>e;e++){var a=this.items[e];a.lineIndex<=this.maxLineIndex&&(t[a.lineIndex]=t[a.lineIndex]||[],t[a.lineIndex].push(a))}return t},getVerticalPages:function(){return this.pages},hasEnoughVerticalSpace:function(){return this.hasEnoughSpace},getButtonHeight:function(){return h}},a.inherit(e,i),t("../ComponentLibrary").register(r.LEGEND_COMPONENT,e),e}),i("component/Tooltip",["require","./Base","../utils/BaseUtils","../Constants","../utils/ColorUtils","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/ColorUtils"),s=.4;return e.prototype={constructor:e,_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:1;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",_style:function(t){if(!t)return"";var e=[];if(t.animation&&!t.follow){var i="left "+s+"s,top "+s+"s";e.push("transition:"+i),e.push("-moz-transition:"+i),e.push("-webkit-transition:"+i),e.push("-o-transition:"+i)}if(t.style){var r=a.cssNormalization(t.style);for(var o in r)"color"==o?e.push(o+":"+n.colorToHex(r[o])):e.push(o+":"+r[o])}if(t.backgroundColor)if("string"==typeof t.backgroundColor)if(a.isSupportSVG())e.push("background-Color:"+t.backgroundColor);else{var l=n.colorToHexAlpha(t.backgroundColor);e.push("background-Color:"+l.hex),e.push("filter:alpha(opacity="+l.alpha+")")}else if("object"==typeof t.backgroundColor){var h=t.backgroundColor,c=n.colorToHex(h.startColor),d=n.colorToHex(h.endColor),u="left",g="left top",f="right top",p=1;h.x1==h.x2&&(u="top",g="left top",f="left bottom",p=0),e.push("background: -ms-linear-gradient("+u+", "+c+", "+d+")"),e.push("background-image: -moz-linear-gradient("+u+", "+c+", "+d+")"),e.push("background-image: -webkit-gradient(linear, "+g+", "+f+", color-stop(0, "+c+"), color-stop(1, "+d+"))"),e.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="+c+", endColorstr="+d+", GradientType="+p+")")}null!=t.borderWidth&&e.push("border-width:"+t.borderWidth+"px"),null!=t.borderColor&&e.push("border-color:"+t.borderColor),null!=t.borderRadius&&(e.push("border-radius:"+t.borderRadius+"px"),e.push("-moz-border-radius:"+t.borderRadius+"px"),e.push("-webkit-border-radius:"+t.borderRadius+"px"),e.push("-o-border-radius:"+t.borderRadius+"px")),t.shadow&&e.push("box-shadow:1px 1px 2px rgba(0,0,0,0.2)");var m=t.padding;return null!=m&&void 0!=m&&(m=a.reformCssArray(m),e.push("padding:"+m[0]+"px "+m[1]+"px "+m[2]+"px "+m[3]+"px")),e=e.join(";")+";"},doLayout:function(){if(!this._tDom){var t=this.vanchart.dom;this._tDom=document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.style.position="absolute",t.appendChild(this._tDom),this._tooltipHideTick=null}},remove:function(){if(this._tDom){var t=this.vanchart.dom;t.removeChild(this._tDom)}},show:function(t,e,i){t&&e&&i&&!this.vanchart.isMouseDown&&(clearTimeout(this._tooltipHideTick),this._tDom.innerHTML=i,this._tDom.style.cssText=this._gCssText+this._style(e)+"left:"+t[0]+"px;top:"+t[1]+"px;"),a.hasTouch()&&(this._tooltipHideTick=setTimeout(function(){this._tDom.style.display="none"}.bind(this),3e3))},hide:function(){clearTimeout(this._tooltipHideTick),this._tooltipHideTick=setTimeout(function(){this._tDom.style.display="none"}.bind(this),400)},immediateHide:function(){this._tDom.style.display="none"},calculateTooltipDivDim:function(t,e){t=t||"";var i=document.getElementsByTagName("body")[0],a=document.createElement("div");a.innerHTML=e,a.style.cssText=this._gCssText+this._style(t)+"visibility:hidden;",i.appendChild(a);var r=a.offsetWidth,n=a.offsetHeight;return i.removeChild(a),{width:r,height:n}}},a.inherit(e,i),t("../ComponentLibrary").register(r.TOOLTIP_COMPONENT,e),e}),i("utils/ExportUtils",["require","./BaseUtils"],function(t){function e(){var t=document.querySelectorAll(".svg-export");[].forEach.call(t,function(t){t.parentNode.removeChild(t)})}function i(t){var e="";t.setAttribute("version","1.1");var i=document.createElement("defs");t.insertBefore(i,t.firstChild);var a=document.createElement("style");i.appendChild(a),a.setAttribute("type","text/css"),t.removeAttribute("xmlns"),t.removeAttribute("xlink"),t.hasAttributeNS(o.xmlns,"xmlns")||t.setAttributeNS(o.xmlns,"xmlns",o.svg),t.hasAttributeNS(o.xmlns,"xmlns:xlink")||t.setAttributeNS(o.xmlns,"xmlns:xlink",o.xlink);var r=(new XMLSerializer).serializeToString(t).replace("</style>","<![CDATA["+e+"]]></style>");return[n+r]}function a(t,a){e();var r=i(t),n=a.fileName,o=window.URL.createObjectURL(new Blob(r,{type:"text/xml"})),l=document.createElement("a");s.appendChild(l),l.setAttribute("class","svg-export"),l.setAttribute("download",n+".svg"),l.setAttribute("href",o),l.style.display="none",l.click(),setTimeout(function(){window.URL.revokeObjectURL(o)},10)}function r(t,e,i){a(t,e,i)}var n=(t("./BaseUtils"),'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">');window.URL=window.URL||window.webkitURL;var s=document.body,o={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};return{toImage:r}}),i("render/ToolbarIconSvgRender",["require","../utils/BaseUtils","../Constants","../utils/ExportUtils"],function(t){function e(t,e){this.toolbarIcon=t,this.toolbar=e}var i="rgba(0,0,0,0.05)",a="rgba(0,0,0,0.1)",r="rgba(0,0,0,0.0)",n="rgba(0,0,0,0.05)",s=2,o=t("../utils/BaseUtils"),l=t("../Constants"),h=t("../utils/ExportUtils");return e.prototype={constructor:e,render:function(t){var e=this.toolbar.getIconSize(),a=this.toolbarIcon.getIconPos(),n=this.toolbarIcon.visible;this.iconG=t.append("g").attr("transform","translate("+a.x+","+a.y+")").attr("visibility",n?"visible":"hidden"),this.iconG.append("rect").attr("width",e).attr("height",e).attr("rx",s).attr("ry",s).style("fill",this._isOpen()?i:r),this._createIcon(),this._addListeners()},_iconAnimation:function(t,e,a){var n=this.iconG,s=this.toolbarIcon.getIconPos();setTimeout(function(){a&&n.attr("visibility","visible");var e=4*t,o=s.x-e;n.transition().ease("circle-out").duration(100).attr("transform","translate("+o+","+s.y+")").transition().ease("circle-in").duration(100).attr("transform","translate("+s.x+","+s.y+")").each("end",function(){d3.select(this).attr("visibility",a?"visible":"hidden")}),n.select("rect").style("fill",a?r:i).transition().ease("linear").duration(200).style("fill",a?i:r),n.select("g").style("opacity",a?0:1).transition().ease("linear").duration(200).style("opacity",a?1:0)},e)},backToOrigin:function(){var t=this.toolbarIcon.getIconPos();this.iconG.attr("transform","translate("+t.x+","+t.y+")")},showIcon:function(){arguments.length?this._iconAnimation(arguments[0],arguments[1],!0):this.iconG.attr("visibility","visible")},hideIcon:function(){arguments.length?this._iconAnimation(arguments[0],arguments[1],!1):this.iconG.attr("visibility","hidden")},refreshMove:function(t,e){var i=this.toolbarIcon.getIconPos(),a=d3.transform(this.iconG.attr("transform")).translate,r=a[0],n=r-t,s=n+e;this.iconG.transition().ease("circle-out").duration(220).attr("transform","translate("+n+","+i.y+")").transition().ease("circle-in").duration(220).attr("transform","translate("+s+","+i.y+")")},refreshMoveWithoutAnimation:function(t,e){var i=this.toolbarIcon.getIconPos(),a=d3.transform(this.iconG.attr("transform")).translate,r=a[0],n=r-t+e;this.iconG.attr("transform","translate("+n+","+i.y+")")},_isOpen:function(){return this.toolbar.isOpen},_addListeners:function(){var t=this.iconG,e=this,s=this.toolbar,c=s.vanchart,d=s.componentOption,u=s.vanchart.getParentDom(),g=this.toolbar.getVanchartRender().getRenderRoot(),f=this.toolbarIcon,p=s.getRefreshIcon(),m={width:c.chartWidth(),height:c.chartHeight()};t.style("cursor","pointer").on("click",function(){switch(f.iconType){case l.REFRESH_ICON:c.refreshRestore(),p.hideIcon();break;case l.INCREASE_ICON:f.iconType=l.DECREASE_ICON,t.select("path").attr("d",f.getDecreaseIconPath()),c.refreshIncreaseOrder(),p.showIcon();break;case l.DECREASE_ICON:f.iconType=l.INCREASE_ICON,t.select("path").attr("d",f.getIncreaseIconPath()),c.refreshDecreaseOrder(),p.showIcon();break;case l.EXPORT_ICON:h.toImage(g.node(),d.toImage,m);break;case l.MAX_ICON:o.showLightBox(s.option);break;case l.MIN_ICON:o.hideLightBox(u);break;case l.MENU_ICON:s.showOrHide()}}).on("mouseenter",function(){t.select("rect").style("fill",e._isOpen()?a:n)}).on("mouseleave",function(){t.select("rect").style("fill",e._isOpen()?i:r)})},_createIcon:function(){var t=this.iconG,e=this.toolbarIcon,i=e.iconType;switch(i){case l.REFRESH_ICON:t.append("path").attr("d",e.getRefreshIconPath()).style("fill","#FF9933");break;case l.INCREASE_ICON:t.append("path").attr("d",e.getIncreaseIconPath()).style("fill","#33CCFF");break;case l.DECREASE_ICON:t.append("path").attr("d",e.getDecreaseIconPath()).style("fill","#33CCFF");break;case l.EXPORT_ICON:t.append("path").attr("d",e.getExportIconPath()).style("fill","#6666CC");break;case l.MAX_ICON:t.append("path").attr("d",e.getMaxIconPath()).style("fill","#33CC66");break;case l.MIN_ICON:t.append("path").attr("d",e.getMinIconPath()).style("fill","#33CC66");break;case l.MENU_ICON:t.append("path").attr("d",e.getMenuIconPath()).style("stroke-width",2).style("stroke","#AAAAAA")}}},e}),i("render/ToolbarIconVmlRender",["require","../utils/BaseUtils","../Constants","../utils/ExportUtils"],function(t){function e(t,e){this.toolbarIcon=t,this.toolbar=e,this.currentPos=[]}var i="rgb(0,0,0)",a=.05,r="rgb(0,0,0)",n=.1,s="rgb(0,0,0)",o=0,l="rgb(0,0,0)",h=.05,c=2,d=t("../utils/BaseUtils"),u=t("../Constants"),g=t("../utils/ExportUtils");return e.prototype={constructor:e,render:function(t){var e=this.toolbar.getToolbarPos(),r=this.toolbarIcon.getIconPos(),n=r.x+e.x,l=r.y+e.y;this.currentPos=[n,l];var h=this.toolbar.getIconSize(),d=this.toolbarIcon.visible;this.itemSet=t.set(),this.background=t.rect(0,0,h,h).attr("fill",this._isOpen()?i:s).attr("fill-opacity",this._isOpen()?a:o).attr("rx",c).attr("ry",c).attr("stroke-width",0),this.foreground=t.path().attr(this._getIconStyle()),this.itemSet.push(this.background),this.itemSet.push(this.foreground),this.itemSet.transform("t"+n+","+l),d||this.itemSet.hide(),this._addListeners()},_getIconStyle:function(){var t=this.toolbarIcon,e=t.iconType;switch(e){case u.REFRESH_ICON:return{path:t.getRefreshIconPath(),fill:"#FF9933","stroke-width":0};case u.INCREASE_ICON:return{path:t.getIncreaseIconPath(),fill:"#33CCFF","stroke-width":0};case u.DECREASE_ICON:return{path:t.getDecreaseIconPath(),fill:"#33CCFF","stroke-width":0};case u.EXPORT_ICON:return{path:t.getExportIconPath(),fill:"#6666CC","stroke-width":0};case u.MAX_ICON:return{path:t.getMaxIconPath(),fill:"#33CC66","stroke-width":0};case u.MIN_ICON:return{path:t.getMinIconPath(),fill:"#33CC66","stroke-width":0};case u.MENU_ICON:return{path:t.getMenuIconPath(),"stroke-width":2,stroke:"#AAAAAA",fill:"none"}}},_addListeners:function(){var t=(this.iconG,this.toolbar),e=t.componentOption,c=t.vanchart.getParentDom(),f=this.toolbar.getVanchartRender().getRenderRoot(),p=this.toolbarIcon,m=t.vanchart,v=t.getRefreshIcon(),_={width:m.chartWidth(),height:m.chartHeight()};this.itemSet.forEach(function(y){var b=this;y.attr("cursor","pointer"),y.click(function(){switch(p.iconType){case u.REFRESH_ICON:m.refreshRestore(),v.hideIcon();break;case u.INCREASE_ICON:p.iconType=u.DECREASE_ICON,b.foreground.attr("path",p.getDecreaseIconPath()),m.refreshIncreaseOrder(),v.showIcon();break;case u.DECREASE_ICON:p.iconType=u.INCREASE_ICON,b.foreground.attr("path",p.getIncreaseIconPath()),m.refreshDecreaseOrder(),v.showIcon();break;case u.EXPORT_ICON:g.toImage(f,e.toImage,_);break;case u.MAX_ICON:d.showLightBox(t.option);break;case u.MIN_ICON:d.hideLightBox(c);break;case u.MENU_ICON:t.showOrHide()}}),y.mouseover(function(){b.background.attr("fill",b._isOpen()?r:l).attr("fill-opacity",b._isOpen?n:h)}),y.mouseout(function(){b.background.attr("fill",b._isOpen()?i:s).attr("fill-opacity",b._isOpen()?a:o)})},this)},_isOpen:function(){return this.toolbar.isOpen},showIcon:function(){this.itemSet.show()},hideIcon:function(){this.itemSet.hide()},refreshMove:function(t,e){var i=e-t;this.currentPos[0]+=i;var a=this.currentPos[0],r=this.currentPos[1];this.itemSet.transform("t"+a+","+r)},refreshMoveWithoutAnimation:function(t,e){this.refreshMove(t,e)},backToOrigin:function(){var t=this.toolbar.getToolbarPos(),e=this.toolbarIcon.getIconPos(),i=e.x+t.x,a=e.y+t.y;this.currentPos=[i,a],this.itemSet.transform("t"+i+","+a)}},e}),i("component/ToolbarIcon",["require","./Base","../utils/BaseUtils","../Constants","../utils/ExportUtils","../render/ToolbarIconSvgRender","../render/ToolbarIconVmlRender"],function(t){function e(t,e,i,a){this.iconType=t,this.toolbar=e,this.visible=a,this.pos=i,this.iconG=null,this.iconRender=n.isSupportSVG()?new o(this,e):new l(this,e)}var i=32,a=1,r=i+a,n=(t("./Base"),t("../utils/BaseUtils")),s=t("../Constants"),o=(t("../utils/ExportUtils"),t("../render/ToolbarIconSvgRender")),l=t("../render/ToolbarIconVmlRender");return e.prototype={constructor:e,render:function(t){this.iconRender.render(t)},showIcon:function(){if(!this.visible){arguments.length?this.iconRender.showIcon(arguments[0],arguments[1]):this.iconRender.showIcon(),this.visible=!0;var t=this.toolbar.vanchart.getComponent(s.TITLE_COMPONENT);this.iconType===s.REFRESH_ICON&&t&&t.changeTextRightSpace(r)}},hideIcon:function(t,e){if(this.visible){arguments.length?this.iconRender.hideIcon(arguments[0],arguments[1]):this.iconRender.hideIcon(),this.visible=!1;var i=this.toolbar.vanchart.getComponent(s.TITLE_COMPONENT);this.iconType===s.REFRESH_ICON&&i&&i.changeTextRightSpace(-r),this.toolbar.isOpen||this.iconType!=s.REFRESH_ICON||this.iconRender.backToOrigin()}},refreshMove:function(t,e){this.iconRender.refreshMove(t,e)},refreshMoveWithoutAnimation:function(t,e){this.iconRender.refreshMoveWithoutAnimation(t,e)},getIconPos:function(){return this.pos},getMaxIconPath:function(){return"M24,8v6.5L21.5,12l-3,3L17,13.5l3-3L17.5,8H24z M15,18.5l-3,3l2.5,2.5H8v-6.5l2.5,2.5l3-3L15,18.5z"},getMinIconPath:function(){return"M15,17v6.5L12.5,21l-3,3L8,22.5l3-3L8.5,17H15z M24,9.5l-3,3l2.5,2.5H17V8.5l2.5,2.5l3-3L24,9.5z"},getIncreaseIconPath:function(){return"M8,20h16v2H8V20z M10,16h2v3h-2V16z M13,14h2v5h-2V14z M16,12h2v7h-2V12z M19,9h2v10h-2V9z"},getDecreaseIconPath:function(){return"M8,20h16v2H8V20z M10,9h2v10h-2V9z M13,12h2v7h-2V12z M16,15h2v4h-2V15z M19,16h2v3h-2V16z"},getExportIconPath:function(){return"M22,8H8v16h16V10L22,8z M16,10h2v4h-2V10z M22,22H10V10h1v5h9v-5h1.171L22,10.829V22z"},getRefreshIconPath:function(){return"M21.656,10.344C20.209,8.896,18.209,8,16,8c-3.43,0-6.354,2.158-7.492,5.19l1.873,0.703C11.234,11.619,13.428,10,16,10c1.657,0,3.156,0.672,4.243,1.757L18,14h6V8L21.656,10.344z M16,22c-1.657,0-3.156-0.671-4.243-1.757L14,18H8v6l2.344-2.344C11.791,23.104,13.791,24,16,24c3.43,0,6.354-2.158,7.492-5.19l-1.873-0.703C20.766,20.381,18.572,22,16,22z"},getMenuIconPath:function(){return"M8,10L24,10 M8,15L24,15 M8,20L24,20"}},e}),i("component/Toolbar",["require","./Base","../utils/BaseUtils","../Constants","../utils/ExportUtils","./ToolbarIcon","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.menuIcon=null,this.refreshIcon=null,this.pos={x:0,y:0},this.toolbarIcons=[],this.refresh(e),this.isOpen=!this.componentOption.hidden}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=(t("../utils/ExportUtils"),
t("./ToolbarIcon")),s=32,o=1,l=5;return e.prototype={constructor:e,doLayout:function(){var t=this.componentOption;if(t.enabled&&this._needLayout){this._needLayout=!1,this.toolbarIcons=[],this.pos={x:0,y:0};var e=[r.REFRESH_ICON];this._registerIcons("sort",r.INCREASE_ICON,e),a.isSupportSVG()&&!a.isIE()&&this._registerIcons("toImage",r.EXPORT_ICON,e),this._registerIcons("fullScreen",r.MAX_ICON,e),this._registerIcons("exitFullScreen",r.MIN_ICON,e),this.componentOption.hidden&&e.push(r.MENU_ICON);var i=s+o,h=e.length*i+l,c=this.vanchart.chartWidth()-h;this.pos={x:c,y:l};for(var d=!this.componentOption.hidden,u=0,g=e.length;g>u;u++){var f={x:u*i,y:0},p=e[u];p==r.MENU_ICON?this.menuIcon=new n(p,this,f,!0):p==r.REFRESH_ICON?this.refreshIcon=new n(p,this,f,!1):this.toolbarIcons.push(new n(p,this,f,d))}}},_registerIcons:function(t,e,i){var a=this.componentOption;a[t]&&a[t].enabled&&i.push(e)},getToolbarPos:function(){return this.pos},getToolbarIcons:function(){return this.toolbarIcons},getRefreshIcon:function(){return this.refreshIcon},showRefreshIconWhenZoom:function(){if(!this.refreshIcon.visible){if(this.menuIcon)if(this.isOpen)this.refreshIcon.showIcon();else{this.refreshIcon.showIcon();var t=this.toolbarIcons,e=t.length,i=this.refreshIcon,a=4*(e+1),n=4*(e+1)+33*e;i.visible&&i.refreshMoveWithoutAnimation(a,n)}else this.refreshIcon.showIcon();var l=this.vanchart.getComponent(r.TITLE_COMPONENT);if(l&&!l.isFloat){var h=s+o;l.changeTextRightSpace(this.refreshIcon.visible?h:-h)}}},showOrHide:function(){this.isOpen?this.render.hide():this.render.show(),this.isOpen=!this.isOpen;var t=s+o,e=this.toolbarIcons.length*t;this.isOpen&&(e=-e);var i=this.vanchart.getComponent(r.TITLE_COMPONENT);i&&!i.isFloat&&i.changeTextRightSpace(-e)},getIconSize:function(){return s},getToolbarWidth:function(){if(!this.componentOption.enabled)return 0;var t=s+o,e=l;return this.refreshIcon&&this.refreshIcon.visible&&(e+=t),this.menuIcon&&this.menuIcon.visible&&(e+=t),this.isOpen&&(e+=this.toolbarIcons.length*t),e},getToolbarHeight:function(){return s}},a.inherit(e,i),t("../ComponentLibrary").register(r.TOOLBAR_COMPONENT,e),e}),i("theme/config",["require","../Constants"],function(t){var e=t("../Constants"),i={};return i[e.PIE_CHART]={},i[e.COLUMN_CHART]={xAxis:{type:"category",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!0,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:"function(){return arguments[0]}"},yAxis:{type:"value",position:"left",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!1,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:"function(){return arguments[0]}"}},i[e.BAR_CHART]={xAxis:{type:"value",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!0,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:"function(){return arguments[0]}"},yAxis:{type:"category",position:"left",lineWidth:1,lineColor:"#cccccc",enableTick:!0,enableMinorTick:!1,showLabel:!0,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:"function(){return arguments[0]}"}},i[e.LINE_CHART]=i[e.AREA_CHART]={xAxis:{type:"category",position:"bottom",lineWidth:1,lineColor:"#cccccc",enableTick:!0,showLabel:!0,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,gridLineWidth:0,gridLineColor:"#cccccc",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:"function(){return arguments[0]}"},yAxis:{type:"value",position:"left",minorTickLength:2,lineWidth:0,lineColor:"#cccccc",enableTick:!0,showLabel:!0,tickColor:"#cccccc",tickWidth:2,tickLength:4,tickPadding:3,minorTickColor:"#cccccc",minorTickWidth:1,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"16px"},formatter:function(t){return t}}},i[e.GAUGE_CHART]={legend:{enabled:!1},gaugeAxis:{type:"value",showLabel:!0,step:1,enableTick:!0,tickColor:"#BBBBBB",tickWidth:1,enableMinorTick:!0,minorTickColor:"#e2e2e2",minorTickWidth:1,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"10px"}},pointer:{tickStyle:{color:"#BBBBBB",fontSize:"8px",fontFamily:"Verdana"},tickWidth:1,tickColor:"#666666",minorTickWidth:1,minorTickColor:"#FCFCFC",seriesLabel:{enabled:!0,align:e.BOTTOM,useHtml:!1,style:{color:"#333333",fontSize:"14px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}"}},valueLabel:{enabled:!0,useHtml:!1,backgroundColor:"#F5F5F7",style:{color:"#333333",fontSize:"11px",fontFamily:"Verdana"},formatter:{identifier:"${SERIES}${VALUE}",valueFormat:d3.format(".2")}},needle:"#E5715A",hinge:"#656B6D",hingeBackgroundColor:"#DCF2F9",paneBackgroundColor:"#FCFCFC"},slot:{percentageLabel:{enabled:!0,useHtml:!1,style:{fontSize:"36px",fontFamily:"Verdana",fontWeight:"bold",textShadow:"0px 2px 0px rgba(0,0,0,0.08)"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!0,useHtml:!1,style:{color:"#666666",fontSize:"14px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},needle:"#ffffff",slotBackgroundColor:"#eeeeee"},thermometer:{percentageLabel:{enabled:!0,useHtml:!1,align:"left",style:{color:"#333333",fontSize:"12px",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!0,useHtml:!1,align:"left",style:{color:"#bababa",fontSize:"12px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},needle:"#ffffff",slotBackgroundColor:"#eeeeee",thermometerLayout:"vertical"},ring:{percentageLabel:{enabled:!0,useHtml:!1,style:{fontSize:"24px",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!0,useHtml:!1,style:{color:"#777777",fontSize:"12px",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},clockwise:!1,paneBackgroundColor:"#eeeeee",innerPaneBackgroundColor:"#f4f4f4"}},i[e.RADAR_CHART]={polar:{},angleAxis:{type:"category",step:1,lineWidth:1,lineColor:"#cccccc",showLabel:!0,gridLineWidth:1,gridLineColor:"#dddddd",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"9pt"},formatter:"function(){return arguments[0]}"},radiusAxis:{type:"value",labelRotation:0,step:1,lineWidth:1,lineColor:"#cccccc",showLabel:!0,gridLineWidth:1,gridLineColor:"#dddddd",formatter:"function(){return arguments[0]}",labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"9pt"}}},i[e.SCATTER_CHART]={legend:{enabled:!1}},i[e.BUBBLE_CHART]={legend:{enabled:!1}},i[e.MAP_CHART]={legend:{enabled:!0}},i}),i("render/ZoomBarRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../theme/config","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.zoomBar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");e.prototype={constructor:e,render:function(){if(this.zoomBar.zoomToolEnabled()&&!this._zoomG){var t=this.zoomBar.bounds,e=this.zoomBar.getVanchartRender().getRenderRoot();this._zoomG=e.append("g").attr("transform","translate("+t.x+","+t.y+")"),this._initUnitLength();var i=this.zoomBar.getStartX(),a=this.zoomBar.getEndX();this._zoomG.append("g").call(this._createLines.bind(this)),this.leftRect=this._zoomG.append("g").call(this._createSideRect.bind(this),i,!0),this.rightRect=this._zoomG.append("g").call(this._createSideRect.bind(this),a,!1),this.innerRect=this._zoomG.append("g").call(this._createInnerRect.bind(this),i,a),this.leftButton=this._zoomG.append("g").call(this._createButton.bind(this),i,!0),this.rightButton=this._zoomG.append("g").call(this._createButton.bind(this),a,!1);var r=this.zoomBar.getZoomBarWidth(),n=this.zoomBar.getZoomBarHeight();this.l_bounds={x:i,y:0,width:r,height:n},this.r_bounds={x:a-r,y:0,width:r,height:n},this.c_bounds={x:i+r,y:0,width:a-i-2*r,height:n},this._addEventListeners(e)}},remove:function(){this._zoomG&&(this._zoomG.remove(),this._zoomG=null)},_initUnitLength:function(){var t=this.zoomBar.vanchart.xAxis();if(t.type==r.CATEGORY_AXIS_COMPONENT){var e=this.zoomBar.bounds,i=t.getCategories();this.unitLength=i.length?e.width/i.length:e.width}else this.unitLength=1},_addEventListeners:function(t){var e=this;t.on("mousedown.zoom",function(){var t=d3.mouse(e._zoomG.node());a.containsPoint(e.l_bounds,t)?this.tartget=e.leftButton:a.containsPoint(e.r_bounds,t)?this.tartget=e.rightButton:a.containsPoint(e.c_bounds,t)&&(this.tartget=e.innerRect),this.tartget&&(this.downX=t[0],this.initX=d3.transform(this.tartget.attr("transform")).translate[0],e._zoomG.style("cursor","ew-resize"),e._initStartEndIndex())}).on("mousemove.zoom",function(){if(this.tartget){var t=this.tartget.attr("class");switch(t){case r.LEFT:e.zoomBar.resizable()&&e._leftButtonMove(this.downX,this.initX);break;case r.RIGHT:e.zoomBar.resizable()&&e._rightButtonMove(this.downX,this.initX);break;case r.CENTER:e._centerRectMove(this.downX)}e._zoomRefresh()}}).on("mouseup.zoom",function(){if(this.tartget){this.tartget=null,e._updateBounds();var t=e.zoomBar.vanchart.xAxis();t&&t.render.render()}})},_leftButtonMove:function(t,e){var i=this.zoomBar.getZoomBarWidth(),a=0,r=d3.transform(this.rightButton.attr("transform")).translate[0]-i,n=d3.mouse(this._zoomG.node())[0],s=e+n-t;s=Math.max(Math.min(s,r),a),this.leftButton.attr("transform","translate("+s+",0)"),this.leftRect.select("rect").attr("width",s),this.innerRect.selectAll("line").attr("x1",s+i),this.innerRect.select("rect").attr("x",s+i).attr("width",r-s)},_rightButtonMove:function(t,e){var i=this.zoomBar.getZoomBarWidth(),a=d3.transform(this.leftButton.attr("transform")).translate[0]+i,r=this.zoomBar.getBoundsEndX()-i,n=d3.mouse(this._zoomG.node())[0],s=e+n-t;s=Math.max(Math.min(s,r),a),this.rightButton.attr("transform","translate("+s+",0)"),this.rightRect.select("rect").attr("x",s+i).attr("width",this.zoomBar.getBoundsEndX()-(s+i)),this.innerRect.selectAll("line").attr("x2",s),this.innerRect.select("rect").attr("width",s-a)},_centerRectMove:function(t){var e=this.zoomBar.getBoundsEndX(),i=this.zoomBar.getZoomBarWidth(),a=d3.mouse(this._zoomG.node())[0],r=a-t;if(this.l_bounds.x+r>=0&&this.r_bounds.x+this.r_bounds.width+r<=e){var n=this.l_bounds.x+r;this.leftButton.attr("transform","translate("+n+",0)"),this.leftRect.select("rect").attr("width",n);var s=this.r_bounds.x+r;this.rightButton.attr("transform","translate("+s+",0)"),this.rightRect.select("rect").attr("x",s+i).attr("width",this.zoomBar.getBoundsEndX()-(s+i)),this.innerRect.selectAll("line").attr("x1",n+i).attr("x2",s),this.innerRect.select("rect").attr("x",n+i)}},_initStartEndIndex:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0];this.initStart=this._getIndexByPosition(t),this.initEnd=this._getIndexByPosition(e)},_getIndexByPosition:function(t){var e=this.zoomBar.vanchart.xAxis();switch(e.type){case r.CATEGORY_AXIS_COMPONENT:var i=e.getCategories();return e.isAxisReversed()?i.length-1-Math.floor(t/this.unitLength):Math.floor(t/this.unitLength);case r.DATE_AXIS_COMPONENT:return a.date2int(this.xScale.invert(t));default:return this.xScale.invert(t)}},_zoomRefresh:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0],i=this._getIndexByPosition(t),a=this._getIndexByPosition(e);if(this.initStart!=i||this.initEnd!=a){var n=this.zoomBar.vanchart.xAxis();n.updateAxisScale(Math.min(i,a),Math.max(i,a),!0);var s=this.zoomBar.vanchart;s.currentOption.state=r.STATE_ZOOM_REFRESH,s.layoutComponentsAndCharts(),this.initStart=i,this.initEnd=a}},_updateBounds:function(){var t=d3.transform(this.leftButton.attr("transform")).translate[0],e=d3.transform(this.rightButton.attr("transform")).translate[0],i=this.zoomBar.getZoomBarWidth();this.l_bounds.x=t,this.r_bounds.x=e,this.c_bounds.x=t+i,this.c_bounds.width=e-t-i},_createSideRect:function(t,e,i){var a,r,n=this.zoomBar.getZoomBarHeight();i?(a=0,r=e):(a=e,r=this.zoomBar.bounds.width-e),t.append("rect").attr("x",a).attr("y",0).attr("width",r).attr("height",n).style("fill","rgba(220,221,221,0.4)")},_createInnerRect:function(t,e,i){var a=this.zoomBar.getZoomBarWidth(),n=this.zoomBar.getZoomBarHeight();t.attr("class",r.CENTER),t.append("rect").attr("x",e+a).attr("y",0).attr("width",i-e-2*a).attr("height",n).style("fill","rgba(255,255,255,0)"),t.append("line").attr("x1",e+a).attr("y1",0).attr("x2",i-a).attr("y2",0),t.append("line").attr("x1",e+a).attr("y1",n).attr("x2",i-a).attr("y2",n),t.selectAll("line").style({fill:"none",stroke:"#29ABE2","stroke-width":1})},_createLines:function(e){var i=t("../theme/config"),r=this.zoomBar.bounds,n=this.zoomBar.vanchart.xAxis();this.xScale=this.zoomBar._getAxisScale();var s=this.xScale,o=this.zoomBar.option.series,l=[];o.forEach(function(t){!t.xAxis&&i[t.type].xAxis&&l.push(t)});var h=[],c=Number.MAX_VALUE,d=Number.MIN_VALUE;l.forEach(function(t){var e=[];h.push(e);for(var i=t.data.length,r=0;i>r;r++){var s=t.data[r],o={x:n.getValueFromData(s),y:a.pick(s.y,s)};isNaN(+o.y)||(e.push(o),c=Math.min(c,o.y),d=Math.max(d,o.y))}}),c=c>=0?0:c;var u=s.rangeBand?s.rangeBand()/2:0,g=d3.scale.linear().domain([c,d]).range([r.height,0]);h.forEach(function(t){t.forEach(function(t){t.x=s(t.x)+u,t.y=g(t.y)})}),h.forEach(function(t){t.sort(function(t,e){return t.x-e.x})});var f=d3.svg.line().interpolate("linear").x(function(t){return t.x}).y(function(t){return t.y});e.selectAll("path").data(h).enter().append("path").attr("d",function(t){return f(t)}).style({fill:"none",stroke:"black","stroke-width":1})},_createButton:function(t,e,i){e=i?e:e-this.zoomBar.getZoomBarWidth(),t.attr("transform","translate("+e+",0)").attr("class",i?r.LEFT:r.RIGHT),t.append("path").attr("d",i?"M4,30h6V0L4,0C1.791,0,0,1.791,0,4v22C0,28.209,1.791,30,4,30z":"M6,30H0V0h6c2.209,0,4,1.791,4,4v22C10,28.209,8.209,30,6,30z").style("fill","#29ABE2"),t.append("line").attr("x1",3).attr("y1",11).attr("x2",3).attr("y2",18),t.append("line").attr("x1",7).attr("y1",11).attr("x2",7).attr("y2",18),t.selectAll("line").style({fill:"#FFFFFF",stroke:"#7ADAF4","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}},a.inherit(e,i),t("./RenderLibrary").register(r.ZOOM_SVG,e)}),i("component/ZoomBar",["require","../render/ZoomBarRender","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}t("../render/ZoomBarRender");var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=30,s=10;return e.prototype={constructor:e,doLayout:function(){this.zoomToolEnabled()&&this._setComponentBounds(r.BOTTOM,n)},fixBoundsByPlot:function(){var t=this.vanchart.getPlotBounds(),e=t.y+t.height,i=this.vanchart.getComponent(r.X_AXIS_COMPONENT);i&&i._axisList.length&&i._axisList.forEach(function(t){t.getPosition()==r.BOTTOM&&(e=Math.max(e,t.bounds.y+t.bounds.height))}),this.bounds=a.makeBounds(t.x,e,t.width,n)},getRevisedDomain:function(){var t={from:this.componentOption.zoomTool.from,to:this.componentOption.zoomTool.to},e=this.vanchart.xAxis();if(e.type===r.VALUE_AXIS_COMPONENT||e.type===r.DATE_AXIS_COMPONENT){var i=[this.componentOption.zoomTool.from,this.componentOption.zoomTool.to];e.type===r.DATE_AXIS_COMPONENT&&(i[0]=a.date2int(i[0]),i[1]=a.date2int(i[1])),t.from=Math.min.apply(null,i),t.to=Math.max.apply(null,i);var n=e.getOriginalDomain();t.from=Math.max(t.from,n.minValue),t.to=Math.min(t.to,n.maxValue)}return t},zoomToolEnabled:function(){var t=this.option.xAxis;return t&&(t=t[0]||t),this.componentOption&&this.componentOption.zoomTool&&this.componentOption.zoomTool.visible&&!this.option.dataSheet&&!this.option.plotOptions.force&&t},resizable:function(){return this.componentOption&&this.componentOption.zoomTool&&this.componentOption.zoomTool.resize},getZoomBarWidth:function(){return s},getZoomBarHeight:function(){return n},_getAxisScale:function(){var t=this.vanchart.xAxis(),e=t.scale.copy();if(t.type==r.CATEGORY_AXIS_COMPONENT)e.rangeBand?e.rangeBands(t._getRange()):e.range(t._getRange());else{var i=t.getOriginalDomain();e.domain([i.minValue,i.maxValue])}return e},getStartX:function(){var t=this.getRevisedDomain(),e=0,i=this._getAxisScale();if(t.from&&!t.to)e=i(t.from),e=isNaN(e)?0:e;else if(t.from&&t.to)return this._getMinX();return e},getEndX:function(){var t=this.getRevisedDomain(),e=this.bounds.width,i=this._getAxisScale();if(t.to&&!t.from)e=i(t.to)+(i.rangeBand?i.rangeBand():0),e=isNaN(e)?this.bounds.width:e;else if(t.to&&t.from)return this._getMaxX();return e},_getMinX:function(){var t=this.getRevisedDomain();if(t.from&&t.to){var e=this._getAxisScale(),i=e(t.from),a=e(t.to),r=Math.min(i,a);return isNaN(r)?0:r}},_getMaxX:function(){var t=this.getRevisedDomain();if(t.from&&t.to){var e=this._getAxisScale(),i=e(t.from),a=e(t.to),r=Math.max(i,a)+(e.rangeBand?e.rangeBand():0);return isNaN(r)?this.bounds.width:r}},getBoundsEndX:function(){return this.bounds.width}},a.inherit(e,i),t("../ComponentLibrary").register(r.ZOOM_COMPONENT,e),e}),i("component/DataSheet",["require","./Base","../utils/BaseUtils","../utils/Formatter","../Constants","../render/LegendIconFactory","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=(t("../utils/Formatter"),t("../Constants")),n=t("../render/LegendIconFactory"),s=4,o=2,l=18,h={color:"#666666",fontSize:"14px",fontFamily:"Verdana"};return e.prototype={constructor:e,doLayout:function(){this.remove();var t=this.vanchart.getPlotBounds(),e=Math.round(this.getSeriesNameLength());this._clipPlotBounds(r.LEFT,Math.max(e-t.x,0)),this._setComponentBounds(r.BOTTOM,this.getDataSheetHeight())},fixBoundsByPlot:function(){var t=this.vanchart.getPlotBounds();this.bounds={x:t.x-this.maxSeriesWidth,y:t.y+t.height,width:this.maxSeriesWidth+t.width,height:this.sheetHeight}},getSeriesNameLength:function(){this.seriesNames=[],this.maxSeriesLine=[];for(var t=this.option.series,e=this._seriesStyle(),i=this.vanchart.getChartBounds().width/4-(l+2*o),r=0,h=0,c=0,d=t.length;d>c;c++){this.maxSeriesLine[c]=0;var u=t[c],g=a.getTextDimension(u.name,e,!1).width+2*s;if(g>i){var f=a.splitText(u.name,e,i,s);this.maxSeriesLine[c]=f.length,this.seriesNames.push(f),r=i}else this.maxSeriesLine[c]=1,this.seriesNames.push([u.name]),r=Math.max(g,r);var p=this.getLegendIconTypeWithSeriesIndex(c);h=Math.max(h,n.getLegendIconSize(p).width)}return this.maxSeriesWidth=Math.ceil(r+2*o+h),this.maxSeriesWidth+s},getLegendIconTypeWithSeriesIndex:function(t){return this._getLegendType(this.vanchart.series[t])},getDataSheetHeight:function(){this.maxCateLine=0,this.categoryNames=[],this.values=[],this.maxValueLine=[];var t=this.vanchart.xAxis(),e=t.getCategories();t.isAxisReversed()&&(e=a.clone(e).reverse());var i=this._categoryStyle(),r=this.vanchart.getPlotBounds().width/e.length,n=this;e.forEach(function(t){var e=a.splitText(t,i,r,s);n.maxCateLine=Math.max(n.maxCateLine,e.length),n.categoryNames.push(e)});for(var o=this._valueStyle(),l=this.componentOption.formatter,h=this.vanchart.series,c=0,d=h.length;d>c;c++){var u=[];this.values.push(u),this.maxValueLine[c]=0;for(var g=h[c],f=0,p=g.points.length;p>f;f++){var m=g.points[f],v=m.value,_=m.isNull?"-":this._getTickContent(v,l),y=a.splitText(_,o,r,s);u[a.indexInArray(e,m.category)]=y,this.maxValueLine[c]=Math.max(this.maxValueLine[c],y.length)}}for(var b=this.getCategoryHeight(),x=0,c=0,d=h.length;d>c;c++)x+=this.getSeriesHeight(c);return this.sheetHeight=Math.ceil(b+x),this.sheetHeight},_categoryStyle:function(){return this.option.xAxis.labelStyle||this.option.xAxis[0].labelStyle||h},_seriesStyle:function(){return this.option.legend?this.option.legend.style:h},_valueStyle:function(){return this.componentOption.style},getCategoryHeight:function(){var t=this._categoryStyle();return 2*s+this.maxCateLine*a.getTextHeight(t)+(this.maxCateLine-1)*s},getSeriesHeight:function(t){var e=a.getTextHeight(this._seriesStyle()),i=a.getTextHeight(this._valueStyle()),r=this.maxSeriesLine[t],n=2*s+r*e+(r-1)*s,o=this.maxValueLine[t],l=2*s+o*i+(o-1)*s;return Math.max(n,l)},getMaxSeriesWidth:function(){return this.maxSeriesWidth},getTextPadding:function(){return s}},a.inherit(e,i),t("../ComponentLibrary").register(r.DATA_SHEET_COMPONENT,e),e}),i("component/RangeLegend",["require","./Base","../utils/BaseUtils","../Constants","../utils/ColorUtils","../utils/QueryUtils","../utils/Formatter","../ComponentLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./Base"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=(t("../utils/ColorUtils"),t("../utils/QueryUtils"),t("../utils/Formatter")),s=10,o=15,l=100,h=15,c=10,d=5,u=25,g=2;return e.prototype={constructor:e,_refresh:function(){this._mergeAttr()},doLayout:function(){this.isIntervalLegend&&this._setItemsPoints();var t=this._calculateUsedSize();this._setComponentBounds(this.componentOption.position||r.RIGHT_TOP,t),this._calculateRangeLegendFinalBounds(t)},_mergeAttr:function(){if(!this.vanchart.isZoomRefreshState()){var t=this.componentOption.range,e=this;if(this.isIntervalLegend=a.isArray(t),this.isIntervalLegend){var i=this.componentOption.hiddenColor,r=this.componentOption.hoverColor,n=this.componentOption.formatter;this.items=[],t.forEach(function(t){var a=e._getIntervalLabelContent(t.from,t.to,n);e.items.push({from:t.from,to:t.to,color:t.color,label:a,points:[],visible:!0,hiddenColor:i,hoverColor:r})}),this.items.sort(function(t,i){var a=Math.min(t.from,t.to),r=Math.min(i.from,i.to);return e.isHorizontal()?a-r:r-a})}else{this.min=a.pick(t.min,0),this.max=a.pick(t.max,100),this.valueAndColors=t.color,this.valueAndColors.sort(function(t,e){return t[0]-e[0]});for(var s=[],o=[],l=0,h=this.valueAndColors.length;h>l;l++)s[l]=this.valueAndColors[l][0],o[l]=this.valueAndColors[l][1];this.valueScale=d3.scale.linear().domain([this.min,this.max]).range([0,1]),this.colorScale=d3.scale.linear().domain(s).range(o)}}},_getIntervalLabelContent:function(t,e,i){return i?n.format({from:t,to:e},i):t+"-"+e},_getGradientMinLabelContent:function(){return this._getGradientLabelWithFormatter(this.min)},_getGradientMaxLabelContent:function(){return this._getGradientLabelWithFormatter(this.max)},_getGradientLabelWithFormatter:function(t){var e=this.componentOption.formatter;return e?n.format(t,e):t},getValueAndColors:function(){return this.valueAndColors},getGradientLabelContent:function(t){return this._getGradientLabelWithFormatter(this._gradientScale(t))},_gradientScale:function(t){var e=a.accDiv(a.accAdd(this.max,-this.min),l);return t=a.accMul(e,this.isHorizontal()?t:l-t),t=a.accAdd(t,this.min)},getColorWithSize:function(t){if(this.isIntervalLegend){var e=this._getPointItem(t);return e?e.color:null}return t>=this.min&&t<=this.max?this.colorScale(this.valueScale(t)):null},_setItemsPoints:function(){var t=this,e=this.vanchart.series;e.forEach(function(e){var i=e.points;i.forEach(function(e){var i=e.size,a=t._getPointItem(i);a&&a.points.push(e)})})},_getPointItem:function(t){for(var e=0,i=this.items.length;i>e;e++){var a=this.items[e],r=Math.min(a.from,a.to),n=Math.max(a.from,a.to);if(t>=r&&n>=t)return a}},_calculateUsedSize:function(){var t=this.componentOption,e=t.position||r.RIGHT,i=4*s;if(e==r.TOP||e==r.BOTTOM){var a=this._maxHeight();return i+=this.isIntervalLegend?this._calculateIntervalTopAndBottomSize():this._calculateGradientTopAndBottomSize(),t.maxHeight?Math.min(i,a):i}var a=this._maxWidth();return i+=this.isIntervalLegend?this._calculateIntervalLeftAndRightSize():this._calculateGradientLeftAndRightSize(),t.maxWidth?Math.min(i,a):i},_calculateGradientTopAndBottomSize:function(){var t=o+h+d,e=a.getTextDimension(this._getGradientMinLabelContent(),this.componentOption.style);return t+e.height},_calculateGradientLeftAndRightSize:function(){var t=o+h+d,e=a.getTextDimension(this._getGradientMinLabelContent(),this.componentOption.style),i=a.getTextDimension(this._getGradientMaxLabelContent(),this.componentOption.style);return t+Math.max(e.width,i.width)},_calculateIntervalTopAndBottomSize:function(){var t=o+2*d,e=a.getTextDimension("0",this.componentOption.style);return t+2*e.height},_calculateIntervalLeftAndRightSize:function(){var t=0,e=this.componentOption.style;return this.items.forEach(function(i){var r=a.getTextDimension(i.label,e);t=Math.max(t,r.width)}),t+o+d},_calculateRangeLegendFinalBounds:function(){var t=this.componentOption,e=t.position||r.RIGHT,i=2*s;if(e==r.TOP||e==r.BOTTOM?(i+=this.isIntervalLegend?this._calculateIntervalTopAndBottomFinalSize():this._calculateGradientTopAndBottomFinalSize(),i=Math.max(this.bounds.width-i,0),this.bounds.x+=i/2,this.bounds.width-=i):e==r.LEFT||e==r.RIGHT?(i+=this.isIntervalLegend?this._calculateIntervalLeftAndRightFinalSize():this._calculateGradientLeftAndRightFinalSize(),i=Math.max(this.bounds.height-i,0),this.bounds.y+=i/2,this.bounds.height-=i):e==r.RIGHT_TOP&&(i+=this.isIntervalLegend?this._calculateIntervalLeftAndRightFinalSize():this._calculateGradientLeftAndRightFinalSize(),this.bounds.height=i),!this.isFloat){var a=this.componentOption.borderWidth+2*s;if(this.bounds.x+=a/2,this.bounds.y+=a/2,this.bounds.width-=a,this.bounds.height-=a,e==r.BOTTOM){var n=this.vanchart.getComponent(r.ZOOM_COMPONENT);n&&n.zoomToolEnabled()&&(this.bounds.y+=n.bounds.height)}if(e==r.RIGHT||e==r.RIGHT_TOP){var o=this.vanchart.getToolbarHeight();this.bounds.y+=o,this.bounds.height-=o}}},_calculateGradientTopAndBottomFinalSize:function(){var t=a.getTextDimension(this._getGradientMinLabelContent(),this.componentOption.style),e=a.getTextDimension(this._getGradientMaxLabelContent(),this.componentOption.style),i=Math.max(t.width,e.width,c);return l+2*i},_calculateGradientLeftAndRightFinalSize:function(){var t=a.getTextDimension(this._getGradientMinLabelContent(),this.componentOption.style),e=Math.max(t.height/2,c/2);return e*=2,l+2*e},_calculateIntervalTopAndBottomFinalSize:function(){var t=this.items.length;if(t>0){var e=a.getTextDimension(this.items[0].label,this.componentOption.style),i=a.getTextDimension(this.items[t-1].label,this.componentOption.style),r=Math.max(0,e.width-u,i.width-u);return t*u+(t-1)*g+r}return 0},_calculateIntervalLeftAndRightFinalSize:function(){var t=this.items.length;if(t>0){var e=a.getTextDimension(this.items[0].label,this.componentOption.style),i=a.getTextDimension(this.items[t-1].label,this.componentOption.style),r=Math.max(0,e.height-u,i.height-u);return t*u+(t-1)*g+r}return 0},getTopBarPath:function(){return"M7.236,10H13c1.105,0,2-0.895,2-2V2c0-1.105-0.895-2-2-2L2.618,0C1.875,0,1.391,0.782,1.724,1.447l3.724,7.447C5.786,9.572,6.479,10,7.236,10z"},getBottomBarPath:function(){return"M7.236,0L13,0c1.105,0,2,0.895,2,2v6c0,1.105-0.895,2-2,2H2.618c-0.743,0-1.227-0.782-0.894-1.447l3.724-7.447C5.786,0.428,6.479,0,7.236,0z"},getLeftBarPath:function(){return"M0,7.236V13c0,1.105,0.895,2,2,2h6c1.105,0,2-0.895,2-2V2.618c0-0.743-0.782-1.227-1.447-0.894L1.106,5.447C0.428,5.786,0,6.479,0,7.236z"},getRightBarPath:function(){return"M10,7.236V13c0,1.105-0.895,2-2,2H2c-1.105,0-2-0.895-2-2L0,2.618c0-0.743,0.782-1.227,1.447-0.894l7.447,3.724C9.572,5.786,10,6.479,10,7.236z"},refreshPoints:function(t,e){var i=this._gradientScale(t),a=this._gradientScale(e),r=this.vanchart,n=!1;r.series.forEach(function(t){t.points.forEach(function(t){var e=t.visible;t.visible=t.size>=i&&t.size<=a||t.size>=a&&t.size<=i,n=n||e!=t.visible})}),n&&r.renderOnlyCharts()}},a.inherit(e,i),t("../ComponentLibrary").register(r.RANGE_LEGEND_COMPONENT,e),e}),i("theme/default",[],function(){var t={colors:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86","#9987ce"],plotOptions:{visible:!0,dataLabels:{enabled:!1}},tooltip:{enabled:!0},tools:{enabled:!0,hidden:!1},legend:{hiddenColor:"#cccccc",hoverColor:"green",style:{color:"#666666",fontFamily:"Verdana",fontSize:"14px"},position:"right"},rangeLegend:{hiddenColor:"#cccccc",hoverColor:"green",style:{color:"#666666",fontFamily:"Verdana",fontSize:"14px"},position:"right",enabled:!1},backgroundColor:null,backgroundImage:null,borderColor:"#CCCCCC",borderWidth:0,borderRadius:0,shadow:!1,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderColor:"#CCCCCC",plotBorderWidth:0,plotBorderRadius:0,plotShadow:!1};return t}),i("VanChart",["require","./utils/BaseUtils","./utils/QueryUtils","./ComponentLibrary","./ChartLibrary","./Constants","./render/RenderFactory","./Handler","./component/Series","./component/Title","./component/DrillTools","./component/Axis","./component/Geo","./component/CategoryAxis","./component/ValueAxis","./component/DateAxis","./component/Polar","./component/Legend","./component/Tooltip","./component/Toolbar","./component/ZoomBar","./component/DataSheet","./component/RangeLegend","./theme/config","./theme/default"],function(t){function e(t,e,i){this.width=this._getDomWidth(e),this.height=this._getDomHeight(e),e=this._initLeafLet(t,e),t.state=s.STATE_INIT,this.ID_PREFIX=e.getAttribute(s.INSTANCES_KEY)+i.charts.length,this.dom=e,this.dom.style.cssText+=";-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",this.dom.onselectstart=this.dom.ondrag=function(){return!1},this.vancharts=i,this.handler=new l(this),this.render=o.getRender(s.VANCHART,this),this.components={},this.charts={},this.series=[],this.colorMap={},this.refresh(t)}var i=t("./utils/BaseUtils"),a=t("./utils/QueryUtils"),r=t("./ComponentLibrary"),n=t("./ChartLibrary"),s=t("./Constants"),o=t("./render/RenderFactory"),l=t("./Handler"),h=t("./component/Series"),c=[s.GEO_COMPONENT,s.TOOLBAR_COMPONENT,s.TITLE_COMPONENT,s.DRILL_TOOLS,s.LEGEND_COMPONENT,s.RANGE_LEGEND_COMPONENT,s.Y_AXIS_COMPONENT,s.X_AXIS_COMPONENT,s.POLAR_COMPONENT,s.RADIUS_AXIS_COMPONENT,s.ANGLE_AXIS_COMPONENT,s.GAUGE_AXIS_COMPONENT,s.ZOOM_COMPONENT,s.DATA_SHEET_COMPONENT,s.TOOLTIP_COMPONENT],d=[s.X_AXIS_COMPONENT,s.Y_AXIS_COMPONENT,s.POLAR_COMPONENT,s.RADIUS_AXIS_COMPONENT,s.ANGLE_AXIS_COMPONENT,s.GAUGE_AXIS_COMPONENT],u=5;return t("./component/Title"),t("./component/DrillTools"),t("./component/Axis"),t("./component/Geo"),t("./component/CategoryAxis"),t("./component/ValueAxis"),t("./component/DateAxis"),t("./component/Polar"),t("./component/Legend"),t("./component/Tooltip"),t("./component/Toolbar"),t("./component/ZoomBar"),t("./component/DataSheet"),t("./component/RangeLegend"),e.prototype={constructor:e,componentType:s.VANCHART,_initLeafLet:function(t,e){return t.chartType==s.MAP_CHART&&(this._leaflet=this._leaflet||L.map(e,{zoomControl:!1,doubleClickZoom:!1}),e=e.getElementsByClassName("leaflet-control-container")[0]),e},refresh:function(t){this._init(t),this._refreshOptions()},refreshRestore:function(){this.currentOption=i.clone(this.restoreOption),this.currentOption.state=s.STATE_RESTORE_REFRESH,this.scale=1,this._refreshOptions()},isInitOrRestoreState:function(){return this.currentOption.state==s.STATE_INIT||this.currentOption.state==s.STATE_RESTORE_REFRESH},isChangeDataState:function(){return this.currentOption.state==s.STATE_CHANGE_DATA_REFRESH},isZoomRefreshState:function(){return this.currentOption.state==s.STATE_ZOOM_REFRESH},dealAxisZoom:function(t,e){var a=this.getChart(s.BUBBLE_CHART);if(a&&a.isForceBubble()){
var r=a.isUpdateWithForce();r&&a.render.force.stop();var n=this.getPlotBounds(),o=Math.min(t[0],e[0])-n.x,l=Math.min(t[1],e[1])-n.y,h=Math.abs(t[0]-e[0]),c=Math.abs(t[1]-e[1]),d=Math.min(n.width/h,n.height/c),u=n.width/d,g=n.height/d,f=(n.width-u)/2-o,p=(n.height-g)/2-l,m=a.getVisibleChartData();m.forEach(function(t){t.points.forEach(function(t){t.radius*=d;var e=t.x+f,i=t.y+p;if(e-=n.width/2,i-=n.height/2,t.x=e*d+n.width/2-f,t.y=i*d+n.height/2-p,r||(t.posX=t.x,t.posY=t.y),t.labelContent&&t.labelDim){var a=t.radius;t.labelDim.width>2*a||t.labelDim.height>2*a?t.labelPos=null:t.labelPos={x:-t.labelDim.width/2+(r?0:t.posX),y:-t.labelDim.height/2+(r?0:t.posY)}}})}),this.scale=d*i.pick(this.scale,1),a.render.scaleRender()}else{this.currentOption.state=s.STATE_ZOOM_REFRESH;var v=this.currentOption.zoom.zoomType;this.components.xAxis&&-1!=v.indexOf("x")&&this.components.xAxis.axisZoom(t,e),this.components.yAxis&&-1!=v.indexOf("y")&&this.components.yAxis.axisZoom(t,e),this.layoutComponentsAndCharts()}},refreshIncreaseOrder:function(){this.currentOption.orderType=s.ASCENDING;for(var t in this.charts)this.charts[t].orderData();this.layoutComponentsAndCharts()},refreshDecreaseOrder:function(){this.currentOption.orderType=s.DESCENDING;for(var t in this.charts)this.charts[t].orderData();this.layoutComponentsAndCharts()},_refreshOptions:function(){this.series=[];for(var t,e,a,o=this.currentOption,l=0;l<c.length;l++)e=c[l],a=this.components[e],o[e]?a?a.refresh(o):this._isComponentEnabled(o[e])&&(t=r.get(d.indexOf(e)>-1?s.AXIS_COMPONENT:e),a=new t(this,o,e),this.components[e]=a):a&&(a.remove(),this.components[e]=null,delete this.components[e]);for(var g,f=o.chartType||s.LINE_CHART,l=0,p=o.series.length;p>l;l++){var m=o.series[l],v=m.type||f;if(g=n.get(v)){var _=this.charts[v];_?_.refresh(o):(_=new g(this,o,v),this.charts[v]=_),this.series.push(new h(_,m,l))}}this.bounds=i.makeBounds(u,u,this.width-3*u,this.height-3*u);var y=this.components[s.ZOOM_COMPONENT];y&&(y.doLayout(),y.remove());var b=this.charts[s.MAP_CHART];b&&b.initLayerInfo(),this.plotBounds=this.bounds,this.refreshComponentsAndSeries()},refreshComponentsAndSeries:function(){for(var t in this.components)this.components[t].initAttributesWithSeries();this.layoutComponentsAndCharts()},layoutComponentsAndCharts:function(){this.bounds=i.clone(this.plotBounds);for(var t in this.components)t!=s.ZOOM_COMPONENT&&this.components[t].doLayout();var e=this.components;[s.GAUGE_AXIS_COMPONENT,s.Y_AXIS_COMPONENT,s.X_AXIS_COMPONENT,s.ZOOM_COMPONENT,s.DATA_SHEET_COMPONENT].forEach(function(t){var i=e[t];i&&i.fixBoundsByPlot()}),[s.RADIUS_AXIS_COMPONENT,s.ANGLE_AXIS_COMPONENT].forEach(function(t){var i=e[t];i&&i.calculateTickData()}),[s.Y_AXIS_COMPONENT,s.X_AXIS_COMPONENT].forEach(function(t){var i=e[t];i&&i.dealOnZero()});for(var a in this.charts)this.charts[a].getRender()&&this.charts[a].doLayout();this.render.render()},_init:function(t){if(t.series=t.series&&t.series.length?t.series:[{}],t.series.forEach(function(t){t.data=t.data||[]}),this.themeConfig=this._normalizeOption(this._mergeThemeConfig(t),t),this.restoreOption=a.merge(i.clone(t),this.themeConfig,!1),this.restoreOption.chartType==s.SCATTER_CHART||this.restoreOption.chartType==s.BUBBLE_CHART){var e=this.restoreOption.tools.sort||{};e.enabled=!1}this.currentOption=i.clone(this.restoreOption)},renderOnlyCharts:function(){var t=this.getChart(s.BUBBLE_CHART);t&&t.isUpdateWithForce()&&t.render.force.stop();for(var e in this.charts)this.charts[e].doLayout();var a=this.getChartRenders();if(a.forEach(function(t){t.filterRender()}),!i.isSupportSVG()){var r=this.components;c.forEach(function(t){if(r[t]){var e=r[t];if(e.isFloat){var i=e.getRender();i&&i.render()}}})}},_getDomWidth:function(t){var e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0},_getDomHeight:function(t){var e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0},_normalizeOption:function(t,e){return t=i.clone(t),d.map(function(i){return e[i]?(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].length?t[i]=e[i].map(function(){return t[i]}):t[i]&&(e[i][0]=t[i]),null):void 0}),t},_mergeThemeConfig:function(e){var i=t("./theme/config"),r=t("./theme/default"),n=[],s={};return e.chartType&&(n.push(e.chartType),a.merge(s,i[e.chartType],!0)),e.series.map(function(t){var e=t.type;e&&-1===n.indexOf(e)&&a.merge(s,i[e],!0)}),a.merge(s,r,!0),s},_isComponentEnabled:function(t){return i.hasDefined(t.enabled)?t.enabled:!0},getPlotBackgroundOption:function(){var t=this.currentOption;return{color:t.plotBackgroundColor,image:t.plotBackgroundImage,borderColor:t.plotBorderColor,borderWidth:t.plotBorderWidth,borderRadius:t.plotBorderRadius,plotShadow:t.plotShadow}},getChartBackgroundOption:function(){var t=this.currentOption;return{color:t.backgroundColor,image:t.backgroundImage,borderColor:t.borderColor,borderWidth:t.borderWidth,borderRadius:t.borderRadius,chartShadow:t.shadow}},getTrendLineOption:function(){for(var t=[],e=this.series,i=0,a=e.length;a>i;i++){var r=e[i],n=r.trendLine;if(n&&r.visible){var o=r.chart.getTrendLineXYValues(r),l=o[0],h=o[1],c=o[2];if(!(l.length<=1)){var d,u,g,f;if(c==s.TOP||c==s.BOTTOM){var p=this._leastSquares(o[0],o[1]);d=l[0],g=p[0]*d+p[1],u=l[l.length-1],f=p[0]*u+p[1]}else{var p=this._leastSquares(o[1],o[0]);g=h[0],d=p[0]*g+p[1],f=h[h.length-1],u=p[0]*f+p[1]}t.push({x1:d,y1:g,x2:u,y2:f,trendLine:n})}}}return t},_leastSquares:function(t,e){var i=function(t,e){return t+e},a=1*t.reduce(i)/t.length,r=1*e.reduce(i)/e.length,n=t.map(function(t){return Math.pow(t-a,2)}).reduce(i),s=(e.map(function(t){return Math.pow(t-r,2)}).reduce(i),t.map(function(t,i){return(t-a)*(e[i]-r)}).reduce(i)),o=s/n,l=r-a*o;return[o,l]},getParentDom:function(){return this.dom},chartWidth:function(){return this.width},chartHeight:function(){return this.height},setPlotBounds:function(t){this.bounds=t},getPlotClipBounds:function(){var t=0,e=0,i=this.bounds.width,a=this.bounds.height,r={},n=[];return this.components.xAxis&&(n=n.concat(this.components.xAxis.getAllAxis())),this.components.yAxis&&(n=n.concat(this.components.yAxis.getAllAxis())),n.forEach(function(t){var e=t.getPosition();t.isOnZero()||r[e]||(r[e]=t.getLineWidth())}),e=r[s.TOP]?Math.ceil(r[s.TOP]/2):0,a-=e,a=r[s.BOTTOM]?a-Math.ceil(r[s.BOTTOM]/2-.5):a,t=r[s.LEFT]?Math.ceil(r[s.LEFT]/2):0,i-=t,i=r[s.RIGHT]?i-Math.ceil(r[s.RIGHT]/2):i,{x:t,y:e,width:i,height:a}},getPlotBounds:function(){return this.bounds},getChartBounds:function(){return i.makeBounds(0,0,this.width,this.height)},xAxis:function(t){t||(t=0);var e=this.components.xAxis;return e?e.getAxis(t):null},yAxis:function(t){t||(t=0);var e=this.components.yAxis;return e?e.getAxis(t):null},polar:function(t){t||(t=0);var e=this.components.polar;return e?e.getAxis(t):null},angleAxis:function(t){t||(t=0);var e=this.components.angleAxis;return e?e.getAxis(t):null},radiusAxis:function(t){t||(t=0);var e=this.components.radiusAxis;return e?e.getAxis(t):null},gaugeAxis:function(t){t||(t=0);var e=this.components.gaugeAxis;return e?e.getAxis(t):null},getRender:function(){return this.render},getChartRenders:function(){var t=[];for(var e in this.charts){var i=this.charts[e].getRender();i&&t.push(i)}return t},getComponentRenders:function(){var t=[],e=this.components;return c.forEach(function(i){if(e[i]){var a=e[i].getRender();a&&t.push(a)}}),t},getFixedComponentRenders:function(){var t=[],e=this.components;return c.forEach(function(i){if(e[i]){var a=e[i];if(!a.isFloat){var r=a.getRender();r&&t.push(r)}}}),t},getFloatComponentRenders:function(){var t=[],e=this.components;return c.forEach(function(i){if(e[i]){var a=e[i];if(a.isFloat){var r=a.getRender();r&&t.push(r)}}}),t},getToolbarWidth:function(){return this.components[s.TOOLBAR_COMPONENT]?this.components[s.TOOLBAR_COMPONENT].getToolbarWidth():0},getToolbarHeight:function(){var t=this.components[s.TITLE_COMPONENT];return!this.components[s.TOOLBAR_COMPONENT]||t&&!t.isFloat?0:this.components[s.TOOLBAR_COMPONENT].getToolbarHeight()},getComponent:function(t){return this.components[t]},getChart:function(t){return this.charts[t]},getIDPrefix:function(){return this.ID_PREFIX},getBodyClipID:function(){return"bodyClip"+this.getIDPrefix()},getOptions:function(){return this.currentOption},getDefaultSeriesColor:function(t){if("string"!=typeof t)throw new TypeError(t);if(!this.colorMap[t]){var e=this.currentOption.colors,i=0;for(var a in this.colorMap)++i;this.colorMap[t]=e[i%e.length]}return this.colorMap[t]},remove:function(){this.render.remove(),this.components[s.TOOLTIP_COMPONENT]&&this.components[s.TOOLTIP_COMPONENT].remove()}},e}),i("VanCharts",["require","./utils/BaseUtils","./Constants","./VanChart"],function(t){function e(t){var e=t.getAttribute(r.INSTANCES_KEY);if(e||(e=r.INSTANCES_KEY+s++,t.setAttribute(r.INSTANCES_KEY,e)),o[e]){var a=o[e].svgRoot;a&&a.remove()}else{var n=new i(t);o[e]=n}return o[e]}function i(t){this.dom=t,this.charts=[]}var a=t("./utils/BaseUtils"),r=t("./Constants"),n=t("./VanChart"),s=0,o=Object.create(null);return i.prototype={constructor:i,setOptions:function(t){a.isArray(t)||(t=[t]),this.options=t;for(var e=0,i=t.length;i>e;e++)this.charts.push(new n(t[e],this.dom,this))},resize:function(t){this.clear(),this.charts=[],t=t||this.options,this.options=t,this.setOptions(t)},setData:function(t){a.isSupportSVG()?this.charts.forEach(function(e){t.state=r.STATE_CHANGE_DATA_REFRESH,e.refresh(t)}):this.resize(t)},clear:function(){for(var t=0,e=this.charts.length;e>t;t++)this.charts[t].remove(),this.charts[t]=null}},{init:e}}),i("utils/BaseUtils",["require","./ColorUtils","../Constants","VanCharts"],function(t){function e(t,e){function i(){}var a=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in a)t.prototype[r]=a[r];t.constructor=t}function i(){for(var t,e=arguments.length,i=0;e>i;i++)if(t=arguments[i],"undefined"!=typeof t&&null!==t)return t;return null}function a(t){return"[object Array]"===Object.prototype.toString.apply(t)}function r(t,e){e=g(e);for(var i in e)t.style(i,e[i])}function n(t,e,a){t=i(t,"");var r=document.createElement("div");document.body.appendChild(r),r.style.visibility="hidden",r.style.whiteSpace="nowrap",r.style.position="absolute";var n="12px";for(var s in e)"function"!=typeof e[s]&&"color"!=s&&(r.style[s]=e[s]),"fontSize"==s&&(n=e[s]);n=-1!=n.indexOf("pt")?4*parseFloat(n)/3:parseFloat(n),r.innerHTML=t;var o=r.offsetWidth||0,l=r.offsetHeight||0;return document.body.removeChild(r),{width:o,height:l}}function s(t,e,a){t=i(t,"");var r=document.createElement("div");document.body.appendChild(r),r.style.visibility="hidden",r.style.whiteSpace="normal",r.style.position="absolute",r.style.wordWrap="break-word";for(var n in e)"function"!=typeof e[n]&&"color"!=n&&(r.style[n]=e[n]);a?r.innerHTML=t:r.textContent?r.textContent=t:r.innerText=t;var s=r.offsetWidth||0,o=r.offsetHeight||0;return document.body.removeChild(r),{width:s,height:o}}function o(t){var e=t.fontSize||"12px";return-1!=e.indexOf("pt")?4*parseFloat(e)/3:parseFloat(e)}function l(t){return t._vanchart_id=t._vanchart_id||++lt,t._vanchart_id}function h(t,e){var i=[];i.push("transform:rotate("+e+"deg)"),i.push("-ms-transform:rotate("+e+"deg)"),i.push("-webkit-transform:rotate("+e+"deg)"),i.push("-moz-transform:rotate("+e+"deg)"),i.push("-o-transform:rotate("+e+"deg)");var a=Math.cos(O(e)),r=Math.sin(O(e)),n=e?["progid:DXImageTransform.Microsoft.Matrix(M11=",a,", M12=",-r,", M21=",r,", M22=",a,", sizingMethod='auto expand')"].join(""):"none";i.push("filter:"+n),t.style.cssText+=i.join(";")+";"}function c(t,e,i,a){if(!t)return"";t+="",a=a||0,i-=2*a;for(var r=[],s=0,o=t.length;o>s;){for(var l=s;n(t.substring(l,s+1),e,!1).width<i&&(s++,!(s>=o)););if(l==s)return[];r.push(t.substring(l,s))}return r}function d(t,e,i,a){var r=n(t,e,i),s=Math.abs(O(a||0)),o=r.width*Math.cos(s)+r.height*Math.sin(s),l=r.width*Math.sin(s)+r.height*Math.cos(s);return{width:o,height:l}}function u(t){if("object"==typeof t&&null!==t){var e=t;if(a(t)){e=[];for(var i=0,r=t.length;r>i;i++)e[i]=u(t[i])}else{e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=u(t[n]))}return e}return t}function g(t){var e={};for(var i in t)if(ht[i]&&(e[ht[i]]=t[i]),"color"==i&&(e.color=t[i]),"fontSize"==i){var a=t[i];-1!=a.indexOf("pt")&&(a=4*parseFloat(a)/3,e["font-size"]=a+"px")}return e}function f(t){if(!(t instanceof Array))return[t,t,t,t];switch(t.length+""){case"4":return t;case"3":return[t[0],t[1],t[2],t[1]];case"2":return[t[0],t[1],t[0],t[1]];case"1":return[t[0],t[0],t[0],t[0]];case"0":return[0,0,0,0]}}function p(t,e){return e%2==0?Math.round(t):Math.round(t-.5)+.5}function m(t,e,i,a,r){return r=r||0,t=p(t,r),e=p(e,r),i=Math.round(i),a=Math.round(a),{x:t,y:e,width:i,height:a}}function v(t,e){var i=[];if(t&&t.length)for(var a=0,r=t.length;r>a;a++)i.push(t[a]);if(e&&e.length)for(var a=0,r=e.length;r>a;a++)i.push(e[a]);return i}function _(t){t&&t.parentNode&&t.parentNode.appendChild(t)}function y(t){t&&t.parentNode&&t.parentNode.insertBefore(t,t.parentNode.firstChild)}function b(t){t.ownerSVGElement.appendChild(t)}function x(t){t.ownerSVGElement.appendChild(t,t.ownerSVGElement.firstChild)}function C(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x+e.width&&t.y+t.height>=e.y+e.height}function L(t,e){if(!t||!e)return!1;var i=Math.max(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.x+t.width,e.x+e.width),n=Math.min(t.y+t.height,e.y+e.height);return r>=i&&n>=a}function A(t,e){return!C(t,e)&&!L(t,e)}function T(t,e){var a=i(e.x||e[0]),r=i(e.y||e[1]);return t.x<a&&t.x+t.width>a&&t.y<r&&t.y+t.height>r}function S(){return!!window.SVGSVGElement}function R(t,e,i){for(var a=Math.min(t,e),r=Math.max(t,e),n=r-a;a>i;)i+=n;for(;i>r;)i-=n;return i}function k(t,e){return Math.min(Math.max(t,e[0]),e[1])}function O(t){return Math.PI*(t/180)}function P(t){return 180*t/Math.PI}function E(t){return null==t||void 0==t?null:"string"==typeof t?new Function("return "+t)():t}function u(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],i=0,a=t.length;a>i;++i)e[i]=u(t[i]);return e}if(t instanceof String)return new String(t);if(t instanceof Object){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=u(t[r]));return e}}function M(t){var e=""===t||null===t||void 0===t;return e}function w(t){return void 0==t||null==t}function B(e){var i=t("VanCharts"),a=document.getElementsByTagName("body")[0],r=document.createElement("div");r.style.position="absolute",r.style.display="inline",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.zIndex=330,S()?r.style.background="rgba(0,0,0,0.3)":(r.style.backgroundColor="black",r.style.filter="alpha(opacity=30)"),a.appendChild(r);var n=r.clientWidth,s=r.clientHeight,o=970,l=600,h=(n-970)/2,c=(s-600)/2,d=document.createElement("div");d.style.position="absolute",d.style.display="inline",d.style.top=c+"px",d.style.left=h+"px",d.style.width=o+"px",d.style.height=l+"px",d.style.zIndex=331,S()?(d.style.background="white",d.style.boxShadow="0px 4px 50px rgba(0,0,0,0.5)"):(d.style.backgroundColor="white",d.style.filter="alpha(opacity=100)"),a.appendChild(d),r.onclick=function(t){a.removeChild(r),a.removeChild(d)},d.onclick=function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};var g=i.init(d),f=u(e);f.tools.exitFullScreen=f.tools.fullScreen,f.tools.fullScreen=null,f.legend&&(f.legend.initState=!1),g.setOptions(f),d.style.top=c+"px",d.style.left=h+"px",d.boxDiv=r}function I(t){var e=t.parentNode;e&&(e.removeChild(t),t.boxDiv&&e.removeChild(t.boxDiv))}function D(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1}function N(t){return null==t||void 0==t}function G(t){return!N(t)}function H(t,e){if(!t.length)return-1;for(var i=0,a=t.length;a>i;i++)if(t[i]==e)return i;return-1}function V(){var t=0,e=0,a=0,r=0;if(2==arguments.length){var n=arguments[0],s=arguments[1];t=i(n.x,n[0]),e=i(n.y,n[1]),a=i(s.width,s[0]),r=i(s.height,s[1])}else 4==arguments.length&&(t=arguments[0],e=arguments[1],a=arguments[2],r=arguments[3]);return{x:t,y:e,width:a,height:r}}function U(t,e){var a=i(t.x,t[0]),r=i(t.y,t[1]),n=i(e.x,e[0]),s=i(e.y,e[1]),o=a-n,l=r-s;return Math.sqrt(o*o+l*l)}function z(t){return t.width<=0||t.height<=0}function F(t,e){return Math.log(e)/Math.log(t)}function W(t,e){var i=0,a=0;try{i=t.toString().split(".")[1].length}catch(r){}try{a=e.toString().split(".")[1].length}catch(r){}var n=Math.pow(10,Math.max(i,a));return(Math.round(t*n)+Math.round(e*n))/n}function X(t,e){var i=t.toString(),a=e.toString(),r=0;try{r=a.split(".")[1].length}catch(n){}try{r-=i.split(".")[1].length}catch(n){}return(i.replace(".","")-0)/(a.replace(".","")-0)*Math.pow(10,r)}function q(t,e){var i=0,a=t.toString(),r=e.toString();try{i+=a.split(".")[1].length}catch(n){}try{i+=r.split(".")[1].length}catch(n){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,i)}function Y(t){var e=[];for(var i in t)e.push(t[i]);return e}function Z(t){"string"==typeof t&&(t=new Date(Date.parse(t.replace(/-|\./g,"/"))));var e=new Date("1970/01/01");return"number"==typeof t?t:t.getTime()-e.getTime()}function Q(t){var e=new Date("1970/01/01");return t=t||0,new Date(t+e.getTime())}function j(t){var e=t;return"string"==typeof e?e=new Date(Date.parse(e.replace(/-|\./g,"/"))):"number"==typeof e&&(e=new Date(e)),e}function K(t){var e=i(t.x,t[0]),a=i(t.y,t[1]);return S()?"translate("+e+","+a+")":"t"+e+","+a}function $(t){var e=ot.NULL_MARKER+ot.CIRCLE+ot.SQUARE+ot.DIAMOND+ot.TRIANGLE+ot.CIRCLE_HOLLOW+ot.SQUARE_HOLLOW+ot.DIAMOND_HOLLOW+ot.TRIANGLE_HOLLOW;return-1==e.indexOf(t)}function J(t){return t.symbol==ot.NULL_MARKER}function tt(t){var e=[ot.CIRCLE,ot.CIRCLE_HOLLOW,ot.SQUARE,ot.SQUARE_HOLLOW,ot.DIAMOND,ot.DIAMOND_HOLLOW,ot.TRIANGLE,ot.TRIANGLE_HOLLOW];return e[t%e.length]}function et(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener&&t.addEventListener(e,i,!1)}function it(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)}function at(t){return Math.abs(t)<1e-6?0:t}function rt(t,e){t=t||window.event,t=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t;var i,a,r=document.documentElement,n=e.getBoundingClientRect(),s=n.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||0),o=n.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0);return void 0==t.pageX?(i=Math.max(t.x,t.clientX-o),a=t.y):(i=t.pageX-o,a=t.pageY-s),[i,a]}function nt(){var t=window.document;return t&&void 0!==t.documentElement.ontouchstart}function st(t,e){return[t*Math.sin(e),-t*Math.cos(e)]}var ot=(t("./ColorUtils"),t("../Constants")),lt=0,ht={color:"fill",font:"font",fontFamily:"font-family",fontSize:"font-size",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",letterSpacing:"letter-spacing",lineHeight:"line-height",quotes:"quotes",textAlign:"text-align",textDecoration:"text-decoration",textIndent:"text-indent",textShadow:"text-shadow",textTransform:"text-transform",whiteSpace:"white-space",wordSpacing:"word-spacing",padding:"padding"};return{getMousePos:rt,makeTranslate:K,inherit:e,clone:u,date2int:Z,int2date:Q,object2date:j,log:F,accAdd:W,accDiv:X,accMul:q,dealFloatPrecision:at,isEmpty:M,isEmptyBounds:z,objectToArray:Y,pick:i,isNull:w,getTextDimension:n,getTextHeight:o,splitText:c,getTextDimensionWithRotation:d,isArray:a,indexInArray:H,cssNormalization:g,reformCssArray:f,rectSubPixelOpt:m,lineSubPixelOpt:p,addArray:v,toFront:_,toBack:y,toFrontOfAll:b,toBackOfAll:x,containsRect:C,rectangleOverlapped:L,outsideRect:A,containsPoint:T,isSupportSVG:S,setTextStyle:r,divRotate:h,makeValueInRange:R,getValueInDomain:k,toRadian:O,toDegree:P,getFormatterFunction:E,showLightBox:B,hideLightBox:I,isIE:D,hasTouch:nt,hasNotDefined:N,hasDefined:G,distance:U,makeBounds:V,isImageMarker:$,isNullMarker:J,getDefaultMarkerSymbol:tt,addEvent:et,removeEvent:it,getArcPoint:st,getTextWrapDimension:s,stamp:l}}),i("chart/BaseChart",["require","../utils/BaseUtils","../utils/QueryUtils","../utils/ColorUtils","../component/Base","../Constants","../component/Series","../utils/Formatter","../theme/options"],function(t){function e(t){return.5>t?Math.sqrt(t/2):1-Math.sqrt(2-2*t)/2}function i(t,e,i){n.call(this,t,e,i)}var a=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=(t("../utils/ColorUtils"),t("../component/Base")),s=t("../Constants"),o=(t("../component/Series"),t("../utils/Formatter")),l=t("../theme/options"),h="{SERIES}",c="{X}",d="{Y}",u="{SIZE}",g="CATEGORY",h="SERIES",f="VALUE",p="PERCENT";return i.prototype={constructor:i,_buildLocationMap:function(){for(var t={},e=this.vanchart.series,i=0;i<e.length;i++){var a=e[i];if(a.chart==this){var r=a.baseAxis,n=r.getPosition(),s=r.getAxisIndex();t[n]=t[n]||[],t[n][s]=t[n][s]||[],a.visible&&t[n][s].push(a)}}var o={},l={};for(var h in t){for(var c=[],d=t[h]||[],s=0;s<d.length;s++){var u=d[s];if(u&&u.length)for(var g=0,f=0;f<u.length;f++){var a=u[f],p=a.name;null!=a.stack&&void 0!=a.stack&&(p=a.stack+""),null!=o[p]&&void 0!=o[p]?c[s][o[p]].push(a):(o[p]=g,c[s]=c[s]||[],c[s][g]=[a],g++)}}var m=[];c.forEach(function(t){t&&m.push(t)}),l[h]=m}return l},_calculateValueBasedPercentageAndTooltip:function(t){for(var e=0,i=t.length;i>e;e++){for(var a=t[e],r={},n=0,s=a.length;s>n;n++)for(var o=a[n].points,l=0,h=o.length;h>l;l++){var c=o[l],d=c.category;r[d]=r[d]||[],r[d].push(c)}for(var d in r){var o=r[d];this._dealStackedPoints(o)}}},_calculateCategoryBasedPercentageAndTooltip:function(t){for(var e=[],i=0,a=t.length;a>i;i++){var r=t[i];if(r.length){var n=r[0],s=n.stack||n.stackByPercent;s?this.dealStackedSeries(r):e.push(r[0])}}this.dealStackedSeries(e)},_dealStackedPoints:function(t){this._calculatePercentage(t),this._mergeTooltipAttributes(t),this._calculateStackedValue(t)},dealStackedSeries:function(t){for(var e=[],i=0,a=t.length;a>i;i++)for(var r=t[i].points,n=0,s=r.length;s>n;n++)e[n]=e[n]||[],e[n].push(r[n]);var o=this;e.forEach(function(t){o._dealStackedPoints(t)})},mergeSeriesAttributes:function(t){},mergeDataPointAttributes:function(){},_hideTooltip:function(){var t=this.getTooltipComponent();t.hide()},_mergeMarkerAttributes:function(t){var i=t.pointOption,n=t.series.seriesOption,o=[i,n,this.option.plotOptions[this.componentType],this.option.plotOptions,l[this.componentType].plotOptions],h=a.clone(r.queryList(o,"marker"));a.isSupportSVG()&&!a.isIE()||!a.isImageMarker(h.symbol)||(h=a.clone(h),h.symbol=s.CIRCLE);var c=t.series.baseAxis,d=c?c.isAxisReversed():!1,u=t.series.getDataPointCount(),g=t.index;h.fillColor=this.vanchart.getDefaultSeriesColor(t.seriesName),a.hasDefined(this.option.plotOptions.marker)&&(h.fillColor=this.option.plotOptions.marker.fillColor||h.fillColor);var f=this.vanchart.getComponent(s.RANGE_LEGEND_COMPONENT);f&&(h.fillColor=f.getColorWithSize(this.isForceBubble()?t.y:t.size)||h.fillColor),h.fillColor=n.color||h.fillColor,a.hasDefined(n.marker)&&(h.fillColor=n.marker.fillColor||h.fillColor),h.fillColor=i.color||h.fillColor,a.hasDefined(i.marker)&&(h.fillColor=i.marker.fillColor||h.fillColor),r.merge(t,{marker:h,delay:800*e((d?u-g-1:g)/u)})},getTooltipPos:function(t,e,i){if(t&&t.tooltip){var a,r=t.tooltip||t.data.tooltip,n=this.getVanchartRender().getRenderRoot();if(r.follow){var s=i?this.getMousePos(i):d3.mouse(n.node());a=[s[0]+10,s[1]+10]}else a=this._getFixedPos(t,e);var o=this.vanchart.getChartBounds(),l=o.y,h=o.y+o.height,c=o.x,d=o.x+o.width,u=a[0],g=a[1];return c>u?u+=c-u:u+e.width>d&&(u-=u+e.width-d),l>g?g+=l-g:g+e.height>h&&(g-=g+e.height-h),[u,g]}},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},isSupportAnimation:function(){var t=this.option.plotOptions;return t?!!t.animation:!1},_calculatePercentage:function(t){var e=0;t.forEach(function(t){e+=Math.abs(t.value)}),e=e>0?e:1,t.forEach(function(t){t.setPercentage(Math.abs(t.value)/e)})},_calculateStackedValue:function(t){if(this.componentType!=s.BUBBLE_CHART&&t&&t.length)for(var e=t[0].series.stackByPercent,i=t[0].series.stack||e,a=0,r=0,n=0,o=t.length;o>n;n++){var l=t[n];if(i){var h=e?l.percentage:l.value;l.y=h,h>=0?(l.y0=a,a+=h):(l.y0=r,r+=h)}else{var c=l.series.valueAxis;l.y=e?l.percentage:l.value,l.y0=c?c.getStartPosValue():0}}},isForceBubble:function(){return this.option.plotOptions.force},isUpdateWithForce:function(){return this.isForceBubble()&&a.isSupportSVG()&&this.isSupportAnimation()},getNormalTrendLineXYValues:function(t){var e=[],i=[];return t.points.sort(function(t,e){return t.x-e.x}),t.points.forEach(function(t){t.isNull||(e.push(t.x),i.push(t.y))}),[e,i,s.BOTTOM]},getBubbleTrendLineXYValues:function(t){var e=[],i=[];return t.points.sort(function(t,e){return t.posX-e.posX}),t.points.forEach(function(t){t.isNull||(e.push(t.posX),i.push(t.posY))}),[e,i,s.BOTTOM]},makeChosenState:function(t){this.render&&this.render.makeChosenState(t)},cancelChosenState:function(t){this.render&&this.render.cancelChosenState(t)},makeClickedState:function(t){this.render&&this.render.makeClickedState(t)},cancelClickedState:function(t){this.render&&this.render.cancelClickedState(t)},onContainerMouseUp:function(){},onContainerMouseDown:function(){},getClosestPoint:function(){},makeSeriesChosenState:function(){},cancelSeriesChosenState:function(){},onContainerMouseMove:function(t){var e=this.getMousePos(t),i=this.getPlotBounds(),r=this.getClosestPoint(e);a.containsPoint(i,e)&&r&&(t=t||window.event,this.vanchart.handler.updateHoverPoint(r,t))},orderData:function(){var t=this.option.orderType,e=this._buildLocationMap();for(var i in e)for(var r=e[i],n=r.length-1;n>=0;n--){var o=r[n];if(o&&o.length&&o[0].length){var l=o[0][0],h=l.baseAxis;if(h.type!=s.CATEGORY_AXIS_COMPONENT)continue;for(var c={},d=0,u=o.length;u>d;d++)for(var g=o[d],f=0,p=g.length;p>f;f++)for(var l=g[f],m=0,v=l.points.length;v>m;m++){var _=l.points[m];a.hasNotDefined(c[_.category])&&(c[_.category]=0),c[_.category]+=_.value}var y=[];for(var b in c)y.push({key:b,value:c[b]});y.sort(function(e,i){return t==s.ASCENDING?e.value-i.value:i.value-e.value});var x=[];y.forEach(function(t){x.push(t.key)}),h.updateCategories(x);for(var d=0,u=o.length;u>d;d++)for(var g=o[d],f=0,p=g.length;p>f;f++){var l=g[f];l.updateClassName()}}}},getVisibleChartData:function(){for(var t=[],e=this.vanchart.series,i=0,a=e.length;a>i;i++){var r=e[i];r.type==this.componentType&&r.visible&&r.points.length&&!r.points[0].isNull&&t.push(e[i])}var n=this.componentType==s.RADAR_CHART||this.componentType==s.BAR_CHART||this.componentType==s.COLUMN_CHART;return n?t.sort(function(t,e){return e.index-t.index}):t},getChartData:function(){for(var t=[],e=this.vanchart.series,i=0,a=e.length;a>i;i++)e[i].type==this.componentType&&t.push(e[i]);return t},_getSeriesInterpolate:function(t,e){var i=t.step,a=t.curve;i||a||(i=i===!1?!1:e.step,a=a===!1?!1:e.curve);var r="linear";return i?r="step-after":a&&(r="cardinal"),r},_getLineSvg:function(t){return d3.svg.line().interpolate(t).x(function(t){return t.x}).y(function(t){return t.y}).defined(function(t){return!t.isNull})},_getAreaSvg:function(t){return d3.svg.area().interpolate(t).x(function(t){return t.x}).y0(function(t){return t.y0}).y1(function(t){return t.y}).defined(function(t){return!t.isNull})},_calculateBubbleLabelInfo:function(t,e,i){e=e||{};var n=e.formatter,s=e.useHtml;if(!n)return{};var l=[];if("object"==typeof n){var g=n.identifier;if(-1!=g.indexOf(h)){var f=o.format(t.seriesName,n.seriesFormat),p=t.getCategorySeriesStyle(e,i),m=a.getTextDimension(f,p,s);l.push({text:f,style:p,dim:m})}if(-1!=g.indexOf(c)||-1!=g.indexOf(d)||-1!=g.indexOf(u)){var v=this._getXYSizeString(t,n,g),_=t.getValuePercentageStyle(e,i),y=a.getTextDimension(v,_,s);l.push({text:v,style:_,dim:y})}}else t.pushCustomLabelContent(n,e,s,l,i);var b=t.calculateTextDim(l);r.merge(t,{labelContent:l,labelDim:b},!0)},_getXYSizeString:function(t,e,i){var a=o.format(t.category,e.xFormat),r=o.format(t.value,e.yFormat),n="-"==t.size?"-":o.format(t.size,e.sizeFormat),s="";return(-1!=i.indexOf(c)||-1!=i.indexOf(d))&&(s="(",-1!=i.indexOf(c)?(s+=a,-1!=i.indexOf(d)&&(s=s+","+r),s+=")"):(s+=r,s+=")"),s+=" "),-1!=i.indexOf(u)&&"-"!=n&&(s+=n),s},_mergeTooltipAttributes:function(t){for(var e=0,i=t.length;i>e;e++){var a=t[e];this.mergeSinglePointTooltipAttr(a,t)}},mergeSinglePointTooltipAttr:function(t,e){e=e||[t];var i=t.tooltip;t.tooltipText=i&&i.enabled?this._calculateTooltipContent(i,t,e):null,t.points=e},_calculateTooltipContent:function(t,e,i){var r=t.formatter;if(!r)return"";if("object"==typeof r){var n=t.style,s=r.identifier,o=this,l="";return t.shared?(l+=this._createCategoryLine(e,s,n,r),i.forEach(function(t){l+='<span style="font-size:12px; color: '+t.color+'">&#9679  </span>',l+=o._createSeriesLine(t,s,n,r),l+="<br />"})):(l+=this._createCategoryLine(e,s,n,r),l+=o._createSeriesLine(e,s,n,r)),l}return a.getFormatterFunction(r).call(e)},_createCategoryLine:function(t,e,i,a){if(t.series.chart.componentType!=s.BUBBLE_CHART||this.isForceBubble()){var r="";if(-1!=e.indexOf(g)){var n=o.format(t.category,a.categoryFormat);r+=(i?"<span>":s.TOOLTIP_CATEGORY_STYLE)+n+"</span>",r+="<br />"}return r}return this._createBubbleTooltipSeriesLine(t,e,i,a)},_createSeriesLine:function(t,e,i,r){if(t.series.chart.componentType!=s.BUBBLE_CHART||this.isForceBubble()){var n="",l=o.format(t.seriesName,r.seriesFormat),c=o.format(t.value,r.valueFormat),d=o.format(t.percentage,r.percentFormat);return-1==e.indexOf(h)||a.isEmpty(l)||((-1!=e.indexOf(f)||-1!=e.indexOf(p))&&(l+=":"),n+=(i?"<span >":s.TOOLTIP_SERIES_STYLE)+l+"</span>"),-1!=e.indexOf(f)&&-1!=e.indexOf(p)?n+=(i?"<span>":s.TOOLTIP_VALUE_STYLE)+c+"  "+d+"</span>":-1!=e.indexOf(f)?n+=(i?"<span>":s.TOOLTIP_VALUE_STYLE)+c+"</span>":-1!=e.indexOf(p)&&(n+=(i?"<span>":s.TOOLTIP_VALUE_STYLE)+d+"</span>"),n}return this._createBubbleTooltipXYSizeLine(t,e,i,r)},_createBubbleTooltipSeriesLine:function(t,e,i,a){var r="";if(-1!=e.indexOf(h)){var n=o.format(t.seriesName,a.seriesFormat);r+=(i?"<span >":s.TOOLTIP_SERIES_STYLE)+n+"</span>",r+="<br />"}return r},_createBubbleTooltipXYSizeLine:function(t,e,i,a){var r="";if(-1!=e.indexOf(c)||-1!=e.indexOf(d)||-1!=e.indexOf(u)){var n=this._getXYSizeString(t,a,e);r+=(i?"<span>":s.TOOLTIP_VALUE_STYLE)+n+"</span>"}return r}},a.inherit(i,n),i}),i("chart/Pie",["require","../Constants","../utils/BaseUtils","./BaseChart","../utils/QueryUtils","../utils/BoundsManager","../theme/options","../ChartLibrary"],function(t){function e(t,e,i){f.call(this,t,e,i),this.refresh(e)}var i="right-top",a="right-bottom",r="left-top",n="left-bottom",s=2*Math.PI,o=1.1,l=3,h=Math.PI/180,c=2,d=[.75,.7,.65,.6,.55],u=t("../Constants"),g=t("../utils/BaseUtils"),f=t("./BaseChart"),p=t("../utils/QueryUtils"),m=t("../utils/BoundsManager"),v=t("../theme/options");e.prototype={constructor:e,mergeSeriesAttributes:function(t){var e=[t.seriesOption,this.option.plotOptions[this.componentType],this.option.plotOptions,v[this.componentType].plotOptions],i=p.queryList(e,"innerRadius")||0;0==parseFloat(i)&&(i=0);var a=p.queryList(e,"center"),r=p.queryList(e,"startAngle")||0,n=p.queryList(e,"endAngle")||360;r>n?r-=360:r==n&&(r=0,n=360);var s=p.queryList(e,"roseType"),o=p.queryList(e,"rotatable"),l=p.queryList(e,"radius"),h=this.option.style;p.merge(t,{center:a,radius:l,innerRadius:i,startAngle:r,endAngle:n,roseType:s,rotatable:o,style:h},!0)},mergeDataPointAttributes:function(t){p.merge(t,{visible:g.pick(t.pointOption.visible,!0),rotate:0},!0)},doLayout:function(){var t=this.getVisibleChartData(),e=this.option.plotOptions,i=this;t.forEach(function(t){var a=[t.seriesOption,e[t.type],e,v[t.type].plotOptions];t.radius=p.queryList(a,"radius"),i._dealStackedPoints(t.visiblePoints);var r=d3.layout.pie().value(function(e){return t.roseType==u.SAME_ARC?1:Math.abs(e.value)}).startAngle(g.toRadian(t.startAngle)).endAngle(g.toRadian(t.endAngle)).sort(null),n=r(t.visiblePoints);n.forEach(function(t){
var e=t.data;e.startAngle=isNaN(t.startAngle)?0:t.startAngle,e.endAngle=isNaN(t.endAngle)?0:t.endAngle})});for(var a=this.vanchart.getPlotBounds(),r=this._calculateSeriesBounds(),n=0,s=t.length;s>n;n++){var o=t[n],l=r[o.name],h=0,c=0,d=0;if("fixed"==l){var c=t[n].center[0],d=t[n].center[1];if(-1!=t[n].center[0].indexOf("%")&&(c=this._getPercentValue(t[n].center[0],this.vanchart.chartWidth()),d=this._getPercentValue(t[n].center[1],this.vanchart.chartHeight())),o.radius)h=o.radius;else{var f=c-a.x,m=a.x+a.width-c,_=d-a.y,y=a.y+a.height-d;h=Math.min(f,m,_,y)}c-=a.x,d-=a.y,l=a}else h=Math.min(l.width/2,l.height/2),c=l.x+l.width/2,d=l.y+l.height/2;p.merge(o,{bounds:l,radius:h,centerX:c,centerY:d},!0),this._calculateLabelPos(o)}},_getFixedPos:function(t,e){var i=this.getPlotBounds(),a=t.series,r=a.centerX,n=a.centerY,l=this.getCenterAngle(t),h=t.radius*o,c=h*Math.sin(l)+r+i.x,d=h*Math.cos(l+Math.PI)+n+i.y;return l<Math.PI/2?d-=e.height:l>=Math.PI&&l<3*Math.PI/2?c-=e.width:l>=3*Math.PI/2&&s>l&&(d-=e.height,c-=e.width),[c,d]},recalculateLabelPos:function(t,e){for(var i=t.visiblePoints,a=0,r=i.length;r>a;a++)i[a].labelPos=null,i[a].rotate=e;for(var n=[],s=[],a=0,r=i.length;r>a;a++){var o=i[a],l=o.dataLabels;l&&l.enabled&&(l.align==u.OUTSIDE?n.push(o):s.push(o))}this._calculateOutsideLabelBounds(n,t,!0),this._calculateLeadLineStartPos(n),this._calculateInsideLabelBounds(s,t)},_calculateLabelPos:function(t){for(var e=t.roseType,i=t.visiblePoints,a=[],r=[],n=0,s=i.length;s>n;n++){var h=i[n],c=h.dataLabels;c&&c.enabled&&(c.align==u.OUTSIDE?a.push(h):r.push(h))}if(this._calculateOutsideLabelBounds(a,t),(r.length&&!a.length||!r.length&&!a.length)&&(t.radius=t.radius/o-l),this._calculateInnerRadius(t),e){var i=t.visiblePoints,d=t.radius-t.innerRadius,g=0;i.forEach(function(t){g=Math.max(g,Math.abs(t.value))});var f=d/g;(isNaN(f)||!isFinite(f))&&(f=0),i.forEach(function(e){e.radius=t.innerRadius+f*Math.abs(e.value)})}else{var p=t.radius;t.visiblePoints.forEach(function(t){t.radius=p})}this._calculateLeadLineStartPos(a),this._calculateInsideLabelBounds(r,t)},_calculateInnerRadius:function(t){var e=t.innerRadius,i=t.radius;"string"==typeof e&&(e=-1!=e.indexOf("%")?parseFloat(e)*i/100:parseFloat(e)),t.innerRadius=e;var a=t.visiblePoints;a.forEach(function(t){t.innerRadius=e})},_calculateLeadLineStartPos:function(t){var e=this;t.forEach(function(t){var i=t.radius,a=e.getCenterAngle(t);t.labelPos&&(t.labelPos.startPos={x:(i+1)*Math.sin(a),y:(i+1)*Math.cos(a+Math.PI)})})},_calculateOutsideLabelBounds:function(t,e,i){if(t.length){t.forEach(function(t){t.labelPos=null}),i=i||!1;for(var a=[],r=[],n=[],s=[],o=0,l=t.length;l>o;o++){var h=t[o],c=this.getCenterAngle(h);c<Math.PI/2?a.push(h):c>=Math.PI/2&&c<Math.PI?r.push(h):c>=Math.PI&&c<3*Math.PI/2?s.push(h):n.push(h)}i?this._calculateArcR(e,a,r,n,s):this._initCalculateArcR(e,a,r,n,s)}},_initCalculateArcR:function(t,e,i,a,r){var n=t.radius,s=.5*n,o=t.bounds,l={width:o.width/2,height:o.height/2};if(!this._testIfAllHorizontalFit(s,l,e,i,a,r))return t.radius=s,void this._testIfAllFit(s,l,e,i,a,r);for(var h=0,c=d.length;c>h;h++)if(s=n*d[h],this._testIfAllFit(s,l,e,i,a,r))return void(t.radius=s);this._testIfAllFit(s,l,e,i,a,r,!0),t.radius=s},_calculateArcR:function(t,e,i,a,r){var n=t.radius,s=t.bounds,o={width:s.width/2,height:s.height/2};this._testIfAllFit(n,o,e,i,a,r,!0)},_testIfAllHorizontalFit:function(t,e,s,o,l,h){var c=this._ignoreMinArcLabel(t,s),d=this._ignoreMinArcLabel(t,o),u=this._ignoreMinArcLabel(t,l),g=this._ignoreMinArcLabel(t,h),s=this._testIfHorizontalFit(s,c,t,e,i),o=this._testIfHorizontalFit(o,d,t,e,a),l=this._testIfHorizontalFit(l,u,t,e,r),h=this._testIfHorizontalFit(h,g,t,e,n);return s&&o&&l&&h},_testIfHorizontalFit:function(t,e,i,a){for(var r=1.2*e,n=.1*e,s=g.makeBounds(-i.width,i.height,2*i.width,2*i.height),o=0,l=t.length;l>o;o++){var h=t[o],c=h.labelDim,d=this.getCenterAngle(h),u=r*Math.sin(d),f=r*Math.cos(d+Math.PI),p=this._getLabelBounds(a,u,f,n,c);if(p.x<s.x||p.x+p.width>s.x+s.width)return!1}return!0},_testIfAllFit:function(t,e,s,o,l,h,c){var d=this._ignoreMinArcLabel(t,s),u=this._ignoreMinArcLabel(t,o),g=this._ignoreMinArcLabel(t,l),f=this._ignoreMinArcLabel(t,h),s=this._testIfFit(s,d,t,e,i,c),o=this._testIfFit(o,u,t,e,a,c),l=this._testIfFit(l,g,t,e,r,c),h=this._testIfFit(h,f,t,e,n,c);return s&&o&&l&&h},_testIfFit:function(t,e,i,a,r,n){return t.length!=e.length||n?this._testFloatPositionIfFit(e,i,a,r):this._testFixedPositionIfFit(e,i,a,r)},_testFixedPositionIfFit:function(t,e,r,n){for(var s=new m,o=1.2*e,l=.1*e,h=g.makeBounds(-r.width,-r.height,2*r.width,2*r.height),c=0,d=t.length;d>c;c++){var u=t[c],f=u.labelDim,p=this.getCenterAngle(u),v=o*Math.sin(p),_=o*Math.cos(p+Math.PI),y=this._getLabelBounds(n,v,_,l,f);if(s.isOverlapped(y)||!g.containsRect(h,y))return!1;s.addBounds(y);var b,x={x:v,y:_};b=n==i||n==a?{x:v+l,y:_}:{x:v-l,y:_},u.labelPos={x:y.x,y:y.y,midPos:x,endPos:b}}return!0},_testFloatPositionIfFit:function(t,e,i,a){var r=this._findNiceBoundsFromStartAngle(t,e,i,a);return r?r:(t.forEach(function(t){t.labelPos=null}),this._findNiceBoundsFromEndAngle(t,e,i,a))},_findNiceBoundsFromStartAngle:function(t,e,i,a){return this._findNiceBounds(!0,t,e,i,a)},_findNiceBoundsFromEndAngle:function(t,e,i,a){return this._findNiceBounds(!1,t,e,i,a)},_findNiceBounds:function(t,e,r,n,s){for(var o=1.2*r,l=.1*r,c=new m,d=this._getStartAndEndAngle(s),u=this._getPossibleLabelBoundsByLocation(n,s),f=t?d.endAngle:d.startAngle,p=t?h:-h,v=!0,_=0,y=e.length;y>_&&v;_++){var b=t?_:y-_-1,x=e[b],C=x.labelDim,L=this.getCenterAngle(x),A=o*Math.sin(L),T=o*Math.cos(L+Math.PI),S=this._getLabelBounds(s,A,T,l,C);if(c.isOverlapped(S)||!g.containsRect(u,S)){v=!1;for(var R=L+p;t?f>R:R>f;R+=p)if(A=o*Math.sin(R),T=o*Math.cos(R+Math.PI),S=this._getLabelBounds(s,A,T,l,C),!c.isOverlapped(S)&&g.containsRect(u,S)){v=!0;break}}if(v){var k,O={x:A,y:T};k=s==i||s==a?{x:A+l,y:T}:{x:A-l,y:T},c.addBounds(S),x.labelPos={x:S.x,y:S.y,midPos:O,endPos:k}}}return v},_getStartAndEndAngle:function(t){switch(t){case i:return{startAngle:0,endAngle:Math.PI/2};case a:return{startAngle:Math.PI/2,endAngle:Math.PI};case n:return{startAngle:Math.PI,endAngle:3*Math.PI/2};case r:return{startAngle:3*Math.PI/2,endAngle:2*Math.PI}}},_getLabelBounds:function(t,e,r,n,s){var o,l;return o=t==i||t==a?e+n+c:e-n-c-s.width,l=r-s.height/2,{x:o,y:l,width:s.width,height:s.height}},getCenterAngle:function(t){var e=t.rotate+(t.startAngle+t.endAngle)/2;return g.makeValueInRange(0,2*Math.PI,e)},_getPossibleLabelBoundsByLocation:function(t,e){var s,o,l=t.width,h=t.height;switch(e){case i:s=0,o=-h;break;case a:s=o=0;break;case n:s=-l,o=0;break;case r:s=-l,o=-h}return{x:s,y:o,width:l,height:h}},_ignoreMinArcLabel:function(t,e){for(var i=0,a=0,r=e.length;r>a;a++){var n=e[a].labelDim;i+=n.height}if(i>t){var s=i-t;e.sort(function(t,e){return t.value-e.value});for(var a=0,r=e.length;r>a&&!(0>s);a++){var o=e[a].labelDim.height;s-=o}e=e.slice(a,e.length)}return e.sort(function(t,e){var i=t.startAngle,a=e.startAngle;return a>i?-1:i>a?1:0}),e},_calculateInsideLabelBounds:function(t,e){for(var i=e.innerRadius,a=0,r=t.length;r>a;a++){var n=t[a],s=n.radius,o=this.getCenterAngle(n),l=i+(s-i)/2,h=this._getArcPoint(l,o),c=h[0]-n.labelDim.width/2,d=h[1]-n.labelDim.height/2;n.labelPos={x:c,y:d}}},_calculateSeriesBounds:function(){for(var t=this.getVisibleChartData(),e=this.vanchart.getPlotBounds(),i={},a=0,r=0,n=0,s=t.length;s>n;n++)!t[n].center&&t[n].radius&&(a+=2*(t[n].radius||0),r++);var o=e.width/Math.max(1,t.length-r);o/=2;for(var l={x:0,y:0,width:e.width,height:e.height},n=0,s=t.length;s>n;n++)if(t[n].center)i[t[n].name]="fixed";else{var h=2*(t[n].radius||o);i[t[n].name]={x:l.x,y:l.y,width:h,height:l.height},l.x+=h,l.width-=h}return i},orderData:function(){var t=this.getVisibleChartData(),e=this;t.forEach(function(t){t.points.sort(function(t,i){var a=t.value,r=i.value;return e.option.orderType==u.ASCENDING?a-r:r-a}),t.updateVisiblePoints()}),this.option.byClassName=!1},onContainerMouseMove:function(t){if(this.dragTarget){var e=this.getMousePos(t);this.render.onDrag(this.dragTarget,e)}},onContainerMouseUp:function(t){if(this.dragTarget){var e=this.getMousePos(t);this.render.onDragEnd(this.dragTarget,e),this.dragTarget=null}this.vanchart.hoverPoint&&this.cancelClickedState(this.vanchart.hoverPoint)},onContainerMouseDown:function(t){this.dragTarget=null;var e=this.getMousePos(t),i=this.getPlotBounds(),a=e[0]-i.x,r=e[1]-i.y,n=this.getVisibleChartData();n.forEach(function(t){g.containsPoint(t.bounds,[a,r])&&t.rotatable&&(this.dragTarget=t)}.bind(this)),this.dragTarget&&this.render.onDragStart(this.dragTarget,e),this.vanchart.hoverPoint&&this.makeClickedState(this.vanchart.hoverPoint)}},g.inherit(e,f),t("../ChartLibrary").register(u.PIE_CHART,e)}),i("chart/Bar",["require","./BaseChart","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BoundsManager","../ChartLibrary","../ChartLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./BaseChart"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),s=t("../utils/BoundsManager"),o=1,l=3,h=2;return e.prototype={constructor:e,doLayout:function(){var t=this._buildLocationMap();for(var e in t)for(var i=t[e],a=0,r=i.length;r>a;a++){var n=i[a];n&&n.length&&this._buildBars(n)}this._calculateLabelPos()},getTrendLineXYValues:function(t){for(var e=[],i=[],a=t.points,r=t.baseAxis.isHorizontal(),n=t.valueAxis,s=[],o=0,l=a.length;l>o;o++){var h=a[o];h.isNull||s.push(h)}return s.sort(function(t,e){return r?t.x-e.x:t.y-e.y}),s.forEach(function(t){var a,s;r?(a=t.x+t.width/2,s=n.isAxisReversed()?t.y+t.height:t.y):(a=n.isAxisReversed()?t.x:t.x+t.width,s=t.y+t.height/2),e.push(a),i.push(s)}),[e,i,t.baseAxis.getPosition()]},_buildBars:function(t){var e=t[0][0],i=e.isValueAxisBased();i?this._calculateValueBasedPercentageAndTooltip(t):this._calculateCategoryBasedPercentageAndTooltip(t);for(var s=i?this._getValueBasedBarSize(t):this._getBarSize(t),o=s.centerPos,l=s.barWidth,h=t[0][0].baseAxis,c=h.getPosition()==r.LEFT||h.getPosition()==r.RIGHT,d=0,u=t.length;u>d;d++)for(var g=t[d],f=0,p=g.length;p>f;f++)for(var e=g[f],m=0,v=e.points.length;v>m;m++){var _=e.points[m],y=h.scale(_.category)+o[d]-l[d][f]/2,b=_.series.valueAxis,x=_.y,C=_.y0,L=b.scale(C),A=b.scale(x+C),T=Math.abs(A-L),S=_.borderWidth,R=c?Math.min(L,A):y,k=c?y:Math.min(L,A),O=c?T:l[d][f],P=c?l[d][f]:T;O=Math.max(O,0),P=Math.max(P,0);var E=a.rectSubPixelOpt(R,k,O,P,S);n.merge(_,n.merge(E,{location:h.getPosition(),startPos:b.getStartPos(),direction:this.getAnimationDirection(b,x)},!0),!0)}},getAnimationDirection:function(t,e){var i=e>=0;return t.isHorizontal()?i^t.isAxisReversed()?r.LEFT_TO_RIGHT:r.RIGHT_TO_LEFT:i^t.isAxisReversed()?r.BOTTOM_TO_TOP:r.TOP_TO_BOTTOM},_getFixedPos:function(t,e){var i,a,n=t.location,s=this.getPlotBounds();return n==r.TOP||n==r.BOTTOM?(i=s.x+t.x+t.width+o,a=s.y+t.y):(i=s.x+t.x+t.width-e.width,a=s.y+t.y+t.height+o),[i,a]},mergeSeriesAttributes:function(t){var e=[t.seriesOption,this.option.plotOptions];n.merge(t,{width:n.queryList(e,"width")})},_getTotalDataPointCount:function(){for(var t=this.getVisibleChartData(),e=0,i=0,a=t.length;a>i;i++)e+=t[i].points.length;return Math.max(e,1)},_getValueBasedBarSize:function(t){var e=t[0][0].baseAxis,i=this._getTotalDataPointCount(),a=e.isHorizontal()?e.bounds.width:e.bounds.height,r=this.fixedBarWidth?this.fixedBarWidth:a/i/3;r=Math.max(r,h),this.fixedBarWidth=r;for(var n=[],s=[],o=0,i=t.length;i>o;o++){n.push(0);for(var l=0,c=t[o].length;c>l;l++){var d=t[o][l];s[o]=s[o]||[],s[o].push(d.width?d.width:Math.max(r,h))}}return{centerPos:n,barWidth:s}},_getBarSize:function(t){var e=t.length,i=t[0][0].baseAxis,a=i.getTickLength(),r=this.option.plotOptions.categoryGap||"20%",n=this.option.plotOptions.gap||"20%";r=this._getPercentValue(r,a);for(var s=(a-r)/e,o=r/2,l=[],c=0;e>c;c++)l.push(o+s*(c+.5));n=this._getPercentValue(n,s),s-=n;for(var d=[],c=0;e>c;c++)for(var u=0,g=t[c].length;g>u;u++){var f=t[c][u];d[c]=d[c]||[],d[c].push(f.width?f.width:Math.max(s,h))}return{centerPos:l,barWidth:d}},_calculateLabelPos:function(){var t=new s,e=this.getVisibleChartData(),i=this;e.forEach(function(e){e.points.forEach(function(e){var n=e.dataLabels;if(n&&n.enabled)if(n.align)e.labelPos=i._calculateAlignLabelPos(e,n.align),t.addBounds(a.makeBounds(e.labelPos,e.labelDim));else for(var s=[r.CENTER,r.INSIDE,r.OUTSIDE],o=0,l=s.length;l>o;o++){var h=s[o],c=i._calculateAlignLabelPos(e,h);if(!t.isOverlapped(a.makeBounds(c,e.labelDim))||h==r.OUTSIDE){e.labelPos=c,t.addBounds(a.makeBounds(c,e.labelDim));break}}})})},_calculateAlignLabelPos:function(t,e){var i=t.labelDim,a=t.location==r.TOP||t.location==r.BOTTOM,n=t.value>=0,s=t.series,o=s.valueAxis;n^=o.isAxisReversed();var h,c,d=t.x+t.width/2,u=t.y+t.height/2;switch(e){case r.CENTER:h=d-i.width/2,c=u-i.height/2;break;case r.INSIDE:a?(h=d-i.width/2,c=n?t.y+l:t.y+t.height-l-i.height):(c=u-i.height/2,h=n?t.x+t.width-l-i.width:t.x+l);break;case r.OUTSIDE:a?(h=d-i.width/2,c=n?t.y-l-i.height:t.y+t.height+l):(c=u-i.height/2,h=n?t.x+t.width+l:t.x-l-i.width)}return{x:h,y:c}},getInitBarAttribute:function(t){var e=t.direction||r.BOTTOM_TO_TOP,i={x:t.startPos,y:t.y,width:0,height:t.height},a={x:t.startPos,y:t.y,width:t.x+t.width-t.startPos,height:t.height},n={x:t.startPos,y:t.y,width:0,height:t.height},s={x:t.x,y:t.y,width:t.startPos-t.x,height:t.height},o={x:t.x,y:t.startPos,width:t.width,height:0},l={x:t.x,y:t.y,width:t.width,height:t.startPos-t.y},h={x:t.x,y:t.startPos,width:t.width,height:0},c={x:t.x,y:t.startPos,width:t.width,height:t.y+t.height-t.startPos};switch(e){case r.BOTTOM_TO_TOP:return{init:o,end:l};case r.TOP_TO_BOTTOM:return{init:h,end:c};case r.LEFT_TO_RIGHT:return{init:i,end:a};case r.RIGHT_TO_LEFT:return{init:n,end:s}}}},a.inherit(e,i),t("../ChartLibrary").register(r.BAR_CHART,e),t("../ChartLibrary").register(r.COLUMN_CHART,e),e}),i("chart/Line",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","./BaseChart","../theme/options","../ChartLibrary"],function(t){function e(t,e,i){n.call(this,t,e,i),this.refresh(e)}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("./BaseChart"),s=t("../theme/options"),o=.35,l=2;return e.prototype={constructor:e,type:i.LINE_CHART,doLayout:function(){var t=this._buildLocationMap();for(var e in t)for(var i=t[e],a=i.length-1;a>=0;a--){var r=i[a];r&&r.length&&this._buildLines(r)}this._calculateLabelPos()},_buildLines:function(t){var e=this.option.plotOptions.large,a=t[0][0];a.isValueAxisBased()?this._calculateValueBasedPercentageAndTooltip(t):this._calculateCategoryBasedPercentageAndTooltip(t);for(var r=this,n=0,s=t.length;s>n;n++){var o=t[n];o.forEach(function(t){t.dataBands=r._calculateDataBands(t);var a=t.baseAxis,n=t.valueAxis,s=t.location==i.LEFT||t.location==i.RIGHT;if(t.points.forEach(function(t){r._positionFix(t,a,n,s)}),t.connectNulls){var o=[];t.points.forEach(function(t){t.isNull||o.push(t)}),t.points=o}if(e){var l={},h={},c=[];t.points.forEach(function(t){l[t.x]&&h[t.y]||(c.push(t),l[t.x]=!0,h[t.y]=!0)}),c.sort(function(t,e){return t.x-e.x}),t.points=c}else t.points.sort(function(t,e){return t.x-e.x})})}},_positionFix:function(t,e,i,a){var r=e.scale.rangeBand?e.scale.rangeBand()/2:0,n=Math.round(e.scale(t.category)+r),s=i.scale(t.y+t.y0),o=i.scale(t.y0);a?(t.y=n,t.x=s,t.x0=o):(t.x=n,t.y=s,t.y0=o)},mergeDataPointAttributes:function(t){this._mergeMarkerAttributes(t)},mergeSeriesAttributes:function(t){var e=r.merge(s[this.componentType].plotOptions,this.option.plotOptions,!0);r.merge(e,this.option.plotOptions[this.componentType],!0);var i=t.seriesOption,n=[i,e],l=a.pick(r.queryList(n,"connectNulls"),!0),h=r.queryList(n,"lineWidth")||0,c=r.queryList(n,"color")||this._getDefaultSeriesColor(t.name),d=r.queryList(n,"fillColor");d=d?d===!0?c:d:d===!1?"":c;var u=a.pick(r.queryList(n,"fillColorOpacity"),o),g=r.queryList(n,"stack"),f=this._getSeriesInterpolate(i,e),p=this._getLineSvg(f),m=this._getAreaSvg(f),v=[];r.merge(t,{lineWidth:h,color:c,fillColor:d,fillColorOpacity:u,connectNulls:l,lineSvg:p,areaSvg:m,points:v,isStack:!!g})},_calculateDataBands:function(t){var e=this.getPlotBounds(),i=t.color,n=t.fillColor,o=t.fillColorOpacity,l=[t.seriesOption,this.option.plotOptions[t.type],this.option.plotOptions,s[t.type].plotOptions],h=r.queryList(l,"bands"),c=this.vanchart.getIDPrefix()+t.className,d=t.valueAxis,u=[];if(u.push({x:0,y:0,width:e.width,height:e.height,color:i,fillColor:n,fillColorOpacity:o,lineData:t,clipID:c+"-1"}),!h)return u;a.isArray(h)||(h=[h]);for(var g=0,f=h.length;f>g;g++){var p=0,m=0,v=e.width,_=e.height,y=d.scale.domain(),b=Math.max(y[0],h[g].from),x=Math.min(y[1],h[g].to);b=d.scale(b),x=d.scale(x);var C=h[g].color||i,L=h[g].fillColor||n,A=h[g].fillColorOpacity||o;d.isHorizontal()?(p=Math.min(b,x),v=Math.abs(b-x)):(m=Math.min(b,x),_=Math.abs(b-x)),u.push({x:p,y:m,height:_,width:v,color:C,lineData:t,fillColor:L,fillColorOpacity:A,clipID:c+g})}return u},_getFixedPos:function(t){var e=t.marker.radius||this.getDefaultMarkerRadius(),i=this.getPlotBounds(),a=i.x+t.x+e,r=i.y+t.y+e;return[a,r]},_calculateLabelPos:function(){var t=this.getVisibleChartData();t.forEach(function(t){t.points.forEach(function(t){var e=t.dataLabels;e&&e.enabled&&(t.labelPos={x:t.x-t.labelDim.width/2,y:t.y-l-t.labelDim.height})})})},getTrendLineXYValues:function(t){return this.getNormalTrendLineXYValues(t)},getClosestPoint:function(t){var e,i=Number.MAX_VALUE,a=this.vanchart.hoverSeries,r=this.getPlotBounds();if(a&&a.points)a.points.forEach(function(a){var n=Math.abs(a.x+r.x-t[0]);i>n&&!a.isNull&&(e=a,i=n)});else{var n=this.vanchart.series;n.forEach(function(a){a.points&&a.points.forEach(function(a){var n=Math.abs(a.x+r.x-t[0]);i>n&&!a.isNull&&(e=a,i=n)})})}return e}},a.inherit(e,n),t("../ChartLibrary").register(i.LINE_CHART,e),e}),i("chart/Area",["require","../Constants","../utils/BaseUtils","./Line","../ChartLibrary"],function(t){function e(t,e,i){r.call(this,t,e,i)}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=t("./Line");return e.prototype={constructor:e,type:i.AREA_CHART},a.inherit(e,r),t("../ChartLibrary").register(i.AREA_CHART,e),e}),i("chart/Gauge",["require","../Constants","../utils/BaseUtils","../utils/ColorUtils","./BaseChart","../utils/QueryUtils","../utils/BoundsManager","../theme/options","../ChartLibrary"],function(t){function e(t,e,i){n.call(this,t,e,i),this.refresh(e)}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("./BaseChart"),s=t("../utils/QueryUtils"),o=t("../utils/BoundsManager"),l=t("../theme/options"),h=100,c=5,d=6,u=4,g=5,f=.8,p=.3,m=.3;return e.prototype={constructor:e,doLayout:function(){var t=s.merge(l[this.componentType].plotOptions,this.option.plotOptions,!0);s.merge(t,this.option.plotOptions[this.componentType],!0);var e=t.layout||i.HORIZONTAL_LAYOUT,n=this.getVisibleChartData(),o=this;n.forEach(function(e){e.radius=s.queryList([e.seriesOption,t],"radius");var i=e.gaugeAxis,n=i.scale.domain(),h=o._getDefaultBands([e.seriesOption,t],n);e.bands=a.addArray(e.bands,h),e.points.forEach(function(t){t.valueInDomain=a.getValueInDomain(t.value,n),t.color=e._getBandsColor(t)||t.color;var i=[t.pointOption,e.seriesOption,e.chart.option.plotOptions[e.type],e.chart.option.plotOptions,l[e.type].plotOptions];t.mouseOverColor=s.queryList(i,"mouseOverColor")||r.getHighLightColor(t.color),t.clickColor=r.getClickColor(t.color)});for(var c=e.points,d=[],u=0,g=c.length;g>u;u++)c[u].isNull||d.push(c[u]);e.points=d,o._dealStackedPoints(e.points)}),this._dealGaugeLabels(),this._fixCenterAndSize(e)},mergeSeriesAttributes:function(t){var e=[t.seriesOption,this.option.plotOptions[t.type],this.option.plotOptions,l[t.type].plotOptions],r=s.queryList(e,"style")||i.GAUGE_POINTER,n=this.vanchart.themeConfig,o=n[r]||n[i.GAUGE_POINTER],h=s.queryList(e,"seriesLabel")||{},c=s.queryList(e,"valueLabel")||{},d=s.queryList(e,"percentageLabel")||{},u=s.queryList(e,"needle"),g=s.queryList(e,"hinge"),f=s.queryList(e,"clockwise"),p=s.queryList(e,"hingeBackgroundColor"),m=s.queryList(e,"paneBackgroundColor"),v=s.queryList(e,"slotBackgroundColor"),_=s.queryList(e,"innerPaneBackgroundColor"),y=s.queryList(e,"thermometerLayout"),b=s.queryList(e,"bands")||[];s.merge(t,{style:r,bands:b,center:s.queryList(e,"center"),radius:s.queryList(e,"radius"),seriesLabel:s.merge(h,o.seriesLabel),valueLabel:s.merge(c,o.valueLabel),percentageLabel:s.merge(d,o.percentageLabel),needle:u||o.needle,hinge:g||o.hinge,thermometerLayout:y||o.thermometerLayout,clockwise:a.pick(f,o.clockwise),hingeBackgroundColor:p||o.hingeBackgroundColor,paneBackgroundColor:m||o.paneBackgroundColor,slotBackgroundColor:v||o.slotBackgroundColor,innerPaneBackgroundColor:_||o.innerPaneBackgroundColor})},_getDefaultBands:function(t,e){var i=s.queryList(t,"color"),r=[];if(i)r.push({from:e[0],to:e[1],color:i});else{var n=e[0],o=e[1],l=a.accDiv(o-n,3),h=a.accAdd(n,l),c=a.accAdd(h,l),d=this.option.colors;r=[{from:n,to:h,color:d[0]},{from:h,to:c,color:d[1]},{from:c,to:o,color:d[2]}]}return r},_calculatePercentage:function(t){if(t.length){var e=t[0].series.gaugeAxis,i=e.scale.domain();t.forEach(function(t){t.percentage=(t.value-i[0])/(i[1]-i[0])})}},_dealGaugeLabels:function(){var t=this,e=this.getVisibleChartData();e.forEach(function(e){var r=e.style;if(r==i.GAUGE_POINTER||r==i.GAUGE_POINTER_SEMI){if(e.seriesLabelContent="",e.seriesLabelDim={width:0,height:0},e.seriesLabel&&e.seriesLabel.enabled&&e.points[0]){var r=e.seriesLabel.style,n=e.points[0]._calculateLabelInfo(e.seriesLabel),s=n.labelContent,o=n.labelDim;e.seriesLabelContent=s[0]?s[0].text:"",e.seriesLabelStyle=r,e.seriesLabelDim=o}}else if(e.percentageLabelContent="",e.percentageLabelDim={width:0,height:0},e.percentageLabel&&e.percentageLabel.enabled&&e.points[0]){var l=a.clone(e.percentageLabel.style);l.color||(l.color=e.points[0].color);var n=e.points[0]._calculateLabelInfo(e.percentageLabel),s=n.labelContent,o=n.labelDim;e.percentageLabelContent=s[0]?s[0].text:"",e.percentageLabelStyle=l,e.percentageLabelDim=o}e.valueLabelContent="",e.valueLabelDim={width:0,height:0},e.valueLabel&&e.valueLabel.enabled&&(e.valueLabelContent=t._fixValueLabelContent(e))})},_fixValueLabelContent:function(t){var e=t.valueLabel,r=e.style,n=e.useHtml,s=e.formatter,o=[];if(t.style==i.GAUGE_POINTER||t.style==i.GAUGE_POINTER_SEMI||t.style==i.GAUGE_RING||t.style==i.GAUGE_THERMOMETER)for(var l=0,h=t.points.length;h>l;l++){var c=t.points[l],d=this._calculateSingleLineLabelContent(s,c),u=a.getTextDimension(d,r,n);o.push({labelContent:d,labelDim:u,labelStyle:r})}else if(t.points[0])for(var d=this._createMultiLineLabelContent(s,t.points[0]),g=e.style,l=0,h=d.length;h>l;l++)o.push({labelContent:d[l],labelStyle:g,labelDim:a.getTextDimension(d[l],g,n)});return o},orderData:function(){var t=this.vanchart.series,e=this;t.sort(function(t,a){var r=t.getSeryTotalValue(),n=a.getSeryTotalValue();return e.option.orderType==i.ASCENDING?r-n:n-r})},_getColorFromBands:function(t,e){if(e&&e.length)for(var i=0,a=e.length;a>i;i++){var r=e[i],n=Math.min(r.from,r.to),s=Math.max(r.from,r.to);if(t>=n&&s>=t)return r.color}},_fixCenterAndSize:function(t){for(var e=this.getVisibleChartData(),a=0,r=e.length;r>a;a++){var n=e[a];if(n.center){var s=n.center[0],o=n.center[1];-1!=s.indexOf("%")&&(s=this._getPercentValue(s,this.vanchart.chartWidth())),-1!=o.indexOf("%")&&(o=this._getPercentValue(o,this.vanchart.chartHeight())),n.centerX=s,n.centerY=o,n.radius=n.radius||h}}t==i.HORIZONTAL_LAYOUT?this._dealHorizontalLayout():this._dealVerticalLayout();var l=this;e.forEach(function(t){var e=t.style;switch(e){case i.GAUGE_POINTER:l._fixPointerCenter(t);break;case i.GAUGE_POINTER_SEMI:l._fixPointerSemiCenter(t);break;case i.GAUGE_SLOT:l._fixSlotCenter(t);break;case i.GAUGE_THERMOMETER:l._fixThermometerCenter(t);break;case i.GAUGE_RING:l._fixRingCenter(t)}})},_fixPointerCenter:function(t){var e=t.radius;if(!t.center){var r=t.bounds,n=20+t.seriesLabelDim.height,s=r.height-n,o=t.seriesLabel.align||i.BOTTOM,l=r.x+r.width/2,h=r.y+r.height/2;if(e=Math.min(r.width,s)/2-c,o==i.BOTTOM){if(h+e+n>r.y+r.height){var d=r.height-(2*e+n);d>=0&&(h=r.y+e+d/2)}}else if(h-e-n<r.y){var d=r.height-(2*e+n);d>=0&&(h=r.y+e+n+d/2)}t.centerX=l,t.centerY=h,t.radius=e}if(t.seriesLabelContent){var u=t.seriesLabelDim;t.seriesLabelPos={x:-u.width/2,y:o==i.BOTTOM?e+20:-e-20-u.height}}if(t.valueLabelContent){var g=t.gaugeAxis,f=g.componentOption,p=g.scale.domain(),m=d3.scale.linear().domain(p).range([a.toRadian(-150),a.toRadian(150)]),v=a.getTextHeight(f.labelStyle),_=.16*e+v/2,y=.85*e,b=y*Math.cos(Math.PI/6)-2*v;this._dealValueLabelContent(t,e,m,_,b)}},_getPointerTickBoundsManager:function(t,e,i,a){var r=new o,n=.84*e,s=t.getTickData(),l=.5*a,h=this;s.forEach(function(t){var e=h._getPointerTickCenter(t,n,i);r.addBounds({x:e.x-t.tickDim.width/2-l,y:e.y-t.tickDim.height/2-l,width:t.tickDim.width+l,height:t.tickDim.height+l})});var c=t.getMinorTickData(),d=.85*e,u=.1*e;return c.forEach(function(t){var e,a,n=i(t),s=h._getArcPoint(d,n);n<Math.PI?(e=s[0],a=s[1]):(e=s[0]-u,a=s[1]),r.addBounds({x:e,y:a,width:u,height:u})}),r},_getPointerTickCenter:function(t,e,i){var a,r,n=i(t.tickValue),s=this._getArcPoint(e,n),o=s[0],l=s[1],h=t.tickDim,c=Math.atan(h.width/h.height);if(Math.abs(n)<c){var d=h.height/2;a=o+d*o/l,r=l+d}else if(n>=c&&n<=Math.PI-c){var d=h.width/2;a=o-d,r=l-d*l/o}else if(n>=c-Math.PI&&-c>=n){var d=h.width/2;a=o+d,r=l+d*l/o}else{var d=h.height/2;a=o-d*o/l,r=l-d}return{x:a,y:r}},_fixPointerSemiCenter:function(t){var e=t.radius;if(!t.center){var r=t.bounds,n=20+t.seriesLabelDim.height,s=t.seriesLabel.align,o=r.height-n;e=Math.min(r.width/2,o/1.14)-c;var l=r.x+r.width/2,h=r.y+r.height/2+e/2;if(s==i.BOTTOM){if(h+.14*e+n>r.y+r.height){var d=r.height-(1.14*e+n);d>=0&&(h=r.y+e+d/2)}}else if(h-e-n<r.y){var d=r.height-(1.14*e+n);d>=0&&(h=r.y+e+n+d/2)}t.centerX=l,t.centerY=h,t.radius=e}if(t.seriesLabelContent){var u=t.seriesLabelDim;t.seriesLabelPos={x:-u.width/2,y:s==i.BOTTOM?.14*e+20:-e-20-u.height}}if(t.valueLabelContent){var g=t.gaugeAxis,f=g.componentOption,p=g.scale.domain(),m=d3.scale.linear().domain(p).range([a.toRadian(-90),a.toRadian(90)]),v=a.getTextHeight(f.labelStyle),_=.85*e,y=-(_-2*v),b=-(.11*e+v/2);this._dealValueLabelContent(t,e,m,y,b)}},_dealValueLabelContent:function(t,e,i,r,n){var s=t.gaugeAxis,o=s.componentOption,l=a.getTextHeight(o.labelStyle),h=t.valueLabel.style,c=t.valueLabel.useHtml,d=a.getTextHeight(h),u=this._getPointerTickBoundsManager(s,e,i,l),g=t.valueLabelContent.length,f=n-r;g=Math.min(Math.floor((f-d/2)/(3*d/2)),g),g=Math.max(0,g),t.valueLabelContent.length=g;var f=d*g+(g-1)*d/2;r=(n-r-f)/2+r;for(var p=r-d/2,v=Number.MAX_VALUE,_=0;g>_;_++){for(var y=t.valueLabelContent[_],b=-y.labelDim.width/2,x=Math.min(b-d/4,v),C={x:x,y:p,width:2*Math.abs(x),height:r+d*(1+m)-p},L=y.labelContent,A=!1;u.isOverlapped(C)&&L.length;){L=L.substr(0,Math.floor(.9*L.length));var T=a.getTextDimension(L+"...",h,c);b=-T.width/2,x=Math.min(b-d/4,v),C={x:x,y:p,width:2*Math.abs(x),height:r+d*(1+m)-p},A=!0}A&&(y.labelContent=L+"...",y.labelDim=a.getTextDimension(y.labelContent,h,c),b=-y.labelDim.width/2,x=Math.min(b-d/4,v)),y.labelPos={x:b,y:r},r+=d*(1+m),v=x}t.valueLabelBackground={x:v,y:p,width:2*Math.abs(v),height:f+d}},_fixSlotCenter:function(t){if(!t.center){var e=t.bounds,i=Math.min(e.width/2,e.height/2);i=i/1.08-c;var r=e.x+e.width/2,n=e.y+e.height/2;t.centerX=r,t.centerY=n,t.radius=i}if(t.percentageLabelContent&&t.valueLabelContent){t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height*(1+m)};for(var s=0,o=0,l=t.valueLabelContent.length;l>o;o++){var h=t.valueLabelContent[o];h.labelPos={x:-h.labelDim.width/2,y:s},s+=h.labelDim.height*(1+m)}}else if(t.percentageLabelContent)t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height/2};else if(t.valueLabelContent)for(var d=a.getTextHeight(t.valueLabel.style),u=t.valueLabelContent.length,g=d*u+d*(u-1)/2,s=-g/2,o=0;u>o;o++){var h=t.valueLabelContent[o];h.labelPos={x:-h.labelDim.width/2,y:s},s+=d*(1+m)}},_fixThermometerCenter:function(t){var e=t.thermometerLayout==i.HORIZONTAL_LAYOUT?this._fixHorizontalThermometerCenter(t):this._fixVerticalThermometerCenter(t),a=e.centerX,r=e.centerY,n=e.radius,s=t.valueLabelContent?t.valueLabelContent[0]:null;if(t.percentageLabelContent&&(t.percentageLabelPos.x-=a,t.percentageLabelPos.y-=r,t.percentageLabelPos.y=Math.min(t.percentageLabelPos.y,n-t.percentageLabelDim.height)),s){s.labelPos.x-=a,s.labelPos.y-=r;var o=n-s.labelDim.height-s.labelPos.y;0>o&&(s.labelPos.y+=o,t.percentageLabelContent&&(t.percentageLabelPos.y+=o))}t.centerX=a,t.centerY=r,t.radius=n},_fixHorizontalThermometerCenter:function(t){var e,a,r,n=t.bounds,s=t.percentageLabel,o=t.valueLabel,l=t.gaugeAxis,h=t.valueLabelContent?t.valueLabelContent[0]:null,p=this._getThermometerSize(t);e=n.x+n.width/2,r=n.width/2-l.getMaxTickWidth()-c;var v=n.y+(n.height-p)/2;return(t.percentageLabelContent||h)&&(t.percentageLabelContent&&h&&s.align==i.TOP&&o.align==i.TOP?(t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+m),h.labelPos={x:-h.labelDim.width/2+e,y:v},v+=h.labelDim.height*(1+f)):(t.percentageLabelContent&&s.align==i.TOP&&(t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+f)),h&&o.align==i.TOP&&(h.labelPos={x:-h.labelDim.width/2+e,y:v},v+=h.labelDim.height*(1+f)))),v+=l.getTickHeight()+u+d+u+2*g,a=v-5,(t.percentageLabelContent||h)&&(t.percentageLabelContent&&h&&s.align==i.BOTTOM&&o.align==i.BOTTOM?(v+=t.percentageLabelDim.height*f,t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v},v+=t.percentageLabelDim.height*(1+m),h.labelPos={x:-h.labelDim.width/2+e,y:v}):(t.percentageLabelContent&&s.align==i.BOTTOM&&(v+=t.percentageLabelDim.height*f,t.percentageLabelPos={x:-t.percentageLabelDim.width/2+e,y:v}),h&&o.align==i.BOTTOM&&(v+=h.labelDim.height*f,h.labelPos={x:-h.labelDim.width/2+e,y:v}))),{centerX:e,centerY:a,radius:r}},_fixVerticalThermometerCenter:function(t){var e,a,r,n=t.bounds,s=t.percentageLabel,o=t.valueLabel,l=t.gaugeAxis,h=t.points[0]||{},f=l.scale.domain(),p=t.valueLabelContent?t.valueLabelContent[0]:null,v=this._getThermometerSize(t),_=n.x+(n.width-v)/2;a=n.y+n.height/2,r=n.height/2-l.getTickHeight()-c;var y=d3.scale.linear().domain(f).range([r,-r]),b=a+y(h.valueInDomain);return t.percentageLabelDim&&(b-=t.percentageLabelDim.height/3),(t.percentageLabelContent||p)&&(t.percentageLabelContent&&p&&s.align==i.LEFT&&o.align==i.LEFT?(_+=Math.max(t.percentageLabelDim.width,p.labelDim.width),t.percentageLabelPos={x:_-t.percentageLabelDim.width,y:b},p.labelPos={x:_-p.labelDim.width,y:b+t.percentageLabelDim.height*(1+m)},_+=m*Math.max(t.percentageLabelDim.height,p.labelDim.height)):(t.percentageLabelContent&&s.align==i.LEFT&&(t.percentageLabelPos={x:_,y:b},_+=t.percentageLabelDim.width+m*t.percentageLabelDim.height),p&&o.align==i.LEFT&&(p.labelPos={x:_,y:b},_+=p.labelDim.width+m*p.labelDim.height))),e=_+g,_+=2*g+u+d+u+l.getMaxTickWidth(),(t.percentageLabelContent||p)&&(t.percentageLabelContent&&p&&s.align==i.RIGHT&&o.align==i.RIGHT?(_+=m*Math.max(t.percentageLabelDim.height,p.labelDim.height),t.percentageLabelPos={x:_,y:b},p.labelPos={x:_,y:b+t.percentageLabelDim.height*(1+m)}):(t.percentageLabelContent&&s.align==i.RIGHT&&(t.percentageLabelPos={x:_+m*t.percentageLabelDim.height,y:b}),p&&o.align==i.RIGHT&&(p.labelPos={x:_+m*p.labelDim.height,y:b}))),{centerX:e,centerY:a,radius:r}},_fixRingCenter:function(t){if(!t.center){var e=t.bounds,i=Math.min(e.width/2,e.height/2)-c,a=e.x+e.width/2,r=e.y+e.height/2;t.centerX=a,t.centerY=r,t.radius=i}var n=0,s=t.valueLabelContent?t.valueLabelContent[0]:null;t.percentageLabelContent&&s?n=t.percentageLabelDim.height*(1+m)+s.labelDim.height:t.percentageLabelContent?n=t.percentageLabelDim.height:s&&(n=s.labelDim.height);var o=-n/2;t.percentageLabelContent&&(t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:o},o+=t.percentageLabelDim.height*(1+m)),s&&(s.labelPos={x:-s.labelDim.width/2,
y:o})},_dealHorizontalLayout:function(){var t=!0,e=0,a=0,r=this.getVisibleChartData();if(r.forEach(function(r){r.center||(r.style!=i.GAUGE_THERMOMETER||r.thermometerLayout==i.HORIZONTAL_LAYOUT)&&(r.radius?(e+=2*r.radius,a++):t=!1)}),!t){var n=this;r.forEach(function(t){t.center||t.style!=i.GAUGE_THERMOMETER||t.thermometerLayout!=i.VERTICAL_LAYOUT||(e+=n._getThermometerSize(t),a++)})}var s=this.vanchart.getPlotBounds(),o=s.width/Math.max(1,r.length-a);o/=2;for(var l={x:0,y:0,width:s.width,height:s.height},h=0,c=r.length;c>h;h++){var d=r[h];if(!d.center){var u=0;if(d.style==i.GAUGE_THERMOMETER)if(d.thermometerLayout==i.HORIZONTAL_LAYOUT)u=2*(d.radius||o),d.bounds={x:l.x,y:l.y,width:u,height:l.height},l.x+=u,l.width-=u;else{u=t?2*o:this._getThermometerSize(d);var g=d.radius?2*d.radius:l.height;g=Math.min(g,l.height),d.bounds={x:l.x,y:l.y,width:u,height:g},l.x+=u,l.width-=u}else u=2*(d.radius||o),d.bounds={x:l.x,y:l.y,width:u,height:l.height},l.x+=u,l.width-=u}}},_dealVerticalLayout:function(){var t=!0,e=0,a=0,r=this.getVisibleChartData();if(r.forEach(function(r){r.center||(r.style!=i.GAUGE_THERMOMETER||r.thermometerLayout==i.VERTICAL_LAYOUT)&&(r.radius?(e+=2*r.radius,a++):t=!1)}),!t){var n=this;r.forEach(function(t){t.center||t.style!=i.GAUGE_THERMOMETER||t.thermometerLayout!=i.HORIZONTAL_LAYOUT||(e+=n._getThermometerSize(t),a++)})}var s=this.vanchart.getPlotBounds(),o=s.height/Math.max(1,r.length-a);o/=2;for(var l={x:0,y:0,width:s.width,height:s.height},h=0,c=r.length;c>h;h++){var d=r[h];if(!d.center){var u=0;if(d.style==i.GAUGE_THERMOMETER)if(d.thermometerLayout==i.VERTICAL_LAYOUT)u=2*(d.radius||o),d.bounds={x:l.x,y:l.y,width:l.width,height:u},l.y+=u,l.height-=u;else{u=t?2*o:this._getThermometerSize(d);var g=d.radius?2*d.radius:l.width;g=Math.min(g,l.width),d.bounds={x:l.x,y:l.y,width:g,height:u},l.y+=u,l.height-=u}else u=2*(d.radius||o),d.bounds={x:l.x,y:l.y,width:l.width,height:u},l.y+=u,l.height-=u}}},_getThermometerSize:function(t){var e=t.valueLabelContent?t.valueLabelContent[0]:null,a=t.percentageLabel,r=t.valueLabel,n=t.gaugeAxis;if(t.thermometerLayout==i.HORIZONTAL_LAYOUT){var s=0;return t.percentageLabelContent&&e?a.align==r.align&&(s+=t.percentageLabelDim.height+e.labelDim.height,s+=m*t.percentageLabelDim.height,s+=f*(r.align==i.TOP?e.labelDim.height:t.percentageLabelDim.height)):t.percentageLabelContent?s+=(1+f)*t.percentageLabelDim.height:e&&(s+=(1+f)*e.labelDim.height),s+=2*g+u+d+u+n.getTickHeight()}var o=0;return t.percentageLabelContent&&e?a.align==r.align?(o+=Math.max(t.percentageLabelDim.width,e.labelDim.width),o+=p*Math.max(t.percentageLabelDim.height,e.labelDim.height)):(o+=t.percentageLabelDim.width+e.labelDim.width,o+=p*(t.percentageLabelDim.height+e.labelDim.height)):t.percentageLabelContent?o+=t.percentageLabelDim.width+p*t.percentageLabelDim.height:e&&(o+=e.labelDim.width+p*e.labelDim.height),o+=n.getMaxTickWidth(),o+=2*g+u+d+u},_getFixedPos:function(t,e){var a=t.series||t,r=a.style,n=a.thermometerLayout,s=this.getPlotBounds();switch(r){case i.GAUGE_POINTER:case i.GAUGE_SLOT:case i.GAUGE_RING:var o=s.x+a.centerX+a.radius+10,l=s.y+a.centerY-e.height/2;return[o,l];case i.GAUGE_POINTER_SEMI:var o=s.x+a.centerX-e.width/2,l=s.y+a.centerY+.14*a.radius+10;return[o,l];case i.GAUGE_THERMOMETER:var o,l;if(n==i.HORIZONTAL_LAYOUT){o=s.x+a.centerX-e.width/2;var h=s.y+a.centerY;if(l=h+g+10,a.percentageLabelContent&&a.percentageLabel.align==i.BOTTOM&&(l=h+a.percentageLabelPos.y+a.percentageLabelDim.height+10),a.valueLabelContent&&a.valueLabel.align==i.BOTTOM){var c=a.valueLabelContent[0];l=h+c.labelPos.y+c.labelDim.height+10}}else{l=s.y+a.centerY-e.height/2;var f=a.gaugeAxis.getMaxTickWidth(),p=s.x+a.centerX;if(o=p+g+u+d+u+f+10,a.percentageLabelContent&&a.percentageLabel.align==i.RIGHT&&(o=p+a.percentageLabelPos.x+a.percentageLabelDim.width+10),a.valueLabelContent&&a.valueLabel.align==i.RIGHT){var c=a.valueLabelContent[0];o=Math.max(o,p+c.labelPos.x+c.labelDim.width+10)}}return[o,l]}},_supportContainerEvent:function(){var t=this.option.plotOptions.style;return t!=i.GAUGE_POINTER&&t!=i.GAUGE_POINTER_SEMI},_findGauge:function(t){var e=this.getVisibleChartData(),i=this.getMousePos(t),r=this.getPlotBounds();i[0]-=r.x,i[1]-=r.y;for(var n=0,s=e.length;s>n;n++){var o=e[n];if(a.containsPoint(o.bounds,i))return o}},makeSeriesChosenState:function(t){this.makeChosenState(t.points[0]),this.vanchart.hoverPoint=t.points[0]},cancelSeriesChosenState:function(t){this.cancelChosenState(t.points[0])}},a.inherit(e,n),t("../ChartLibrary").register(i.GAUGE_CHART,e),e}),i("chart/Radar",["require","./BaseChart","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BoundsManager","../theme/options","../ChartLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.lastScale=null,this.columnType=!1,this.refresh(e)}var i=t("./BaseChart"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),s=(t("../utils/BoundsManager"),t("../theme/options")),o=8,l="radar-top",h="radar-bottom",c="radar-left",d="radar-right";return e.prototype={constructor:e,doLayout:function(){var t=this._buildLocationMap();for(var e in t)for(var i=t[e],a=i.length-1;a>=0;a--){var r=i[a];r&&r.length&&this._buildRadarSeries(r)}},mergeDataPointAttributes:function(t){this._mergeMarkerAttributes(t),t.columnType=this.isColumnType()},mergeSeriesAttributes:function(t){var e=[t.seriesOption,this.option.plotOptions[t.type],this.option.plotOptions,s[t.type].plotOptions],i=n.queryList(e,"columnType");this.columnType=i;var r=a.pick(n.queryList(e,"connectNulls"),!0),o=n.queryList(e,"lineWidth")||0,l=n.queryList(e,"fillColor"),h=n.queryList(e,"color")||this._getDefaultSeriesColor(t.name);l=l?l===!0?h:l:"";var c=a.pick(n.queryList(e,"fillColorOpacity"),i?1:.15);n.merge(t,{lineWidth:o,lineColor:h,columnType:i,connectNulls:r,fillColor:l,fillColorOpacity:c})},_buildRadarSeries:function(t){this._calculateCategoryBasedPercentageAndTooltip(t);var e=t[0][0],i=e.radiusAxis,a=e.angleAxis;this.baseAxis=a,this.valueAxis=i,this.cateScale=a.scale,this.valueScale=i.scale,this.center=i.polar.center,this.radius=i.polar.radius,this.piece=a.piece;for(var r=this,n=0,s=t.length;s>n;n++){var o=t[n];o.forEach(function(t){t.points.sort(function(t,e){return r.cateScale(t.category)-r.cateScale(e.category)}),t.points.forEach(function(e){var i=e.y0;e.y0=r.valueScale(i),e.y=r.valueScale(e.y+i),e.radian=r.cateScale(e.category)*r.piece,e.pos=r._getArcPoint(e.y,e.radian),e.dataLabels&&e.dataLabels.enabled&&(t.columnType?r._calculateColumnTypeLabelPos(e):r._calculatePolygonTypeLabelPos(e))}),t.pathSegment=r._getPathSegment(t.points,t.connectNulls)})}},_calculateColumnTypeLabelPos:function(t){var e=this._getRadarPosition(t.category),i=this._getArcPoint(t.y-o,t.radian),a=t.labelDim;switch(e){case l:t.labelPos={x:-a.width/2,y:i[1]};break;case d:t.labelPos={x:i[0]-a.width,y:i[1]-a.height/2};break;case h:t.labelPos={x:-a.width/2,y:i[1]-a.height};break;case c:t.labelPos={x:i[0],y:i[1]-a.height/2}}},_calculatePolygonTypeLabelPos:function(t){var e=this._getRadarPosition(t.category),i=this._getArcPoint(t.y+o,t.radian),a=t.labelDim;switch(e){case l:t.labelPos={x:-a.width/2,y:i[1]-a.height};break;case d:t.labelPos={x:i[0],y:i[1]-a.height/2};break;case h:t.labelPos={x:-a.width/2,y:i[1]};break;case c:t.labelPos={x:i[0]-a.width,y:i[1]-a.height/2}}},_getRadarColumnPath:function(t,e,i){var a=.375*this.piece,r=i-a,n=i+a,s=d3.svg.arc().innerRadius(t).outerRadius(e).startAngle(r).endAngle(n);return s()},_getPathSegment:function(t,e){var i=[],a=[];if(e)i.push(a),t.forEach(function(t){t.isNull||a.push(t.pos)});else{for(var r=0,n=t.length,s=n-1;s>0;s--){var o=t[s],l=t[s-1];!o.isNull&&l.isNull&&(r=s)}for(var s=0;n>s;s++){var h=t[(s+r)%n];h.isNull&&a.length?(a.length>1&&i.push(a),a=[]):a.push(h.pos)}a.length&&i.push(a)}return i},_getRadarSeriesFillPath:function(t,e){return this._getRadarSeriesPath(t,e,!0)},_getRadarSeriesStrokePath:function(t,e){return this._getRadarSeriesPath(t,e,!1)},_getRadarSeriesPath:function(t,e,i){var r="",n=[];if(1==t.length){n=t[0];var s=n.length==this.baseAxis.getCategoryCount()||e;i=!s&&i,r=i?"M0,0":"";for(var o=0,l=n.length;l>o;o++){var h=o||i?"L":"M";r+=h+a.dealFloatPrecision(n[o][0])+","+a.dealFloatPrecision(n[o][1])}r+=s||i?"Z":""}else t.forEach(function(t){r+=i?"M0,0":"",t.forEach(function(t){r+="L"+a.dealFloatPrecision(t[0])+","+a.dealFloatPrecision(t[1])}),r+=i?"Z":""});return r},_getRadarPosition:function(t){var e=this.cateScale(t),i=this.cateScale.domain(),a=i.length/2;return 0==e?l:e>0&&a>e?d:e==a?h:e>a?c:void 0},getRadarCenter:function(){return this.center},getBaseAxis:function(){return this.baseAxis},getValueAxis:function(){return this.valueAxis},isColumnType:function(){return this.columnType},getInitRadius:function(){return this.valueScale(this.valueAxis.getStartPosValue())},_getInitPathSegment:function(t){var e=[];return t.forEach(function(t){var i=[];e.push(i),t.forEach(function(){i.push([0,0])})}),e},_getFixedPos:function(t,e){var i,a;if(t.columnType){var r=t.y,n=t.radian;i=r*Math.sin(n)+this.center[0],a=r*Math.cos(n+Math.PI)+this.center[1],n<Math.PI/2?a-=e.height:n>=Math.PI&&n<3*Math.PI/2?i-=e.width:n>=3*Math.PI/2&&n<2*Math.PI&&(a-=e.height,i-=e.width)}else{var r=t.marker.radius||this.getDefaultMarkerRadius();i=this.center[0]+t.pos[0]+r,a=this.center[1]+t.pos[1]+r}return[i,a]},getClosestPoint:function(t){if(!this.isColumnType()){var e,i=Number.MAX_VALUE,a=this.vanchart.hoverSeries,r=this.center;if(a)a.points.forEach(function(a){var n=a.pos,s=n[0]+r[0]-t[0],o=n[1]+r[1]-t[1],l=Math.sqrt(s*s+o*o);i>l&&!a.isNull&&(e=a,i=l)});else{var n=this.vanchart.series;n.forEach(function(a){a.points&&a.points.forEach(function(a){var n=a.pos,s=n[0]+r[0]-t[0],o=n[1]+r[1]-t[1],l=Math.sqrt(s*s+o*o);i>l&&!a.isNull&&(e=a,i=l)})})}return e}}},a.inherit(e,i),t("../ChartLibrary").register(r.RADAR_CHART,e),e}),i("chart/Bubble",["require","./BaseChart","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/ColorUtils","../theme/options","../ChartLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./BaseChart"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/QueryUtils"),s=t("../utils/ColorUtils"),o=t("../theme/options"),l=.7,h=800,c="rgb(138, 138, 138)";return e.prototype={constructor:e,doLayout:function(){var t=this.getVisibleChartData();this.isForceBubble()&&this.dealStackedSeries(t);var e=[];t.forEach(function(t){e=e.concat(t.points)});var i=this;this.calculateBubbleRadius(),this._calculateBubblePosition(t,e),e.forEach(function(t){i._calculatePointLabelAndTooltip(t)})},calculateBubbleRadius:function(){var t=this.getVisibleChartData(),e=Number.MAX_VALUE,i=-e,n=[],s=[],o=this;t.forEach(function(t,a){if(t.points.length>0){for(var r=Number.MAX_VALUE,l=-r,h=0,c=t.points.length;c>h;h++){var d=t.points[h],u=d.size;if(0>u){if(!d.displayNegative)continue;u=Math.abs(u),t.chart.option.legend.enabled&&o._setNegativeColorAttr(d,t)}l=Math.max(l,u),r=Math.min(r,u)}e=Math.min(e,r),i=Math.max(i,l),n[a]=r,s[a]=l}});var l=a.pick(this.vanchart.scale,1);t.forEach(function(t,o){if(t.points.length>0){var h=t.maxSize,c=t.minSize,d=t.sizeBy==r.SIZE_BY_AREA,u=a.hasDefined(t.seriesOption.minSize)&&a.hasDefined(t.seriesOption.maxSize),g=u?s[o]:i,f=u?n[o]:e,p=0;g!=f&&(p=d?(h*h-c*c)/(g-f):(h-c)/(g-f)),t.points.forEach(function(t){var e=p*(Math.abs(t.size)-f),i=d?Math.sqrt(c*c+e):f+e;t.pointOption.minSize&&t.pointOption.maxSize&&(i=t.pointOption.minSize),i=t.size<0&&!t.displayNegative?0:i,t.radius=i/2*l})}})},_calculateBubblePosition:function(t,e){this.isForceBubble()?this._calculateForceBubblePosition(t,e):this._calculateNormalBubblePosition(t,e)},_calculateNormalBubblePosition:function(t,e){if(t.forEach(function(t){var e=t.baseAxis,i=t.valueAxis;t.points.forEach(function(t){var a=e.scale.rangeBand?e.scale.rangeBand()/2:0,r=Math.round(e.scale(t.category)+a),s=i.scale(t.value+t.y0);n.merge(t,{posX:r,posY:s},!0)})}),this.isSupportAnimation()){e.sort(function(t,e){return e.radius-t.radius});var i=e.length;if(i>0){var a=h/i;e.forEach(function(t,e){n.merge(t,{delayTime:a*e},!0)})}}},_calculateForceBubblePosition:function(t,e){var i=0,a=this.getPlotBounds(),r=[a.width,a.height];if(t.forEach(function(t){var e;t.points.forEach(function(t){e=e||t,e=t.radius>e.radius?t:e,i=Math.max(i,t.radius)}),t.cluster=e}),!this.isUpdateWithForce()){d3.layout.pack().sort(null).size(r).children(function(t){return t.values}).value(function(t){return t.radius*t.radius}).nodes({values:d3.nest().key(function(t){return t.seriesName}).entries(e)});var n=.1,s=.005,o=2,l=2,h=.5,c=.02,d=.9;e.forEach(function(t){t.px=t.x,t.py=t.y});for(var u=n;u>=s;u-=u>.07?.001:5e-4){var g,f,p,m,v,_=e.length;if((p=u*c)&&(m=r[0]/2,v=r[1]/2,g=-1,p))for(;++g<_;)f=e[g],f.x+=(m-f.x)*p,f.y+=(v-f.y)*p;for(g=-1;++g<_;)f=e[g],f.x-=(f.px-(f.px=f.x))*d,f.y-=(f.py-(f.py=f.y))*d;e.forEach(function(t){var e=t.series.cluster;if(e&&e!=t){var i=t.x-e.x,a=t.y-e.y,r=Math.sqrt(i*i+a*a),n=t.radius+e.radius;r!=n&&(r=(r-n)/r*u,t.x-=i*=r,t.y-=a*=r,e.x+=i,e.y+=a)}});for(var g=0;_>g;g++)for(var y=e[g],b=0;_>b;b++){var x=e[b];if(x!==y){var m=y.x-x.x,v=y.y-x.y,C=Math.sqrt(m*m+v*v),L=y.radius+x.radius+(y.series.cluster===x.series.cluster?o:l);L>C&&(C=(C-L)/C*h,y.x-=m*=C,y.y-=v*=C,x.x+=m,x.y+=v)}}}e.forEach(function(t){t.posX=t.x,t.posY=t.y})}},_setNegativeColorAttr:function(t,e){t.color=c,t.clickColor=s.getClickColor(c);var i=[t.pointOption,e.seriesOption,e.chart.option.plotOptions[e.type],e.chart.option.plotOptions,o[e.type].plotOptions];t.mouseOverColor=n.queryList(i,"mouseOverColor")||s.getHighLightColor(c)},_calculatePointLabelAndTooltip:function(t){var e=this.isUpdateWithForce();if(this.isForceBubble()){if(t.labelContent&&t.labelDim){var i=t.radius;if(t.labelDim.width>2*i||t.labelDim.height>2*i)t.labelPos=null;else{var a=e?0:t.posX,n=e?0:t.posY;t.labelPos={x:-t.labelDim.width/2+a,y:-t.labelDim.height/2+n}}}}else{var s=t.dataLabels;s&&s.enabled&&(this._calculateBubbleLabelInfo(t,s,r.INSIDE),this._calculateLabelPos(t))}this.mergeSinglePointTooltipAttr(t)},_calculateLabelPos:function(t){var e=t.labelDim,i=t.posX-e.width/2,a=t.posY-e.height/2,r={x:i,y:a};n.merge(t,{labelPos:r},!0)},getTrendLineXYValues:function(t){return this.getBubbleTrendLineXYValues(t)},_getFixedPos:function(t){var e=t.radius||0,i=this.getPlotBounds(),a=this.isForceBubble()?t.x:t.posX,r=this.isForceBubble()?t.y:t.posY,a=i.x+a+e,r=i.y+r+e;return[a,r]},mergeDataPointAttributes:function(t){var e=[t.pointOption,t.series.seriesOption,this.option.plotOptions[this.componentType],this.option.plotOptions,o[this.componentType].plotOptions],i=a.pick(n.queryList(e,"fillColorOpacity"),l),r=a.pick(n.queryList(e,"size"),0),s=this.isForceBubble();n.merge(t,{fillColorOpacity:i,x:t.category,y:t.value,size:s?t.isNull?"-":t.value:r,shadow:n.queryList(e,"shadow"),displayNegative:n.queryList(e,"displayNegative"),delayTime:0},!0),s&&(t.x=void 0,t.y=void 0)},mergeSeriesAttributes:function(t){var e=[t.seriesOption,this.option.plotOptions[this.componentType],this.option.plotOptions,o[this.componentType].plotOptions];n.merge(t,{sizeBy:n.queryList(e,"sizeBy"),maxSize:n.queryList(e,"maxSize"),minSize:n.queryList(e,"minSize"),shadow:n.queryList(e,"shadow"),displayNegative:n.queryList(e,"displayNegative")})},getClosestPoint:function(t){for(var e=this.getVisibleChartData(),i=this.getPlotBounds(),a=e.length-1;a>=0;a--)for(var r=e[a],n=r.points.length-1;n>=0;n--){var s=r.points[n],o=s.posX+i.x-t[0],l=s.posY+i.y-t[1],h=Math.sqrt(o*o+l*l);if(h<=s.radius)return s}},getRender:function(){return!this.vanchart._leaflet&&this.render}},a.inherit(e,i),t("../ChartLibrary").register(r.BUBBLE_CHART,e),e}),i("chart/Scatter",["require","./BaseChart","../utils/BaseUtils","../utils/ColorUtils","../Constants","../utils/QueryUtils","../theme/options","../ChartLibrary"],function(t){function e(t,e,a){i.call(this,t,e,a),this.refresh(e)}var i=t("./BaseChart"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=t("../utils/QueryUtils"),o=t("../theme/options"),l=800,h=1,c=2;return e.prototype={constructor:e,doLayout:function(){var t=this,e=this.getVisibleChartData(),i=[];e.forEach(function(e){if(e.points.length>0){var a=e.baseAxis,r=e.valueAxis;e.points.forEach(function(e){if(e.visible){var i=a.scale.rangeBand?a.scale.rangeBand()/2:0,n=Math.round(a.scale(e.category)+i),o=r.scale(e.value+e.y0);s.merge(e,{posX:n,posY:o},!0),t._calculatePointLabelAndTooltip(e)}}),i=i.concat(e.points),e.points.sort(function(t,e){return t.posX-e.posX})}}),this._calculatePointDelayTime(i)},_calculatePointDelayTime:function(t){if(this.isSupportAnimation()){var e=t.length;e>0&&t.forEach(function(t,i){var a=d3.ease("exp-in-out")(i/e)*l;s.merge(t,{delayTime:a},!0)})}},_calculatePointLabelAndTooltip:function(t){var e=t.dataLabels;e&&e.enabled&&(this._calculateBubbleLabelInfo(t,e,n.OUTSIDE),this._calculateLabelPos(t)),this.mergeSinglePointTooltipAttr(t)},_calculateLabelPos:function(t){var e=t.labelDim,i={x:t.posX-e.width/2,y:t.posY-c-e.height};s.merge(t,{labelPos:i},!0)},getTrendLineXYValues:function(t){return this.getBubbleTrendLineXYValues(t)},_createCategoryLine:function(t,e,i,a){return this._createBubbleTooltipSeriesLine(t,e,i,a)},_createSeriesLine:function(t,e,i,a){return this._createBubbleTooltipXYSizeLine(t,e,i,a)},_getFixedPos:function(t){var e=t.marker.radius||this.getDefaultMarkerRadius(),i=this.getPlotBounds(),a=i.x+t.posX+e,r=i.y+t.posY+e;return[a,r]},mergeDataPointAttributes:function(t){var e=[t.pointOption,t.series.seriesOption,this.option.plotOptions[t.series.type],this.option.plotOptions,o[t.series.type].plotOptions],i=a.pick(s.queryList(e,"fillColorOpacity"),h);t.color&&(i=a.pick(r.getColorOpacityWithoutDefault(t.color),i));var n=a.pick(s.queryList(e,"size"),0);s.merge(t,{fillColorOpacity:i,x:t.category,y:t.value,size:n},!0),this._mergeMarkerAttributes(t),a.isNullMarker(t.marker)&&(t.marker.symbol=a.getDefaultMarkerSymbol(t.series.index))},mergeSeriesAttributes:function(t){a.isNullMarker(t.marker)&&(t.marker.symbol=a.getDefaultMarkerSymbol(t.index));var e=s.merge(o[t.type].plotOptions,this.option.plotOptions,!0);s.merge(e,this.option.plotOptions[t.type],!0);var i=t.seriesOption,r=[i,e],n=s.queryList(r,"lineWidth")||0,l=this._getSeriesInterpolate(i,e),h=d3.svg.line().interpolate(l).x(function(t){return t.posX}).y(function(t){return t.posY}).defined(function(t){return!t.isNull});s.merge(t,{lineWidth:n,lineSvg:h,interpolate:l})},getClosestPoint:function(t){for(var e=this.getVisibleChartData(),i=this.getPlotBounds(),a=e.length-1;a>=0;a--)for(var r=e[a],n=r.points.length-1;n>=0;n--){var s=r.points[n],o=s.posX+i.x-t[0],l=s.posY+i.y-t[1],h=Math.sqrt(o*o+l*l),c=s.marker.radius||4.5;if(c>=h)return s}},getRender:function(){return!this.vanchart._leaflet&&this.render}},a.inherit(e,i),t("../ChartLibrary").register(n.SCATTER_CHART,e),e}),i("chart/Map",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","./BaseChart","../component/Geo","../component/Series","../theme/options","../ChartLibrary"],function(t){function e(t,e,i){n.call(this,t,e,i),this.layerMap=[]}var i=t("../Constants"),a=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),n=t("./BaseChart"),s=t("../component/Geo"),o=t("../component/Series"),l=t("../theme/options");return e.prototype={constructor:e,type:i.MAP_CHART,doLayout:function(){var t=this.vanchart.getChart(i.BUBBLE_CHART);t&&t.calculateBubbleRadius()},initLayerInfo:function(){this.initMapData();var t=this.vanchart.getComponent(i.DRILL_TOOLS);t&&t.addIconData(this.layerMap[0][0]);var e=this.vanchart.getComponent(i.GEO_COMPONENT);this.vanchart._leaflet.fitBounds(e.getFitBounds())},initMapData:function(t,e,a){t=t||this.vanchart.series,e=e||this.vanchart.getComponent(i.GEO_COMPONENT),a=a||0;for(var r=!0,n=t.length-1;n>=0;n--){var s=t[n];this._calculatePercentage(s.points),this._mergeTooltipAttributes(s.points);for(var o=s.points.length-1;o>=0;o--){var l=s.points[o];l.drillSeries&&l.geo&&(r=!1,this.layerMap[a]=this.layerMap[a]||[],this.layerMap[a].push({geo:e,series:t,layerIndex:a}),this.initMapData(l.drillSeries,l.geo,a+1))}}if(r)for(var n=t.length-1;n>=0;n--)this.layerMap[a]=this.layerMap[a]||[],this.layerMap[a].push({geo:e,series:t,layerIndex:a})},_getComputedMapStyle:function(t){var e={fillColor:r.queryList(t,"fillColor"),fillColorOpacity:r.queryList(t,"fillColorOpacity"),borderWidth:r.queryList(t,"borderWidth"),borderColor:r.queryList(t,"borderColor"),borderOpacity:r.queryList(t,"borderOpacity")};return e},mergeDataPointAttributes:function(t){var e,n,h=t.pointOption,c=[h,t.series.seriesOption,this.option.plotOptions[t.series.type],this.option.plotOptions,l[t.series.type].plotOptions],d=r.queryList(c,"drill"),u=a.pick(h.name,h[0]),g=a.pick(h.value,h[1]);if(d){e=[];var f=this;d.series.forEach(function(t){e.push(new o(f,t))}),this.option.geo=d.geo,n=new s(this.vanchart,this.option,i.GEO_COMPONENT)}var p=this._getComputedMapStyle(c);p.fillColor=t.color,r.merge(t,{mapStyle:p,drillSeries:e,geo:n,location:u,value:g},!0),t.series.validMap=t.series.validMap||{},t.series.validMap[u]=!0},iconDataOfMap:function(t){for(var e=this.layerMap.length-1;e>=0;e--)for(var i=this.layerMap[e],a=i.length-1;a>=0;a--)if(i[a].series==t)return i[a]},drillDown:function(t){if(t.drillSeries){this.vanchart.series=t.drillSeries,this.vanchart.components.geo=t.geo,this.vanchart._leaflet.fitBounds(t.geo.getFitBounds());var e=this.vanchart.getComponent(i.DRILL_TOOLS),a=this.iconDataOfMap(t.drillSeries);e&&a&&e.addIconData(a),this.vanchart.refreshComponentsAndSeries()}},drillUp:function(t){this.vanchart.series=t.series,this.vanchart.components.geo=t.geo,this.vanchart._leaflet.fitBounds(t.geo.getFitBounds());var e=this.vanchart.getComponent(i.DRILL_TOOLS);e&&e.deleteIconData(t.series),this.vanchart.refreshComponentsAndSeries()}},a.inherit(e,n),t("../ChartLibrary").register(i.MAP_CHART,e),e}),i("render/PieSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){n.call(this,t),this.pie=t,this.lastData={}}var i="path-g",a="label-g",r="pie-g",n=t("./BaseRender"),s=t("../utils/BaseUtils"),o=t("../utils/ColorUtils"),l=t("../Constants"),h=t("../utils/BezierEasing"),c=1.1,d=1e3,u="bounce",g=h.css.swing,f=400,p="start-gradual-stop",m="end-gradual-stop";return e.prototype={constructor:e,render:function(){var t=this.pie.getPlotBounds(),e=this.pie.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=e.append("g")),this._bodyG.attr("transform",s.makeTranslate(t));var n=this,o=this.pie.getVisibleChartData(),l=this._bodyG.selectAll("g."+r).data(o,function(t){return t.className});l.attr("transform",function(t){return s.makeTranslate([t.centerX,t.centerY])}).each(function(t){var e=d3.select(this);n._updateDefs(e.select("defs"),t),n._updateSlices(e.select("g."+i),t),n._drawLabel(e.select("g."+a),t,d),n._updateLastData(t.category,t.visiblePoints)});var h=l.enter().append("g").attr("class",function(t){return r+" "+t.className});l.exit().remove(),h.each(function(t){var e=d3.select(this).attr("transform",s.makeTranslate([t.centerX,t.centerY]));e.append("defs"),e.append("g").attr("class",i),e.append("g").attr("class",a),n._updateDefs(e.select("defs"),t),n._updateSlices(e.select("g."+i),t,!0),n._drawLabel(e.select("g."+a),t,d),n._updateLastData(t.category,t.visiblePoints)})},_updateDefs:function(t,e){if(e.style&&e.style==l.STYLE_GRADUAL){var i=this,a=e.visiblePoints,r=t.selectAll("radialGradient").data(a,function(t){return t.className}),n=r.enter().append("radialGradient");n.append("stop").attr("class",p),n.append("stop").attr("class",m),r.attr("gradientUnits","userSpaceOnUse").attr("cx","0%").attr("cy","0%").attr("r",function(t){return Math.max(t.radius,0)+"px"}).attr("id",function(t){return i._getGradualID(t)}),r.select("stop."+p).attr("offset",function(t){return t.series.innerRadius/t.radius*100+"%"}).style("stop-color",function(t){return o.getColorWithDivider(t.color,.8)}),r.select("stop."+m).attr("offset","100%").style("stop-color",function(t){return t.color})}},_updateSlices:function(t,e,i){var a,r=d3.svg.arc().innerRadius(e.innerRadius),n=e.visiblePoints,o=Math.PI*e.startAngle/180,l=Math.PI*e.endAngle/180,h=this;a=this.pie.groupDataByClassName()?t.selectAll("path").data(n,function(t){return t.className}):t.selectAll("path").data(n);var c=d3.transform(t.attr("transform")).rotate;this.pie.recalculateLabelPos(e,s.toRadian(c));var p=a.exit(),m=this.pie.isSupportAnimation(),v=p.empty()&&a.enter().empty();m?p.transition().ease(u).duration(d).attrTween("d",function(t){var e,i=this._dataIndex_,a=this._current_.radius;if(0==i)e={startAngle:o,endAngle:o,radius:a};else if(i>=n.length)e={startAngle:l,endAngle:l,radius:a};else{var s=n[i-1];if(s.lastShape){var h=Math.abs(s.lastShape.endAngle-s.endAngle),c=t.startAngle+h;e={startAngle:c,endAngle:c,radius:a}}else e={startAngle:t.startAngle,endAngle:t.startAngle,radius:t.radius}}var d=d3.interpolate(this._current_,e);return function(e){return r.outerRadius(t.radius)(d(e))}}).remove():p.remove(),h.addShapeEventHandler(a.enter().append("path"));var _=v&&!i?f:d,y=v&&!i?g:u;a.each(function(t){this._dataIndex_=t.index;var e=d3.select(this).attr("class",t.className).style("fill",h._getFill(t)).style("stroke",t.borderColor).style("stroke-width",t.borderWidth);m?e.transition().ease(y).duration(_).attrTween("d",function(t){var e=this._current_;if(i)e={startAngle:o,endAngle:o,radius:t.radius};else if(!e){var a=t.index;if(0==a)e={startAngle:o,endAngle:o,radius:t.radius};else if(a>=n.length-1)e={startAngle:l,endAngle:l,radius:t.radius};else{var s=n[a-1];if(s.lastShape){var c=Math.abs(s.lastShape.endAngle-s.endAngle),d=t.startAngle+c;e={startAngle:d,endAngle:d,radius:t.radius}}else e={startAngle:t.startAngle,endAngle:t.startAngle,radius:t.radius}}}var u=d3.interpolate(e,h._getArcData(t));return this._current_=u(1),function(t){var e=u(t);return r.outerRadius(e.radius)(e)}}):e.attr("d",function(t){return this._current_=h._getArcData(t),r.outerRadius(t.radius)(this._current_)})})},_drawLabel:function(t,e,i){i=i||0,i=this.pie.isSupportAnimation()?i:0;var a=this.pie.getPlotBounds(),r=e.centerX+a.x,n=e.centerY+a.y;this._drawSvgDataLabels(t,e.visiblePoints,r,n,i,e.name)},onDragStart:function(t,e){var r=this._bodyG.select("g."+t.className),n=r.select("g."+a),s=r.select("g."+i);this._removeSvgDataLabels(n,t.category),this.initPos=e,this.initRotate=d3.transform(s.attr("transform")).rotate},_getPositionInPie:function(t,e){var i=this.pie.getPlotBounds(),a=t[0]-i.x-e.centerX,r=t[1]-i.y-e.centerY;return[a,r]},onDrag:function(t,e){var a=this._bodyG.select("g."+t.className),r=a.select("g."+i),n=this._getAngle(this._getPositionInPie(this.initPos,t),[0,0]),s=this._getAngle(this._getPositionInPie(e,t),[0,0]),o=s-n+this.initRotate;r.attr("transform","rotate("+o+",0,0)")},onDragEnd:function(t){var e=this._bodyG.select("g."+t.className),r=e.select("g."+a),n=e.select("g."+i),o=d3.transform(n.attr("transform")).rotate;this.pie.recalculateLabelPos(t,s.toRadian(o)),this._drawLabel(r,t)},_getFill:function(t){var e=this._bodyG.select("#"+this._getGradualID(t));return e.select("stop."+p).style("stop-color",o.getColorWithDivider(t.color,.9)),e.select("stop."+m).style("stop-color",t.color),t.style==l.STYLE_GRADUAL?"url(#"+this._getGradualID(t)+")":t.color},_getClickedFill:function(t){var e=this._bodyG.select("#"+this._getGradualID(t));return e.select("stop."+p).style("stop-color",o.getColorWithDivider(t.clickColor,.9)),e.select("stop."+m).style("stop-color",t.clickColor),t.style==l.STYLE_GRADUAL?"url(#"+this._getGradualID(t)+")":t.clickColor},_getMouseOverFill:function(t){var e=this._bodyG.select("#"+this._getGradualID(t));return e.select("stop."+p).style("stop-color",o.getColorWithDivider(t.mouseOverColor,.9)),e.select("stop."+m).style("stop-color",t.mouseOverColor),t.style==l.STYLE_GRADUAL?"url(#"+this._getGradualID(t)+")":t.mouseOverColor},_getGradualID:function(t){return t.className+this.pie.vanchart.getIDPrefix()},_getArcData:function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,radius:t.radius}},_getAngle:function(t,e){return Math.atan2(t[1]-e[1],t[0]-e[0])/(Math.PI/180)},_updateLastData:function(t,e){var i=this.lastData[t];if(this.lastData[t]=e,i){for(var a={},r=0,n=i.length;n>r;r++){var s=i[r],o=this.pie.groupDataByClassName()?s.className:s.index;a[o]=s}for(var r=0,n=e.length;n>r;r++){var l=e[r],o=this.pie.groupDataByClassName()?l.className:l.index,h=a[o];h&&(l.lastShape=this._getArcData(h))}}},makeClickedState:function(t){var e=this._getElementByData(t);e&&e.style("fill",this._getClickedFill(t))},cancelClickedState:function(t){var e=this._getElementByData(t);e&&e.style("fill",this._getMouseOverFill(t))},makeChosenState:function(t){var e=this._getElementByData(t);if(e){var i=this,a=e.node();clearTimeout(a.cancelChosenTimeout);var r=d3.svg.arc().innerRadius(t.series.innerRadius);a&&!a.isChosen&&(e.style("fill",function(t){return i._getMouseOverFill(t)}).transition().ease("elastic").duration(800).attrTween("d",function(t){var e=t.radius,a=d3.interpolate(e,1.1*e),n=i._getArcData(t);return function(t){return r.outerRadius(a(t))(n)}}),a.isChosen=!0)}},_getElementByData:function(t){return this._bodyG.select("."+t.className)},cancelChosenState:function(t){var e=this._getElementByData(t);if(e){var i=d3.svg.arc().innerRadius(t.series.innerRadius),a=this,r=e.node();if(!r||!r.isChosen)return;clearTimeout(r.cancelChosenTimeout),r.cancelChosenTimeout=setTimeout(function(){r.isChosen&&(e.style("fill",function(t){return a._getFill(t)}).transition().ease("elastic").duration(600).attrTween("d",function(t){var e=t.radius,r=d3.interpolate(e*c,e),n=a._getArcData(t);return function(t){return i.outerRadius(r(t))(n)}}),r.isChosen=!1)},50)}}},s.inherit(e,n),t("./RenderLibrary").register(l.PIE_SVG,e),e}),i("render/BarSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../utils/ColorUtils","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.bar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/ColorUtils"),s=t("../utils/BezierEasing"),o=400,l=150,h=250,c=6,d="start-gradual-class",u="end-gradual-class",g="bar-seires-group";e.prototype={constructor:e,render:function(){var t=this.bar.getVanchartRender().getRenderRoot();this._bodyG?this._updateChartBodyTranslate([this._bodyG,this._labelG],this.bar.isSupportAnimation(),h):(this._bodyG=t.append("g"),this._labelG=t.append("g"),this._updateChartBodyTranslate([this._bodyG,this._labelG]));var e=this.bar.getVisibleChartData(),i=this._bodyG.selectAll("g."+g).data(e,function(t){return t.className});this._dropSeries(i),this._updateSeries(i),this._createSeries(i),this._drawNormalChartLabels(this._labelG)},_dropSeries:function(t){var e=t.exit(),i=this.bar.isSupportAnimation();e.each(function(){d3.select(this).selectAll("rect").transition().duration(i?l:0).ease("linear").attrTween("y",function(t){var e=t.y,i=t.height,a=e+i;return function(t){var e=i*(1-d3.ease("back")(t));return a-e+"px"}}).attrTween("height",function(t){var e=t.height;return function(t){return e*(1-d3.ease("back")(t))+"px"}}).remove()})},_updateSeries:function(t){var e=a.pick(this.emptySeries,0);this.emptySeries=t.exit().size();var i=this;t.each(function(t){var a=d3.select(this);i._updateDefs(t.points,a.select("defs"),t.getLocation());var r=a.selectAll("rect").data(t.points,function(t){return t.className}),n=e<i.emptySeries?l:0,s=e>i.emptySeries?h:0;r.empty()?i._crateInitialBarElement(r,s):i._updateBarTransition(r,n),r.enter().empty()||i._crateInitialBarElement(r,n+h),r.exit().remove()})},_createSeries:function(t){var e=t.enter().append("g").attr("class",g),i=this;e.each(function(t){var e=d3.select(this);i._updateDefs(t.points,e.append("defs"),t.getLocation());var a=e.selectAll("rect").data(t.points,function(t){return t.className});a.call(i._crateInitialBarElement.bind(i))})},_updateDefs:function(t,e,i){var a=this;if(this.bar.option.style){var s,o,l,h,c=e.selectAll("linearGradient").data(t,function(t){return t.className;
});switch(s=o=l=h="0%",i){case r.TOP:o="100%";break;case r.BOTTOM:h="100%";break;case r.LEFT:s="100%";break;case r.RIGHT:l="100%"}c.enter().append("linearGradient").attr("x1",s).attr("y1",o).attr("x2",l).attr("y2",h).attr("id",function(t){return a._getGradualID(t)}),c.append("stop").attr("offset","0%").attr("class",d).style("stop-color",function(t){return n.getColorWithDivider(t.color,.9)}),c.append("stop").attr("offset","100%").attr("class",u).style("stop-color",function(t){return t.color})}var g=[];t.forEach(function(t){if(t.image&&(g.push(t),t.image))switch(g.push(t),t.location){case r.BOTTOM:t.imageX=t.x,t.imageY=t.y+t.height%t.imageHeight;break;case r.TOP:case r.LEFT:t.imageX=t.x,t.imageY=t.y;break;case r.RIGHT:t.imageX=t.x+t.width%t.imageWidth,t.imageY=t.y}});var f=e.selectAll("pattern").data(g,function(t){return t.className}),p=f.enter().append("pattern");p.append("image"),f.attr("x",function(t){return t.imageX}).attr("y",function(t){return t.imageY}).attr("width",function(t){return t.imageWidth}).attr("height",function(t){return t.imageHeight}).attr("patternUnits","userSpaceOnUse").attr("id",function(t){return a._getImageID(t)}).select("image").attr("x",0).attr("y",0).attr("width",function(t){return t.imageWidth}).attr("height",function(t){return t.imageHeight}).attr("xlink:href",function(t){return t.image})},_getGradualID:function(t){var e=this.bar.vanchart.getIDPrefix();return"gradual"+t.className+e},_getImageID:function(t){var e=this.bar.vanchart.getIDPrefix();return"image"+t.className+e},_getFillWidthColor:function(t,e){var i=this._bodyG.select("#"+this._getGradualID(t));i.select("stop."+d).style("stop-color",n.getColorWithDivider(e,.9)),i.select("stop."+u).style("stop-color",e);var a=this.bar.option.style,s="url(#"+this._getGradualID(t)+")",o="url(#"+this._getImageID(t)+")";return t.image?o:a==r.STYLE_GRADUAL?s:e},_getMouseOverFill:function(t){return this._getFillWidthColor(t,t.mouseOverColor)},_getFill:function(t){return this._getFillWidthColor(t,t.color)},_getClickedFill:function(t){return this._getFillWidthColor(t,t.clickColor)},_crateInitialBarElement:function(t,e){e=e||0;var i=this,a=t.enter().append("rect");this.addShapeEventHandler(a);var r=this.bar.isSupportAnimation();a.each(function(t){var a=i.bar.getInitBarAttribute(t),n=r?a.init:t,l=a.end,h=d3.select(this);i._setInitBarAttributes(h,t,n),r&&t.width>0&&t.height>0?h.transition().ease(s.css.swing).duration(o).delay(e).attr("x",l.x).attr("y",l.y).attr("width",Math.max(l.width,0)).attr("height",Math.max(l.height,0)).each("end",function(){h.attr("x",t.x).attr("y",t.y).attr("width",Math.max(t.width,0)).attr("height",Math.max(t.height,0))}):h.attr("x",t.x).attr("y",t.y).attr("width",Math.max(t.width,0)).attr("height",Math.max(t.height,0))})},_setInitBarAttributes:function(t,e,i){t.attr("class",e.className).attr("x",i.x).attr("y",i.y).attr("width",Math.max(i.width,0)).attr("height",Math.max(i.height,0)).attr("rx",e.borderRadius).attr("ry",e.borderRadius).style({fill:this._getFill(e),stroke:e.borderColor,"stroke-width":e.borderWidth}).each(function(){this._current_={x:e.x,y:e.y,width:e.width,height:e.height}})},_updateBarTransition:function(t,e){var i=this.bar.isSupportAnimation(),a=this,e=e||0;i?t.each(function(t){var i=this._current_||{x:t.x,y:t.y,width:t.width,height:t.height};this._current_={x:t.x,y:t.y,width:t.width,height:t.height},d3.select(this).transition().duration(h).delay(e).ease("linear").attrTween("x",function(){return function(e){return i.x+(t.x-i.x)*s.css.swing(e)+"px"}}).attrTween("y",function(){return function(e){return i.y+(t.y-i.y)*s.css.swing(e)+"px"}}).attrTween("width",function(){return function(e){return i.width+(t.width-i.width)*s.css.swing(e)+"px"}}).attrTween("height",function(){return function(e){return i.height+(t.height-i.height)*s.css.swing(e)+"px"}})}):t.each(function(t){a._setInitBarAttributes(d3.select(this),t,t)})},_getElementByData:function(t){return this._bodyG.select("."+t.className)},makeChosenState:function(t){this._getElementByData(t).style("stroke",t.mouseOverColor).style("fill",this._getMouseOverFill(t)).style("stroke-width",t.borderWidth).style("stroke-opacity",.35).interrupt(r.SELECT_ANIMATION).transition(r.SELECT_ANIMATION).duration(100).ease("ease-out-in").style("stroke-width",c)},cancelChosenState:function(t){var e=this._getElementByData(t);e.interrupt(r.SELECT_ANIMATION).transition(r.SELECT_ANIMATION),e.style("fill",this._getFill(t)).style("stroke",t.borderColor).style("stroke-opacity",1).style("stroke-width",t.borderWidth)},makeClickedState:function(t){this._getElementByData(t).style("fill",this._getClickedFill(t))},cancelClickedState:function(t){this._getElementByData(t).style("fill",this._getMouseOverFill(t))}},a.inherit(e,i),t("./RenderLibrary").register(r.BAR_SVG,e)}),i("render/LineSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","../utils/QueryUtils","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.line=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=(t("../utils/QueryUtils"),t("../utils/BezierEasing")),o="lineGroupG",l="areaGroupG",h="markerGroupG",c="pathG",d="areaG",u=800,g=250,f=.65;return e.prototype={constructor:e,render:function(){var t=this.line.getVanchartRender().getRenderRoot();this._bodyG?this._updateChartBodyTranslate([this._bodyG],this.line.isSupportAnimation(),g):(this._bodyG=t.append("g"),this._defsG=this._bodyG.append("g"),this._areaG=this._bodyG.append("g"),this._lineG=this._bodyG.append("g"),this._labelG=this._bodyG.append("g"),this._updateChartBodyTranslate([this._bodyG])),this._updateLineSeries(),this._drawNormalChartLabels(this._labelG,this.line.isSupportAnimation()?u:0)},_updateLineSeries:function(t,e){var i=this._updateDataBinding(),a=i.defsG,r=i.areaG,n=i.lineG;t=this.line.isSupportAnimation()?t||g:0,e=e||s.css.swing,a.exit().remove(),n.exit().remove(),r.exit().remove(),a.selectAll("clipPath").select("rect").transition().ease(e).duration(t).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}),r.selectAll("path").filter(function(t){return t.lineData.isStack}).transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)})}),n.select("g."+c).selectAll("path").transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)})}),n.select("g."+d).selectAll("path").filter(function(t){return!t.lineData.isStack}).transition().ease(e).duration(t).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).each("end",function(){d3.select(this).attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)})});var o=this;n.each(function(i){var a=d3.select(this).select("g."+h).selectAll("g").data(i.points);a.transition().ease(e).duration(t).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).each("end",function(t){var e=d3.select(this);e.attr("transform",function(){return"translate("+t.x+","+t.y+")"}),t.elWrapper=e}),a.exit().remove(),d3.select(this).transition().delay(t).each("end",function(){a.call(o._createSvgMarker.bind(o)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})})}),this._createNewLineSeries(i)},_updateDataBinding:function(){var t=this.line.getVisibleChartData(),e=this._lineG.selectAll("g."+o).data(t,function(t){return t.className}),i=this._areaG.selectAll("g."+l).data(t,function(t){return t.className}),a=this._defsG.selectAll("defs").data(t,function(t){return t.className});return a.selectAll("clipPath").data(function(t){return t.dataBands}),i.selectAll("path").data(function(t){return t.dataBands}),e.select("g."+c).selectAll("path").data(function(t){return t.dataBands}),e.select("g."+d).selectAll("path").data(function(t){return t.dataBands}),{defsG:a,areaG:i,lineG:e}},_createNewLineSeries:function(t){var t=this._updateDataBinding(),e=t.defsG,i=t.areaG,a=t.lineG,r=this.line.isSupportAnimation()?u:0;if(e.enter().append("defs").selectAll("clipPath").data(function(t){return t.dataBands}).enter().append("clipPath").attr("id",function(t){return t.clipID}).append("rect").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",0).attr("height",function(t){return t.height}).transition().ease("quad-in-out").duration(r).attr("width",function(t){return t.width}),this.line.componentType==n.AREA_CHART){var s=i.enter();s.append("g").attr("class",function(t){return l+" "+t.className}).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").filter(function(t){return t.lineData.isStack}).style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke","none").attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}),this.addSeriesEventHandler(s)}var g=a.enter().append("g").attr("class",function(t){return o+" "+t.className});g.append("g").attr("class",c).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").style("fill","none").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.lineData.lineWidth}).attr("d",function(t){var e=t.lineData;return e.lineSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}),this.addSeriesEventHandler(g),this.line.componentType==n.AREA_CHART&&g.append("g").attr("class",d).selectAll("path").data(function(t){return t.dataBands}).enter().append("path").filter(function(t){return!t.lineData.isStack}).style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke","none").attr("d",function(t){var e=t.lineData;return e.areaSvg(e.points)}).attr("clip-path",function(t){return"url(#"+t.clipID+")"}),this.line.isSupportAnimation()?g.append("g").attr("class",h).selectAll("g").data(function(t){return t.points}).call(this._createSvgMarker.bind(this)).attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(0.01)"}).transition().delay(function(t){return t.delay}).duration(150).ease("ease-out-in").attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(1.5)"}).transition().duration(150).ease("ease-out-in").attr("transform",function(t){return"translate("+t.x+","+t.y+") scale(1)"}):g.append("g").attr("class",h).selectAll("g").data(function(t){return t.points}).call(this._createSvgMarker.bind(this)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})},_createImageMarker:function(t,e){var i=new Image;i.onload=function(){e(this.width,this.height)},i.src=t},getElementByData:function(t){return this._lineG.select("g."+t.className)},makeClickedState:function(t){this._makeMarkerClickedState(this._lineG,t),this._lineG.select("g."+t.series.className).select("g."+d).selectAll("path").style("fill",function(t){return r.getClickColor(t.fillColor)}),this._areaG.select("g."+t.series.className).selectAll("path").style("fill",function(t){return r.getClickColor(t.fillColor)})},cancelClickedState:function(t){this._cancelMarkerClickedState(this._lineG,t),this._lineG.select("g."+t.series.className).select("g."+d).selectAll("path").style("fill",function(t){return r.getHighLightColor(t.fillColor)}),this._areaG.select("g."+t.series.className).select("g."+c).selectAll("path").style("fill",function(t){return r.getHighLightColor(t.fillColor)})},makeChosenState:function(t){this._makeMarkerChosenState(this._lineG,t),this._lineG.select("g."+t.series.className).select("g."+d).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("fill",function(t){return r.getHighLightColor(t.fillColor)}).style("fill-opacity",f),this._lineG.select("g."+t.series.className).select("g."+c).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("stroke",function(t){return r.getHighLightColor(t.color)}).style("stroke-width",function(t){return t.lineData.lineWidth+1}),a.toFront(this._lineG.select("g."+t.series.className).node()),this._areaG.select("g."+t.series.className).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("fill",function(t){return r.getHighLightColor(t.fillColor)}).style("fill-opacity",f)},cancelChosenState:function(t){this._cancelMarkerChosenState(this._lineG,t),this._lineG.select("g."+t.series.className).select("g."+d).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity}),this._lineG.select("g."+t.series.className).select("g."+c).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.lineData.lineWidth}),this._areaG.select("g."+t.series.className).selectAll("path").transition(n.SELECT_ANIMATION).duration(100).ease("swing").style("fill",function(t){return t.fillColor}).style("fill-opacity",function(t){return t.fillColorOpacity})}},a.inherit(e,i),t("./RenderLibrary").register(n.LINE_SVG,e),e}),i("render/AreaSvgRender",["require","../utils/BaseUtils","../Constants","./LineSvgRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.area=t}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("./LineSvgRender");e.prototype={constructor:e},i.inherit(e,r),t("./RenderLibrary").register(a.AREA_SVG,e)}),i("render/GaugeSvgRender",["require","../utils/BaseUtils","../utils/ColorUtils","../Constants","./BaseRender","./RenderLibrary"],function(t){function e(t){n.call(this,t),this.gauge=t}var i=t("../utils/BaseUtils"),a=t("../utils/ColorUtils"),r=t("../Constants"),n=t("./BaseRender"),s=1e3,o=5,l=.001,h="quad-out",c="gauge-class",d="pointer-hinge-background",u="pointer-hinge",g="slot-background",f="thermometer-background",p="ring-inner-background",m="ring-inner-stroke",v="ring-outer-stroke",_="ring-arc-path",y="gauge-needle",b="gauge-background",x="gauge-label",C="gauge-axis";e.prototype={constructor:e,render:function(){var t=this.gauge.getPlotBounds(),e=this.gauge.getVanchartRender().getRenderRoot();this._bodyG=this._bodyG||e.append("g"),this._bodyG.attr("transform","translate("+t.x+","+t.y+")"),this._bodyG.select("defs").remove(),this._createDefs(),this.labelDivManager.clearAllLabels();var i=this.gauge.getVisibleChartData(),a=this._bodyG.selectAll("g."+c).data(i).attr("class",function(t){return c+" "+t.className});a.call(this._updateGauge.bind(this)).transition().duration(s).ease(h).attr("transform",function(t){return"translate("+t.centerX+","+t.centerY+")"}),a.enter().append("g").attr("class",function(t){return c+" "+t.className}).attr("transform",function(t){return"translate("+Math.round(t.centerX)+","+Math.round(t.centerY)+")"}).call(this._createGauge.bind(this))},_createDefs:function(){var t=this._bodyG.append("defs");this._createVerticalLinearGradient(t,this._getRingGradualID(),"#ffffff","#dddddd"),this._createVerticalLinearGradient(t,this._getRingClickedGradualID(),"#dddddd","#ffffff");var e=this,i=this.gauge.getVisibleChartData();i.forEach(function(i){var n=i.points[0];if(n)if(i.style==r.GAUGE_THERMOMETER){var s=n.color,o=a.mixColorWithHSB(s,0,-.1,.1),l=a.getColorWithDivider(s,1/.95),h=a.mixColorWithHSB(s,0,-.1,.1),c=a.getColorWithDivider(n.mouseOverColor,1/.95),d=a.mixColorWithHSB(n.mouseOverColor,0,-.1,.1);i.thermometerLayout==r.HORIZONTAL_LAYOUT?(e._createHorizontalLinearGradient(t,e._getThermometerGradualID(i),o,s),e._createHorizontalLinearGradient(t,e._getThermometerClickedGradualID(i),h,l),e._createHorizontalLinearGradient(t,e._getThermometerMouseOverGradualID(i),d,c)):(e._createVerticalLinearGradient(t,e._getThermometerGradualID(i),s,o),e._createVerticalLinearGradient(t,e._getThermometerClickedGradualID(i),l,h),e._createVerticalLinearGradient(t,e._getThermometerMouseOverGradualID(i),c,d))}else i.style==r.GAUGE_POINTER||i.style==r.GAUGE_POINTER_SEMI?(e._createDropShadowFilter(t,e._getPointerDropShadowID(),0,2,.1,2),e._createInnerShadowFilter(t,e._getPointerInnerShadowID(),0,2,.1,2)):i.style==r.GAUGE_SLOT&&(e._createDropShadowFilter(t,e._getSlotDropShadowID(),0,2,.05,0),e._createInnerShadowFilter(t,e._getSlotInnerShadowID(),0,2,.05,0))})},_removeGaugeLabels:function(t){var e=t.select("g."+x);e.selectAll("text").remove(),e.selectAll("rect").remove()},_createGauge:function(t){var e=this;t.each(function(t){var i=t.style,a=d3.select(this);switch(e.addSeriesEventHandler(a),i){case r.GAUGE_POINTER:a.append("path").attr("class",b),a.append("path").attr("class",d),a.append("g").attr("class",x),a.append("g").attr("class",C),a.append("g").attr("class",y),a.append("path").attr("class",u),e._createPointerCircle(a,t);break;case r.GAUGE_POINTER_SEMI:a.append("path").attr("class",b),a.append("path").attr("class",d),a.append("g").attr("class",x),a.append("g").attr("class",C),a.append("g").attr("class",y),a.append("path").attr("class",u),e._createPointerSemi(a,t);break;case r.GAUGE_SLOT:a.append("path").attr("class",b),a.append("path").attr("class",g),a.append("circle").attr("class",y),a.append("g").attr("class",x),e._createSlot(a,t);break;case r.GAUGE_THERMOMETER:a.append("line").attr("class",b),a.append("line").attr("class",f),a.append("circle").attr("class",y),a.append("g").attr("class",C),a.append("g").attr("class",x),e._createThermometer(a,t);break;case r.GAUGE_RING:a.append("path").attr("class",b),a.append("path").attr("class",_),a.append("path").attr("class",p),a.append("path").attr("class",m),a.append("path").attr("class",v),a.append("g").attr("class",x),e._createRing(a,t)}})},_updateGauge:function(t){var e=this;t.each(function(t){var i=t.style,a=d3.select(this);switch(e._removeGaugeLabels(a),i){case r.GAUGE_POINTER:e._createPointerCircle(a,t);break;case r.GAUGE_POINTER_SEMI:e._createPointerSemi(a,t);break;case r.GAUGE_SLOT:e._createSlot(a,t);break;case r.GAUGE_THERMOMETER:e._createThermometer(a,t);break;case r.GAUGE_RING:e._createRing(a,t)}})},_createPointerCircle:function(t,e){this._createPointer(t,e,180,150,.16,.07)},_createPointerSemi:function(t,e){this._createPointer(t,e,98,90,.11,.055)},_createPointer:function(t,e,r,n,s,o){var l=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),h=d3.svg.arc().startAngle(i.toRadian(-r)).endAngle(i.toRadian(r)).innerRadius(0).outerRadius(e.radius).toCenter(!1),c=e.gaugeAxis.scale.domain(),g=d3.scale.linear().domain(c).range([i.toRadian(-n),i.toRadian(n)]);t.select("path."+b).attr("d",h()).style("fill",e.paneBackgroundColor).style("fill-opacity",a.getColorOpacity(e.paneBackgroundColor)),this._addFilter(t.select("path."+b),this._getPointerDropShadowID()),l.outerRadius(s*e.radius),t.select("path."+d).attr("d",l()).style("fill",e.hingeBackgroundColor).style("fill-opacity",a.getColorOpacity(e.hingeBackgroundColor)),this._addFilter(t.select("path."+d),this._getPointerInnerShadowID()),this._drawGaugeLabels(t,e),this._drawPointerTicks(t,e,g),this._drawPointerArrow(t,e,g),l.outerRadius(o*e.radius),t.select("path."+u).attr("d",l()).style("fill",e.hinge).style("fill-opacity",a.getColorOpacity(e.hinge)),this._addFilter(t.select("path."+u),this._getPointerDropShadowID())},_drawPointerArrow:function(t,e,r){var n=t.select("g."+y),o=this,l=r.domain(),c=n.selectAll("path").data(e.points);c.enter().append("path").call(this.addShapeEventHandler.bind(this)),c.exit().remove(),c.each(function(t){var n=d3.select(this),c=o._getRotate(n),d=r(o.gauge.isSupportAnimation()?l[0]:t.valueInDomain),u=r(t.valueInDomain),g=i.toDegree(u-d);n.attr("d",o._getArrowPath(e.radius,d)).style("fill",e.needle).style("fill-opacity",a.getColorOpacity(e.needle)).transition().duration(s).ease(h).attrTween("transform",function(){var t=d3.interpolate(c,g);return function(e){return"rotate("+t(e)+")"}}),o._addFilter(n,o._getPointerDropShadowID(),s)})},_addFilter:function(t,e,i){i=i||0,i+=100,setTimeout(function(){t&&t.style("filter","url(#"+e+")")},i)},_getRotate:function(t){var e=t.attr("transform");if(e){var i=e.indexOf("(");if(-1!=i)return parseFloat(e.substr(i+1))}return 0},_getArrowPath:function(t,e){var i=this._getArcPoint(.9*t,e),a=this._getArcPoint(.02*t,e+Math.PI/2),r=this._getArcPoint(.02*t,e-Math.PI/2);return"M"+i[0]+","+i[1]+"L"+a[0]+","+a[1]+"L"+r[0]+","+r[1]+"Z"},_drawPointerTicks:function(t,e,a){var r=t.select("g."+C),n=e.gaugeAxis.getTickData(),s=e.gaugeAxis.componentOption,o=s.labelStyle,l=s.useHtml,h=e.gaugeAxis.getMinorTickData(),c=this,d=.95*e.radius,u=.84*e.radius,g=e.bands,f=this.gauge.getPlotBounds(),p=f.x+e.centerX,m=f.y+e.centerY,v=r.selectAll("g.tick").data(n,function(t){return a(t.tickValue)});v.exit().remove();var _=v.enter().append("g").attr("class","tick");_.append("text"),_.append("line"),v.each(function(t){var r=d3.select(this),n=a(t.tickValue),s=c._getArcPoint(d,n),h=c._getArcPoint(d-.1*e.radius,n),f=c.gauge._getColorFromBands(t.tickValue,g);r.select("line").attr("x1",s[0]).attr("y1",s[1]).attr("x2",h[0]).attr("y2",h[1]).attr("stroke",f);var v=c.gauge._getPointerTickCenter(t,u,a);if(l){var _={x:p+v.x-t.tickDim.width/2,y:m+v.y-t.tickDim.height/2};c.labelDivManager.addLabel(t.tickContent,_,o)}else r.select("text").attr("x",v.x).attr("y",v.y).attr("dy",".35em").attr("text-anchor","middle").text(t.tickContent).call(i.setTextStyle,o)});var y=r.selectAll("line.minorTick").data(h,function(t){return a(t)});y.enter().append("line").attr("class","minorTick"),y.exit().remove(),y.each(function(t){var i=a(t),r=c._getArcPoint(d,i),n=c._getArcPoint(d-.05*e.radius,i),s=c.gauge._getColorFromBands(t,g);d3.select(this).attr("x1",r[0]).attr("y1",r[1]).attr("x2",n[0]).attr("y2",n[1]).attr("stroke",s)})},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},_createSlot:function(t,e){var r=d3.svg.arc().startAngle(i.toRadian(-135)).endAngle(i.toRadian(135)).innerRadius(0).outerRadius(e.radius).toCenter(!1).closePath(!1),n=d3.svg.arc().startAngle(i.toRadian(-135)).endAngle(i.toRadian(135)).innerRadius(0).outerRadius(e.radius).toCenter(!1).closePath(!1),o=e.gaugeAxis.scale.domain(),l=d3.scale.linear().domain(o).range([i.toRadian(-135),i.toRadian(135)]),c=e.points[0];if(c){var d=l(o[0]),u=l(c.valueInDomain),f=this.gauge._getColorFromBands(o[0],e.bands),p=c.color,m=this._getRotate(t.select("circle."+y)),v=t.select("path."+g).attr("lastStroke");f=i.isEmpty(v)?f:v,this.gauge.isSupportAnimation()||(d=u,f=p),t.select("path."+b).attr("d",n()).style({fill:"none",stroke:e.slotBackgroundColor,"stroke-linecap":"round","stroke-width":.16*e.radius}),this._addFilter(t.select("path."+b),this._getSlotInnerShadowID()),t.select("path."+g).attr("lastStroke",p).style({fill:"none",stroke:a.colorToHex(f),"stroke-linecap":"round","stroke-width":.16*e.radius}).transition().duration(s).ease(h).attrTween("d",function(){var t=d3.interpolate(d+i.toRadian(m),u);return function(e){return r.endAngle(t(e))()}}).style("stroke",a.colorToHex(p));var _=this._getArcPoint(e.radius,d);t.select("circle."+y).attr("cx",_[0]).attr("cy",_[1]).attr("r",.048*e.radius).style("fill",e.needle).style("fill-opacity",a.getColorOpacity(e.needle)).transition().duration(s).ease(h).attrTween("transform",function(){var t=d3.interpolate(m,i.toDegree(u-d));return function(e){return"rotate("+t(e)+")"}}),this._addFilter(t.select("circle."+y),this._getSlotDropShadowID(),s),this._drawGaugeLabels(t,e)}},_createThermometer:function(t,e){var i=e.gaugeAxis.scale.domain(),n=e.points[0];if(n){var c=n.valueInDomain,d=n.color,u=e.radius,g=d3.scale.linear().domain(i).range([-u,u]),p="x1",m="y1",v="x2",_="y2",x="cx",C="cy",L=g(c),A=-u;if(e.thermometerLayout==r.VERTICAL_LAYOUT&&(p="y1",m="x1",v="y2",_="x2",x="cy",C="cx",A=u,L=g.range([u,-u])(c)),t.select("line."+b).attr(p,-u).attr(m,0).attr(v,u).attr(_,0).style({fill:"none",stroke:e.slotBackgroundColor,"stroke-width":2*o,"stroke-linecap":"round"}),this.gauge.isSupportAnimation()){var T=t.select("line."+f).attr(v)||A;T=parseFloat(T),t.select("line."+f).attr(p,A).attr(m,0).attr(v,T).attr(_,l).style({stroke:"url(#"+this._getThermometerGradualID(e)+")","stroke-width":2*o,"stroke-linecap":"round"}).transition().duration(s).ease(h).attr(v,L),t.select("circle."+y).attr(x,T).attr(C,0).attr("r",.9*o).style({fill:e.needle,"fill-opacity":a.getColorOpacity(e.needle),"stroke-width":.6*o,stroke:a.mixColorWithHSB(d,0,.1,-.1)}).transition().duration(s).ease(h).attr(x,L)}else t.select("line."+f).attr(p,A).attr(m,0).attr(v,L).attr(_,l).style({stroke:"url(#"+this._getThermometerGradualID(e)+")","stroke-width":2*o,"stroke-linecap":"round"}),t.select("circle."+y).attr(x,L).attr(C,0).attr("r",.9*o).style({fill:e.needle,"fill-opacity":a.getColorOpacity(e.needle),"stroke-width":.6*o,stroke:a.mixColorWithHSB(d,0,.1,-.1)});this._drawGaugeLabels(t,e),this._drawThermometerTicks(t,e,g)}},_drawThermometerTicks:function(t,e,a){var n=t.select("g."+C),s=e.gaugeAxis.getTickData(),o=e.gaugeAxis.componentOption,l=o.labelStyle,h=o.useHtml,c=this.gauge.getPlotBounds(),d=c.x+e.centerX,u=c.y+e.centerY,g=e.gaugeAxis.getMinorTickData(),f="x1",p="y1",m="x2",v="y2",_="dx",y="x",b="y",x=-9,L=-15,A=-13,T="middle",S=-19,R="0em";e.thermometerLayout==r.VERTICAL_LAYOUT&&(f="y1",p="x1",m="y2",v="x2",_="dy",y="y",b="x",x=9,L=15,A=13,T="start",S=19,R=".35em");var k=n.selectAll("g.tick").data(s,function(t){return a(t.tickValue)});k.exit().remove();var O=k.enter().append("g").attr("class","tick");O.append("text"),O.append("line");var P=this;k.each(function(t){var n=d3.select(this),s=a(t.tickValue);if(s=i.lineSubPixelOpt(s,1),n.select("line").attr(f,s).attr(p,x).attr(m,s).attr(v,L).style("stroke",o.tickColor).style("stork-width",o.tickWidth),h){var c;c=e.thermometerLayout==r.HORIZONTAL_LAYOUT?{x:d+s-t.tickDim.width/2,y:u+S-t.tickDim.height}:{x:d+S,y:u+s-t.tickDim.height/2},P.labelDivManager.addLabel(t.tickContent,c,l)}else n.select("text").attr(y,s).attr(b,S).attr("text-anchor",T).attr(_,R).text(t.tickContent).call(i.setTextStyle,l)});var E=n.selectAll("line.minorTick").data(g,function(t){return a(t)});E.enter().append("line").attr("class","minorTick"),E.exit().remove(),E.each(function(t){var e=a(t);e=i.lineSubPixelOpt(e,1),d3.select(this).attr(f,e).attr(p,x).attr(m,e).attr(v,A).style("stroke",o.minorTickColor).style("stork-width",o.minorTickWidth)})},_createRing:function(t,e){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(e.radius),n=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(e.radius),o=e.gaugeAxis.scale.domain(),l=e.points[0];if(l){var c=Math.max(l.percentage,0),d=2*Math.PI*c*(e.clockwise?1:-1),u=this.gauge._getColorFromBands(o[0],e.bands),g=l.color,f=.8*e.radius,y=f+2,x=f-1.5;if(t.select("path."+b).attr("d",r()).style({fill:e.paneBackgroundColor,"fill-opacity":a.getColorOpacity(e.paneBackgroundColor)}),this.gauge.isSupportAnimation()){var C=t.select("path."+_),L=C.attr("lastRadian");i.isEmpty(L)?L=0:(u=C.style("fill"),L=parseFloat(L)),C.style("fill",a.colorToHex(u)).style("fill-opacity",a.getColorOpacity(u)).transition().duration(s).ease(h).style("fill",a.colorToHex(g)).style("fill-opacity",a.getColorOpacity(g)).attrTween("d",function(){var t=d3.interpolate(L,d);return function(e){return n.endAngle(t(e))()}}).attr("lastRadian",d)}else t.select("path."+_).style("fill",g).style("fill-opacity",a.getColorOpacity(g)).attr("d",n.endAngle(d)());t.select("path."+p).attr("d",r.outerRadius(f)()).style("fill",e.innerPaneBackgroundColor).style("fill-opacity",a.getColorOpacity(e.innerPaneBackgroundColor)),t.select("path."+v).attr("d",r.outerRadius(y)).style({fill:"none",stroke:"#000000","stroke-opacity":.05,"stroke-width":4}),t.select("path."+m).attr("d",r.outerRadius(x)).style({fill:"none",stroke:"url(#"+this._getRingGradualID()+")","stroke-width":3}),this._drawGaugeLabels(t,e)}},_drawGaugeLabels:function(t,e){var i=t.select("g."+x);if(e.seriesLabelContent&&this._drawLabel(i,e.seriesLabelContent,e.seriesLabelPos,e.seriesLabelDim,e.seriesLabelStyle,e,e.seriesLabel.useHtml),e.percentageLabelContent&&this._drawLabel(i,e.percentageLabelContent,e.percentageLabelPos,e.percentageLabelDim,e.percentageLabelStyle,e,e.percentageLabel.useHtml),e.valueLabelContent&&e.valueLabelContent.length){e.valueLabelBackground&&(i.append("rect").attr("x",e.valueLabelBackground.x).attr("y",e.valueLabelBackground.y).attr("width",e.valueLabelBackground.width).attr("height",e.valueLabelBackground.height).attr("rx",.02*e.radius).attr("ry",.02*e.radius).style({fill:e.valueLabel.backgroundColor,"fill-opacity":a.getColorOpacity(e.valueLabel.backgroundColor)}),this._addFilter(i,this._getPointerInnerShadowID()));for(var r=0,n=e.valueLabelContent.length;n>r;r++){var s=e.valueLabelContent[r];this._drawLabel(i,s.labelContent,s.labelPos,s.labelDim,s.labelStyle,e,e.valueLabel.useHtml)}}},_drawLabel:function(t,e,a,r,n,s,o){if(a)if(o){var l=this.gauge.getPlotBounds(),h=s.centerX,c=s.centerY;a={x:a.x+h+l.x,y:a.y+c+l.y},this.labelDivManager.addLabel(e,a,n)}else t.append("text").attr("text-anchor","middle").attr("dy","0.85em").attr("x",a.x+r.width/2).attr("y",a.y).text(e).call(i.setTextStyle,n)},_getPointerInnerShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_POINTER+"innerShadow"},_getPointerDropShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_POINTER+"dropShadow"},_getSlotDropShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_SLOT+"dropShadow"},_getSlotInnerShadowID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_SLOT+"innerShadow"},_getRingGradualID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_RING},_getRingClickedGradualID:function(){return this.gauge.vanchart.getIDPrefix()+r.GAUGE_RING+"clicked"},_getThermometerGradualID:function(t){return this.gauge.vanchart.getIDPrefix()+t.className},_getThermometerClickedGradualID:function(t){return this.gauge.vanchart.getIDPrefix()+t.className+"clicked"},_getThermometerMouseOverGradualID:function(t){return this.gauge.vanchart.getIDPrefix()+t.className+"mouseover"},makeChosenState:function(t){var e=this.gauge.option.plotOptions.style,i=t.series,n=this._bodyG.select("g."+i.className);switch(e){case r.GAUGE_POINTER:case r.GAUGE_POINTER_SEMI:break;case r.GAUGE_RING:n.select("path."+_).style("fill",t.mouseOverColor);break;case r.GAUGE_SLOT:var s=a.getHighLightColor(t.color),o=a.getHighLightColor(i.needle);n.select("path."+g).style("stroke",a.colorToHex(s)),n.select("circle."+y).style("fill",o);break;case r.GAUGE_THERMOMETER:n.select("line."+f).style("stroke","url(#"+this._getThermometerMouseOverGradualID(i)+")"),n.select("circle."+y).style("stroke",a.getHighLightColor(t.color)).style("fill",a.getHighLightColor(i.needle))}},cancelChosenState:function(t){var e=this.gauge.option.plotOptions.style,i=t.series,n=this._bodyG.select("g."+i.className);switch(e){case r.GAUGE_POINTER:case r.GAUGE_POINTER_SEMI:break;case r.GAUGE_RING:n.select("path."+_).style("fill",t.color);break;case r.GAUGE_SLOT:n.select("path."+g).style("stroke",a.colorToHex(t.color)),n.select("circle."+y).style("fill",i.needle);break;case r.GAUGE_THERMOMETER:n.select("line."+f).style("stroke","url(#"+this._getThermometerGradualID(i)+")"),n.select("circle."+y).style("stroke",t.color).style("fill",i.needle)}},makeClickedState:function(t){var e=t.series,i=this.gauge.option.plotOptions.style,n=this._bodyG.select("g."+e.className),s=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0);switch(i){case r.GAUGE_POINTER:case r.GAUGE_POINTER_SEMI:var o=i==r.GAUGE_POINTER?.16:.11,l=i==r.GAUGE_POINTER?.07:.055;s.outerRadius(o*t.series.radius*1.25),n.select("path."+d).attr("d",s()),s.outerRadius(l*t.series.radius*1.25),n.select("path."+u).attr("d",s());break;case r.GAUGE_RING:n.select("path."+m).style("stroke","url(#"+this._getRingClickedGradualID()+")"),n.select("path."+_).style("fill",t.clickColor);break;case r.GAUGE_SLOT:var h=a.getColorWithDivider(t.color,1/.95),c=a.getColorWithDivider(e.needle,1/.95);
n.select("path."+g).style("stroke",a.colorToHex(h)),n.select("circle."+y).style("fill",c);break;case r.GAUGE_THERMOMETER:n.select("line."+f).style("stroke","url(#"+this._getThermometerClickedGradualID(e)+")"),n.select("circle."+y).style("stroke",a.getClickColor(t.color)).style("fill",a.getClickColor(e.needle))}},cancelClickedState:function(t){var e=t.series,i=this.gauge.option.plotOptions.style,n=this._bodyG.select("g."+e.className),s=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0);switch(i){case r.GAUGE_POINTER:case r.GAUGE_POINTER_SEMI:var o=i==r.GAUGE_POINTER?.16:.11,l=i==r.GAUGE_POINTER?.07:.055;s.outerRadius(o*t.series.radius),n.select("path."+d).attr("d",s()),s.outerRadius(l*t.series.radius),n.select("path."+u).attr("d",s());break;case r.GAUGE_RING:n.select("path."+m).style("stroke","url(#"+this._getRingGradualID()+")"),n.select("path."+_).style("fill",t.mouseOverColor);break;case r.GAUGE_SLOT:var h=a.getHighLightColor(t.color),c=a.getHighLightColor(e.needle);n.select("path."+g).style("stroke",a.colorToHex(h)),n.select("circle."+y).style("fill",c);break;case r.GAUGE_THERMOMETER:n.select("line."+f).style("stroke","url(#"+this._getThermometerMouseOverGradualID(e)+")"),n.select("circle."+y).style("stroke",a.getHighLightColor(t.color)).style("fill",a.getHighLightColor(e.needle))}}},i.inherit(e,n),t("./RenderLibrary").register(r.GAUGE_SVG,e)}),i("render/RadarSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/LabelDivManager","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.divManager=new r(t.getParentDom()),this.radar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/LabelDivManager"),n=t("../utils/ColorUtils"),s=t("../Constants"),o="radar-series",l="series-stroke",h="series-fill",c="radar-column",d=500,u="back-out",g=500,f="exp-out";e.prototype={constructor:e,render:function(){var t=this.radar.getVanchartRender().getRenderRoot();this._bodyG||(this._bodyG=t.append("g"),this._bodyG.append("defs").append("clipPath").attr("id",this._getRadarClipID())),this._updateTransform(),this._drawRadarSeries()},_updateTransform:function(){var t=this.radar.getRadarCenter(),e=this.radar.valueScale.domain()[1],i=this._bodyG.select("#"+this._getRadarClipID());i.select("path").remove(),i.append("path").attr("d",this.radar.valueAxis._getRadiusGridPath(e)),this._bodyG.attr("transform",a.makeTranslate(t))},_drawRadarSeries:function(){var t=this.radar.getVisibleChartData(),e=this._bodyG.selectAll("."+o).data(t,function(t){return t.className});this._deleteRadarSeries(e),this._updateRadarSeries(e),this._createRadarSeries(e),this._drawLabel(this.radar.isSupportAnimation()?d:0)},_deleteRadarSeries:function(t){var e=t.exit();this.radar.isColumnType()?this._deleteColumnTypeSeries(e):this._deletePolygonTypeSeries(e)},_deleteColumnTypeSeries:function(t){var e=this.radar.isSupportAnimation()?g:0,i=this;t.each(function(t){var a=d3.select(this);a.selectAll("path."+c).transition().duration(e).ease(f).attrTween("d",function(t){var e=d3.interpolate(t.y,t.y0);return function(a){return i.radar._getRadarColumnPath(t.y0,e(a),t.radian)}}).each("end",function(){d3.select(this).remove()})})},_deletePolygonTypeSeries:function(t){var e=this,i=this._getMarkerClass(),r=this.radar.isSupportAnimation()?g:0;t.each(function(){var t=d3.select(this);t.select("path."+l).transition().duration(r).ease(f).attrTween("d",function(t){var i=e.radar._getInitPathSegment(t.pathSegment),a=d3.interpolateArray(t.pathSegment,i);return function(i){return e.radar._getRadarSeriesStrokePath(a(i),t.connectNulls)}}).each("end",function(){d3.select(this).remove()}),t.select("path."+h).transition().duration(r).ease(f).attrTween("d",function(t){var i=e.radar._getInitPathSegment(t.pathSegment),a=d3.interpolateArray(t.pathSegment,i);return function(i){return e.radar._getRadarSeriesFillPath(a(i),t.connectNulls)}}).each("end",function(){d3.select(this).remove()}),t.selectAll("g."+i).transition().duration(r).ease(f).attr("transform",function(){return a.makeTranslate([0,0])+"scale(0)"}).each("end",function(){d3.select(this).remove()})})},_updateRadarSeries:function(t){this.radar.isColumnType()?this._updateColumnTypeSeries(t):this._updatePolygonTypeSeries(t)},_updateColumnTypeSeries:function(t){var e=this;t.each(function(t){var i=d3.select(this).selectAll("path."+c).data(t.points);i.exit().remove(),i.call(e._createColumn.bind(e)),i.each(function(t){d3.select(this).transition().duration(g).ease(f).attrTween("d",function(t){var i=a.pick(this._innerRadius_,t.y0),r=a.pick(this._outerRadius_,t.y),n=d3.interpolate(i,t.y0),s=d3.interpolate(r,t.y);return this._innerRadius_=t.y0,this._outerRadius_=t.y,function(i){var a=n(i),r=s(i);return e.radar._getRadarColumnPath(a,r,t.radian)}})})})},_updatePolygonTypeSeries:function(t){var e=this,i=this._getMarkerClass(),r=this.radar.isSupportAnimation()?d:0;t.each(function(t){var n=d3.select(this);n.select("path."+l).empty()?e._createPolygonStroke(n,t):n.select("path."+l).transition().duration(r).ease(u).attrTween("d",function(t){var i=!!this._pathSegment_;if(i&&this._pathSegment_.length==t.pathSegment.length)for(var a=this._pathSegment_,r=0,n=a.length;n>r&&i;r++)a[r].length!=t.pathSegment[r].length&&(i=!1);var s=i?this._pathSegment_:e.radar._getInitPathSegment(t.pathSegment),o=d3.interpolateArray(s,t.pathSegment);return this._pathSegment_=t.pathSegment,function(i){return e.radar._getRadarSeriesStrokePath(o(i),t.connectNulls)}}),n.select("path."+h).empty()?e._createPolygonFill(n,t):n.select("path."+h).transition().duration(r).ease(u).attrTween("d",function(t){var i=this._pathSegment_?this._pathSegment_:e.radar._getInitPathSegment(t.pathSegment),a=d3.interpolateArray(i,t.pathSegment);return this._pathSegment_=t.pathSegment,function(i){return e.radar._getRadarSeriesFillPath(a(i),t.connectNulls)}});var s=n.selectAll("g."+i).data(function(t){return t.points});s.exit().remove(),s.call(e._createSvgMarker.bind(e)),s.transition().duration(r).ease(u).attr("transform",function(t){return a.makeTranslate(t.pos)})})},_createRadarSeries:function(t){var e=t.enter().append("g").attr("class",function(t){return t.className+" "+o}).attr("clip-path","url(#"+this._getRadarClipID()+")");this.radar.isColumnType()?this._createColumnTypeSeries(e):this._createPolygonTypeSeries(e)},_createColumnTypeSeries:function(t){var e=this;t.each(function(t){d3.select(this).selectAll("path."+c).data(t.points).call(e._createColumn.bind(e)).transition().duration(e.radar.isSupportAnimation()?d:0).ease(u).attrTween("d",function(t){var i=e.radar.getInitRadius(),a=d3.interpolate(i,t.y);return this._innerRadius_=t.y0,this._outerRadius_=t.y,function(r){return e.radar._getRadarColumnPath(i,a(r),t.radian)}}).each("end",function(t){d3.select(this).attr("d",e.radar._getRadarColumnPath(t.y0,t.y,t.radian))})})},_createPolygonStroke:function(t,e){var i=this,a=this.radar.isSupportAnimation(),r=a?1:0,n=t.selectAll("path."+l).data([e]);n.enter().append("path").attr("class",l).style({fill:"none",stroke:e.lineColor,"stroke-width":e.lineWidth}).transition().duration(d*r).ease(u).attrTween("d",function(t){var e=i.radar._getInitPathSegment(t.pathSegment),a=d3.interpolateArray(e,t.pathSegment);return this._pathSegment_=t.pathSegment,function(e){return i.radar._getRadarSeriesStrokePath(a(e),t.connectNulls)}}),this.addSeriesEventHandler(n)},_createPolygonFill:function(t,e){var i=this,a=this.radar.isSupportAnimation(),r=a?1:0;if(e.fillColor&&e.fillColorOpacity){var n=t.selectAll("path."+h).data([e]);n.enter().append("path").attr("class",h).style({fill:e.fillColor,"fill-opacity":e.fillColor?e.fillColorOpacity:0}).transition().duration(d*r).ease(u).attrTween("d",function(t){var e=i.radar._getInitPathSegment(t.pathSegment),a=d3.interpolateArray(e,t.pathSegment);return this._pathSegment_=t.pathSegment,function(e){return i.radar._getRadarSeriesFillPath(a(e),t.connectNulls)}}),this.addSeriesEventHandler(n)}},_createPolygonTypeSeries:function(t){var e=this,i=this._getMarkerClass(),r=this.radar.isSupportAnimation(),n=r?1:0;t.each(function(t){var r=d3.select(this);e._createPolygonStroke(r,t),e._createPolygonFill(r,t),r.selectAll("g."+i).data(t.points).call(e._createSvgMarker.bind(e)).attr("transform",function(){return a.makeTranslate([0,0])+"scale(0.01)"}).transition().duration(d*n).ease(u).attr("transform",function(t){return a.makeTranslate(t.pos)+"scale(1)"})})},_createColumn:function(t){var e=t.enter();e.append("path").attr("class",function(t){return c+" "+t.className}).style("fill",function(t){return t.color}).style("fill-opacity",function(t){return t.fillColorOpacity}).style("stroke",function(t){return t.borderColor}).style("stroke-width",function(t){return t.borderWidth}).call(this.addShapeEventHandler.bind(this))},_drawLabel:function(t){var e=this.radar.getVisibleChartData(),i=[];e.forEach(function(t){i=i.concat(t.points)});var a=this.radar.getRadarCenter();this._labelG||(this._labelG=this._bodyG.append("g")),this._drawSvgDataLabels(this._labelG,i,a[0],a[1],t)},makeClickedState:function(t){t.columnType?this._bodyG.select("path."+t.className).style("fill",t.clickColor):(this._makeMarkerClickedState(this._bodyG,t),this._bodyG.select("g."+t.series.className).select("path."+h).style("fill",n.getClickColor(t.series.fillColor)))},cancelClickedState:function(t){t.columnType?this._bodyG.select("path."+t.className).style("fill",t.mouseOverColor):(this._cancelMarkerClickedState(this._bodyG,t),this._bodyG.select("g."+t.series.className).select("path."+h).style("fill",n.getHighLightColor(t.series.fillColor)))},makeChosenState:function(t){t.columnType?this._bodyG.select("path."+t.className).style("stroke",t.mouseOverColor).style("fill",t.mouseOverColor).style("stroke-width",t.borderWidth).style("stroke-opacity",.35).interrupt().transition().duration(100).ease("ease-out-in").style("stroke-width",6):(this._makeMarkerChosenState(this._bodyG,t),this._bodyG.select("g."+t.series.className).select("path."+h).style("fill",n.getHighLightColor(t.series.fillColor)),a.toFront(this._bodyG.select("g."+t.series.className).node()))},cancelChosenState:function(t){t.columnType?this._bodyG.select("path."+t.className).interrupt().transition().style("fill",t.color).style("stroke",t.borderColor).style("stroke-opacity",1).style("stroke-width",t.borderWidth):(this._cancelMarkerChosenState(this._bodyG,t),this._bodyG.select("g."+t.series.className).select("path."+h).style("fill",t.series.fillColor))},_getRadarClipID:function(){return"radarClip"+this.radar.vanchart.getIDPrefix()}},a.inherit(e,i),t("./RenderLibrary").register(s.RADAR_SVG,e)}),i("render/BubbleSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.bubble=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=500,s=500,o=300,l=200,h=800,c=6,d="bubble-series-group",u="bubble-shadow-id",g="force-bubble-group";return e.prototype={constructor:e,render:function(){this.bubble.isLargeMode()?this._canvasRender():this._svgRender()},_svgRender:function(){this.bubble.isUpdateWithForce()?this._renderForceBubbles():this._renderNormalBubbles()},_createForceBubbleDivLabel:function(t){var e=this,i=e.bubble.getPlotBounds(),a=[];t.forEach(function(t){t.labelPos&&t.dataLabels.useHtml&&(t.labelPos={x:-t.labelDim.width/2+t.x,y:-t.labelDim.height/2+t.y},a.push(t))}),e._renderDivLabels(t,i.x,i.y)},_renderForceBubbles:function(){function t(t){p.each(e(10*t.alpha*t.alpha)).each(i(.5)),p.each(function(){var t=d3.select(this),e=a.pick(d3.transform(t.attr("transform")).scale,1);t.attr("transform",function(t){return"translate("+t.x+","+t.y+")scale("+e+")"})})}function e(t){return function(e){var i=e.series.cluster;if(i&&i!==e){var a=e.x-i.x,r=e.y-i.y,n=Math.sqrt(a*a+r*r),s=e.radius+i.radius;n!=s&&(n=(n-s)/n*t,e.x-=a*=n,e.y-=r*=n,i.x+=a,i.y+=r)}}}function i(t){var e=d3.geom.quadtree(n);return function(i){var a=i.radius+s+Math.max(l,h),r=i.x-a,n=i.x+a,o=i.y-a,c=i.y+a;e.visit(function(e,a,s,d,u){if(e.point&&e.point!==i){var g=i.x-e.point.x,f=i.y-e.point.y,p=Math.sqrt(g*g+f*f),m=i.radius+e.point.radius+(i.series.cluster===e.point.series.cluster?l:h);m>p&&(p=(p-m)/p*t,i.x-=g*=p,i.y-=f*=p,e.point.x+=g,e.point.y+=f)}return a>n||r>d||s>c||o>u})}}var r=this.bubble.getVisibleChartData(),n=[],s=0,l=2,h=2;r.forEach(function(t){t.points.forEach(function(t){t.visible&&(n.push(t),t.px=void 0,t.py=void 0,s=Math.max(s,t.radius))})});var c=this.bubble.getVanchartRender().getRenderRoot(),d=this.component.vanchart.getBodyClipID(),u=this.component.getPlotBounds(),f=this;this._bodyG||(this._bodyG=c.append("g"),this._createDefs()),this._bodyG.attr("transform","translate("+u.x+","+u.y+")").attr("clip-path","url(#"+d+")");var p=this._bodyG.selectAll("g."+g).data(n,function(t){return t.className});p.each(function(t){var e=d3.transform(d3.select(this).attr("transform")).translate;t.x=e[0],t.y=e[1]}),this.force&&this.force.stop();var m=d3.layout.force().nodes(n).size([u.width,u.height]).gravity(.05).charge(0).on("tick",t).on("start",function(){f.labelDivManager.clearAllLabels()}).on("end",function(){f._createForceBubbleDivLabel(n)}).start();this.force=m;var v=p.exit();v.each(function(){d3.select(this).transition().duration(o).ease("back-in").each(function(){d3.transition(d3.select(this).select("circle")).attrTween("r",function(t){var e=d3.interpolate(t.radius,0);return function(t){return e(t)}})}).remove()}),p.call(this.force.drag).each(function(t){var e=d3.select(this);e.select("circle").transition().duration(750).attrTween("r",function(t){var e=d3.select(this).attr("r"),i=d3.interpolate(e,t.radius);return function(e){return t.radius=i(e)}}).each("end",function(t){f._createForceLabel(t,d3.select(this.parentNode))}),e.select("text").remove()}),this._createNewForceBubble(p,!0)},_createNewForceBubble:function(t,e){var i=this,r=this.component.getPlotBounds(),n=r.width/2,s=r.height/2,o=t.enter().append("g").attr("class",function(t){return g+" "+t.className});o.attr("transform",function(t){var e=a.isEmpty(t.x)?n:t.x,i=a.isEmpty(t.y)?s:t.y;return"translate("+e+","+i+")"}).call(this.force.drag).append("circle").style("fill",function(t){return t.color}).style("fill-opacity",function(t){return t.fillColorOpacity}).each(function(t){i._addFilter(t,d3.select(this),0)}),this.addShapeEventHandler(o),o.select("circle").transition().duration(e?750:0).delay(function(t,e){return 5*e}).attrTween("r",function(t){var e=d3.interpolate(0,t.radius);return function(i){return t.radius=e(i)}}).each("end",function(t){i._createForceLabel(t,d3.select(this.parentNode))})},_createForceLabel:function(t,e){if(t.labelPos&&t.labelDim&&!t.dataLabels.useHtml){for(var i=t.labelContent,r=t.labelPos.x+t.labelDim.width/2,n=t.labelPos.y,s=e.append("text").style("opacity",0),o=0,l=i.length;l>o;o++){var h=i[o],c=h.dim,d=h.text,u=h.style;s.append("tspan").attr("x",r).attr("y",n+c.height/2).attr("dy",".32em").attr("text-anchor","middle").text(d).call(a.setTextStyle,u),n+=c.height+this.component.getLabelGap()}s.transition("linear").duration(400).style("opacity",1)}},_renderNormalBubbles:function(){var t=this.bubble.getVanchartRender().getRenderRoot(),e=this.bubble.isSupportAnimation();this._bodyG?this._updateChartBodyTranslate([this._bodyG],e,s):(this._bodyG=t.append("g"),this._createDefs(),this._updateChartBodyTranslate([this._bodyG]));var i=this.bubble.getVisibleChartData(),a=this._bodyG.selectAll("g."+d).data(i,function(t){return t.className});this._animationTimeOut={},this._dropSeries(a.exit(),e),this._updateSeries(a,e),this._createSeries(a,e)},scaleRender:function(){if(this.bubble.isUpdateWithForce()){var t=this.bubble.getVisibleChartData(),e=[];t.forEach(function(t){t.points.forEach(function(t){t.visible&&e.push(t)})});var i=this,a=this._bodyG.selectAll("g."+g).data(e,function(t){return t.className});a.transition().duration(s).ease("back-out").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).each("start",function(){i.labelDivManager.clearAllLabels()}).each("end",function(){i._createForceBubbleDivLabel(e)}),a.each(function(t){var e=d3.select(this);e.select("circle").attr("r",t.radius),t.labelPos&&e.select("text").empty()&&i._createForceLabel(t,e)})}else this.render()},filterRender:function(){if(this.bubble.isLargeMode())this._canvasRender();else if(this.bubble.isUpdateWithForce()){var t=this.bubble.getVisibleChartData(),e=[];t.forEach(function(t){t.points.forEach(function(t){t.visible&&e.push(t)})}),this.labelDivManager.clearAllLabels(),this._createForceBubbleDivLabel(e);var i=this._bodyG.selectAll("g."+g).data(e,function(t){return t.className});i.each(function(){var t=d3.select(this),e=d3.transform(t.attr("transform")).translate;t.attr("transform",a.makeTranslate(e)+"scale(1)")}),i.exit().each(function(){var t=d3.select(this),e=d3.transform(t.attr("transform")).translate;t.attr("transform",a.makeTranslate(e)+"scale(0)")})}else{var r=this;this._bodyG.selectAll("text").filter(function(t){return t.visible}).style("opacity",1),this._bodyG.selectAll("text").filter(function(t){return!t.visible}).style("opacity",0),this._bodyG.selectAll("path").filter(function(t){return t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+")"}).attr("d",function(t){return d3.svg.arc().outerRadius(t.radius)({startAngle:0,endAngle:2*Math.PI})}).each(function(t){r.labelDivManager.setLabelOpacity(t.className,1)}),this._bodyG.selectAll("path").filter(function(t){return!t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+")"}).attr("d",d3.svg.arc().outerRadius(0)({startAngle:0,endAngle:2*Math.PI})).each(function(t){r.labelDivManager.setLabelOpacity(t.className,0)})}},_createDefs:function(){var t=this._bodyG.append("defs");this._createDropShadowFilter(t,this._getFilterID(),0,0,.2,2)},_getFilterID:function(){return this.bubble.vanchart.getIDPrefix()+u},_addFilter:function(t,e,i){var a=this;t.shadow&&(i=i||0,i+=200,setTimeout(function(){e&&e.style("filter","url(#"+a._getFilterID()+")")},i))},_dropSeries:function(t,e){var i=this;t.each(function(t){d3.select(this).selectAll("path").transition().duration(e?o:0).ease("back-in").attr("d",d3.svg.arc().outerRadius(0)({startAngle:0,endAngle:2*Math.PI})).remove(),d3.select(this).selectAll("text").remove(),t.points.forEach(function(t){i.labelDivManager.clearLabels(t.className)})})},_updateSeries:function(t,e){var i=this.bubble.vanchart.isChangeDataState(),a=this;i?(this._dropSeries(t,e),clearTimeout(a._animationTimeOut.changeData),a._animationTimeOut.changeData=setTimeout(function(){t.each(function(t){var i=d3.select(this).selectAll("path").data(t.points,function(t){return t.className}),r=d3.select(this).selectAll("text").data(t.points);a._createBubbles(t,r,i,e)})},e?o+100:0)):t.each(function(t){var i=d3.select(this).selectAll("path").data(t.points,function(t){return t.className}),r=d3.select(this),n=e?(i.empty()?o:s)+100:0;i.empty()?a._createBubbles(i,e):(d3.select(this).selectAll("text").remove(),t.points.forEach(function(t){a.labelDivManager.clearLabels(t.className)}),a._updateBubbles(i,e)),clearTimeout(a._animationTimeOut[t.className]),a._animationTimeOut[t.className]=setTimeout(function(){r.selectAll("text").data(t.points).enter().append("text").filter(function(t){return t.visible}).each(function(t){a._createSingleDataLabel(t,d3.select(this))}),a.addShapeEventHandler(labels)},n)})},_createBubbles:function(t,e){var i=t.enter().append("path"),a=this;i.each(function(t){var i=d3.select(this);i.attr("class",t.className).attr("transform","translate("+t.posX+","+t.posY+")").attr("d",d3.svg.arc().outerRadius(0)({startAngle:0,endAngle:2*Math.PI})).style("fill",t.color).style("fill-opacity",t.fillColorOpacity).transition().ease("back-out").duration(e?o:0).attr("d",d3.svg.arc().outerRadius(t.radius)({startAngle:0,endAngle:2*Math.PI})),a._addFilter(t,i,e?o:0)}),a.addShapeEventHandler(t)},_updateBubbles:function(t,e){t.filter(function(t){return t.visible}).each(function(t){d3.select(this).transition().duration(e?s:0).ease("back-out").attr("d",function(t){return d3.svg.arc().outerRadius(t.radius)({startAngle:0,endAngle:2*Math.PI})}).attr("transform","translate("+t.posX+","+t.posY+")")})},_createSeries:function(t,e){var i=t.enter().append("g").attr("class",d),a=this;i.each(function(t){var i=d3.select(this).selectAll("path").data(t.points,function(t){return t.className}),r=i.enter().append("path");r.filter(function(t){return t.visible}).each(function(t){var i=d3.select(this);i.attr("class",t.className).attr("transform","translate("+t.posX+","+t.posY+")").attr("d",d3.svg.arc().outerRadius(0)({startAngle:0,endAngle:2*Math.PI})).style("fill",t.color).style("fill-opacity",t.fillColorOpacity).transition().delay(e?t.delayTime:0).ease("bounce").duration(e?n:0).attr("d",d3.svg.arc().outerRadius(t.radius)({startAngle:0,endAngle:2*Math.PI})),a._addFilter(t,i,e?n+t.delayTime:0)}),a.addShapeEventHandler(i);var s=d3.select(this).selectAll("text").data(t.points);clearTimeout(a._animationTimeOut[t.className+"init"]),a._animationTimeOut[t.className+"init"]=setTimeout(function(){s.enter().append("text").filter(function(t){return t.visible}).each(function(t){a._createSingleDataLabel(t,d3.select(this))}),a.addShapeEventHandler(s)},e?n+h:0)})},_getElementByData:function(t){var e=this._bodyG.select("."+t.className);return this.bubble.isForceBubble()&&this.bubble.isUpdateWithForce()?e.select("circle"):e},makeChosenState:function(t){this.bubble.isLargeMode()||this._getElementByData(t).style("stroke",t.mouseOverColor).style("stroke-width",0).style("stroke-opacity",.35).style("fill",t.mouseOverColor).interrupt(r.SELECT_ANIMATION).transition(r.SELECT_ANIMATION).duration(l).ease("back-out").style("stroke-width",c)},cancelChosenState:function(t){this.bubble.isLargeMode()||this._getElementByData(t).style("fill",t.color).style("fill-opacity",t.fillColorOpacity).interrupt(r.SELECT_ANIMATION).transition(r.SELECT_ANIMATION).style("stroke-width",0)},makeClickedState:function(t){this.bubble.isLargeMode()||this._getElementByData(t).style("fill",t.clickColor)},cancelClickedState:function(t){this.bubble.isLargeMode()||this._getElementByData(t).style("fill",t.mouseOverColor)}},a.inherit(e,i),t("./RenderLibrary").register(r.BUBBLE_SVG,e),e}),i("render/ScatterSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.scatter=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=800,o=300,l=500,h="scatter-series-group",c="scatter-series-line-class";return e.prototype={constructor:e,render:function(){this.scatter.isLargeMode()?this._canvasRender():this._svgRender()},_svgRender:function(){var t=this.scatter.getVanchartRender().getRenderRoot(),e=this.scatter.isSupportAnimation();this._bodyG?this._updateChartBodyTranslate([this._bodyG],e,l):(this._bodyG=t.append("g"),this._updateChartBodyTranslate([this._bodyG]));var i=this.scatter.getVisibleChartData(),a=this._bodyG.selectAll("g."+h).data(i,function(t){return t.className});this._animationTimeOut={},this._dropSeries(a.exit(),e),this._updateSeries(a,e),this._createSeries(a,e)},filterRender:function(){if(this.scatter.isLargeMode())this._canvasRender();else{var t=this;this._bodyG.selectAll("g."+h).each(function(){d3.select(this).selectAll("g").filter(function(t){return t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(1)"}).each(function(e){t.labelDivManager.setLabelOpacity(e.className,1)}),d3.select(this).selectAll("g").filter(function(t){return!t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0)"}).each(function(e){t.labelDivManager.setLabelOpacity(e.className,0)})})}},_dropSeries:function(t,e){var i=this;t.each(function(t){d3.select(this).selectAll("g").transition().duration(e?o:0).ease("back-in").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0)"}).remove(),t.points.forEach(function(t){i.labelDivManager.clearLabels(t.className)}),d3.select(this).selectAll("path."+c).remove()})},_updateSeries:function(t,e){var i=this.scatter.vanchart.isChangeDataState(),a=this;t.each(function(t){var r=d3.select(this),n=r.selectAll("g").data(t.points,function(t){return t.className});i?(r.selectAll("path."+c).remove(),n.transition().duration(e?o:0).ease("back-in").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0)"}).remove(),clearTimeout(a._animationTimeOut[t.className]),a._animationTimeOut[t.className]=setTimeout(function(){a._createSeriesLine(r,t,e?o:0),r.selectAll("g").data(t.points,function(t){return t.className}).call(a._createSvgMarker.bind(a)).filter(function(t){return t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0.01)"}).transition().duration(e?o:0).ease("back-out").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(1)"}).each("end",function(){var t=d3.select(this).append("text").attr("transform",function(t){return"translate("+-t.posX+","+-t.posY+") scale(1)"});t.each(function(e){a._createSingleDataLabel(e,t)})})},e?o:0)):n.empty()?(a._createSeriesLine(r,t,e?o:0),n.call(a._createSvgMarker.bind(a)).filter(function(t){return t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0.01)"}).transition().duration(e?o:0).ease("back-out").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(1)"}).each("end",function(){var t=d3.select(this).append("text").attr("transform",function(t){return"translate("+-t.posX+","+-t.posY+") scale(1)"});t.each(function(e){a._createSingleDataLabel(e,t)})})):(t.points.forEach(function(t){a.labelDivManager.clearLabels(t.className)}),n.filter(function(t){return t.visible}).transition().duration(e?l:0).ease("back-out").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(1)"}).each("end",function(){d3.select(this).append("text").attr("transform",function(t){return"translate("+-t.posX+","+-t.posY+") scale(1)"}).each(function(t){a._createSingleDivDataLabel(t)})}),r.select("path."+c).transition().duration(e?l:0).ease("back-out").attr("d",t.lineSvg(t.points)))})},_createSeries:function(t,e){var i=t.enter().append("g").attr("class",h),a=this;i.each(function(t){a._createSeriesLine(d3.select(this),t,e?s:0)});var r=i.selectAll("g."+h).data(function(t){return t.points});this._createMarkers(r,e)},_createMarkers:function(t,e){var i=this;t.call(this._createSvgMarker.bind(this)).filter(function(t){return t.visible}).attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(0.01)"}).transition().delay(function(t){return e?t.delayTime:0}).duration(e?o:0).ease("back-out").attr("transform",function(t){return"translate("+t.posX+","+t.posY+") scale(1)"}).each("end",function(){var t=d3.select(this).append("text").attr("transform",function(t){return"translate("+-t.posX+","+-t.posY+") scale(1)"});t.each(function(e){i._createSingleDataLabel(e,t)})})},_createSeriesLine:function(t,e,i){t.append("path").attr("class",c).attr("d",e.lineSvg(e.points)).style("fill","none").style("stroke",r.colorToHex(e.color)).style("stroke-width",0),t.select("path."+c).transition().delay(i).style("stroke-width",e.lineWidth)},makeChosenState:function(t){this._bodyG&&this._makeMarkerChosenState(this._bodyG,t,3,200)},cancelChosenState:function(t){this._bodyG&&this._cancelMarkerChosenState(this._bodyG,t)},makeClickedState:function(t){this._bodyG&&this._makeMarkerClickedState(this._bodyG,t)},cancelClickedState:function(t){this._bodyG&&this._cancelMarkerClickedState(this._bodyG,t)}},a.inherit(e,i),t("./RenderLibrary").register(n.SCATTER_SVG,e),e}),i("render/MapSvgRender",["require","../utils/BaseUtils","../Constants","./BaseRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.map=t}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("./BaseRender");e.prototype={constructor:e,render:function(){var t=this.map,e=t.vanchart.getComponent(a.GEO_COMPONENT),i=t.vanchart._leaflet,r=e.getFeatureMap(t.vanchart.series),n=function(e,i){i.on({click:function(){t.drillDown(e)}})},s={style:function(t){return{fillColor:t.fillColor,fillOpacity:t.fillColorOpacity,color:t.borderColor,weight:t.borderWidth,opacity:t.borderOpacity}},onEachFeature:n};this._areaLayer=this._areaLayer||L.geoJson([],s).addTo(i),this._updateAreaLayerGroup(this._areaLayer,r.areaFeatures,function(t){return t.properties.id});var o=function(t){return t.className},l={style:function(t){return{radius:t.radius,fillColor:t.color,fillOpacity:t.fillColorOpacity,weight:0}},onEachLayer:n};this._bubbleLayer=this._bubbleLayer||L.layerGroup().addTo(i),this._updatePointLayerGroup(this._bubbleLayer,L.circleMarker,r.bubbleFeatures,l,o);var h={style:function(t){return{fillColor:"blue"}},onEachLayer:n};this._scatterLayer=this._scatterLayer||L.layerGroup().addTo(i),this._updatePointLayerGroup(this._scatterLayer,L.scatterMarker,r.scatterFeatures,h,o);var c={style:function(t){return{icon:L.icon(t.icon)}},onEachLayer:n};this._imageLayer=this._imageLayer||L.layerGroup().addTo(i),this._updatePointLayerGroup(this._imageLayer,L.marker,r.imageFeatures,c,o)},_updatePointLayerGroup:function(t,e,i,a,r){for(var n=t.getLayers(),s=this._rebindLayers(n,i,r),o=s.enter.length-1;o>=0;o--){var l=s.enter[o],h=e(this.getLatLng(l),a.style.call(null,l),l);a.onEachLayer.call(null,l,h),t.addLayer(h)}s.exit.forEach(function(e){t.removeLayer(e)})},_updateAreaLayerGroup:function(t,e,i){var a=t.getLayers(),r=this._rebindLayers(a,e,i);t.addData(r.enter),r.exit.forEach(function(e){t.removeLayer(e)}),a.forEach(function(e){t.resetStyle(e)})},getLatLng:function(t){var e=t.lnglat,i=this.map.vanchart.getComponent(a.GEO_COMPONENT);return e||(e=i.getFeature(t.name).properties.center),[e[1],e[0]]},_rebindLayers:function(t,e,i){var a,r,n,s,o=t.length,l=e.length,h=[],c=[],d={},u=new Array(o);for(a=-1;++a<o;)n=t[a],r=i(n._data),d[r]=n,u[a]=r;for(a=-1;++a<l;)s=e[a],r=i(s),n=d[r],n?n!==!0&&(n._data=s,n.feature=s):h.push(s),d[r]=!0;for(a=-1;++a<o;)d[u[a]]!==!0&&(c[a]=t[a]);return{enter:h,exit:c}}},i.inherit(e,r),t("./RenderLibrary").register(a.MAP_SVG,e)}),i("render/DrillToolsSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.dTools=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.dTools.componentOption,e=this.dTools.bounds,i=this.dTools.getVanchartRender().getRenderRoot();this._bodyG=this._bodyG||i.append("g");var n=this.dTools.vanchart.getIDPrefix()+r.DRILL_TOOLS+"shadow",s=this.dTools.vanchart.getIDPrefix()+r.DRILL_TOOLS+"clip";this._defs||(this._defs=this._bodyG.append("defs"),this._createDropShadowFilter(this._defs,n,0,0,.15,1),this._defs.append("clipPath").attr("id",s).append("rect").attr("width",e.width).attr("height",e.height)),this._bodyG.attr("transform",a.makeTranslate(e)).attr("clip-path","url(#"+s+")");var o=this.dTools,l=o.vanchart.getChart(r.MAP_CHART),h=this._bodyG.selectAll("g").data(this.dTools.getIconData(),function(t){return t.layerIndex});h.select("text").style("fill",function(t){return o.textColor(t)});var c=[],d=h.exit().each(function(t){c.push(t)});o.calculateExitAnimation(c),d.transition().duration(function(t){return t.time}).delay(function(t){return t.delay}).ease("quad-in").attr("transform",function(t){return a.makeTranslate([t.aniStart,0])}).style("opacity",0).remove(),h.enter().insert("g",":first-child").each(function(e){var i=e.geo.geoName,r=d3.select(this).style("cursor","pointer");r.append("path").attr("d",o.getBookMarkPath(e)).style("fill",t.backgroundColor).style("filter","url(#"+n+")"),r.append("text").text(i).attr("x",o.leftPadding(e)+"em").attr("y",o.topPadding()+.85+"em").call(a.setTextStyle,t.style).style("fill",t.currentColor),r.attr("transform",a.makeTranslate([e.aniStart,0])).transition().duration(500).ease("cubic-out").attr("transform",a.makeTranslate([e.aniEnd,0])),r.on("click",function(t){l.drillUp(t)}).on("mouseenter",function(t){
d3.select(this).select("text").style("fill",o.mouseOverColor(t))}).on("mouseleave",function(t){d3.select(this).select("text").style("fill",o.textColor(t))})})}},a.inherit(e,i),t("./RenderLibrary").register(r.DRILL_TOOLS_SVG,e),e}),i("render/TitleSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","../utils/BezierEasing","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.title=t,this.textEndX=0,this.usedWidth=0,this.textBounds={}}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("../utils/BezierEasing"),s="title-gradual-background";return e.prototype={constructor:e,render:function(){if(!this._titleG){var t=this.title.componentOption,e=this.title.bounds,i=this.title.getVanchartRender().getRenderRoot(),a=this.title.vanchart.getIDPrefix(),r=s+a;this._titleG||(this._backgroundG=i.append("g").attr("transform","translate("+e.x+","+e.y+")"),this._titleG=i.append("g").attr("transform","translate("+e.x+","+e.y+")")),t.backgroundColor&&(this._createGradualDefs(this._titleG,t.backgroundColor,r),this._backgroundG.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill",function(){return"string"==typeof t.backgroundColor?t.backgroundColor:"url(#"+r+")"}));var n=this.title.textDim,o=this.title.getPadding(),l={x:e.x+o,y:e.y+o,width:n.width,height:n.height};this.title.isFloat||"center"!==t.align||(l.x=e.x+e.width/2-n.width/2),this.textBounds=l,this._drawTitle(t,l)}},translateX:function(t){this.labelDivManager.translateLabelsHorizontal(t);var e=this.usedWidth-this.textEndX;if(!(e>Math.abs(t))){var i=d3.transform(this._titleG.attr("transform")).translate,a=i[0]+t;this._titleG.transition().ease(n.css.swing).duration(300).attr("transform","translate("+a+","+i[1]+")")}},changeTextRightSpace:function(t){if(!this.title.isFloat)switch(this.title.componentOption.align){case"center":var e=this.title.bounds,i=this.title.textDim,a=e.x+e.width/2-i.width/2,r=this.textBounds,n=this.title.getPadding(),s=this.title.vanchart.getToolbarWidth(),o=this.title.initBarWidth,l=e.width/2-i.width/2-o-n,h=s-o,c=r.x,d=r.width;0>=l?(c=e.x,d=e.width-s):h>l?c=a-(h-l):(c=a,d=i.width),this.labelDivManager.changeLabelDim({left:c-r.x,width:d-r.width}),this.textBounds.x=c,this.textBounds.width=d;break;default:this.labelDivManager.changeLabelDim({width:-t})}}},a.inherit(e,i),t("./RenderLibrary").register(r.TITLE_SVG,e),e}),i("render/BaseAxisSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants"],function(t){function e(t){i.call(this,t),this.axis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),s=400,o=r.css.swing,l="axis-tick-text",h="axis-tick-line",c="axis-minor-tick-line",d="axis-grid-line",u="plot-bands",g="plot-lines",f="axis-line",p="highlight-band";return e.prototype={constructor:e,render:function(){var t=this.axis.getVanchartRender().getRenderRoot();if(this.labelDivManager.clearAllLabels(),this._axisG){this.axis.option.plotOptions.large?this._axisG.call(this._drawAxis.bind(this)):this._axisG.transition().ease(o).duration(s).call(this._drawAxis.bind(this)),clearTimeout(this._animation_);var e=this;this._animation_=setTimeout(function(){e._axisG.call(e._drawAxis.bind(e))},s+100)}else this._axisG=t.append("g"),this._axisG.call(this._drawAxis.bind(this));this._axisTitleG=this._axisTitleG||t.append("g");var i=this.axis.getAxisTitleBounds();this._axisTitleG.attr("transform","translate("+i.x+","+i.y+")"),this._drawAxisTitle(i)},_getBandByPosition:function(t){var e,i=this.axis,r=this.axis.getPlotBounds(),s=t[0]-r.x,o=i.scale;this.axis._getTickValuesWithEndValue();switch(i.type){case n.CATEGORY_AXIS_COMPONENT:var l=i.bounds,h=i.getCategories(),c=h.length?l.width/h.length:l.width;e=i.isAxisReversed()?h.length-1-Math.floor(s/c):Math.floor(s/c);break;case n.DATE_AXIS_COMPONENT:e=a.date2int(o.invert(s));break;default:e=o.invert(s)}},drawHighlightBand:function(t){var e=this._getBandByPosition(t);this._axisG.select("."+p).remove(),this._axisG.append("rect").attr("class",p).attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).style("fill",e.color)},_drawPlotBands:function(t){var e=this.axis._preCalculatePlotBands(),i=this.axis.getPlotBounds();t.each(function(){var t=d3.select(this).selectAll("."+u).data(e);t.exit().remove(),t.enter().append("rect").attr("class",u),t.attr("transform",a.makeTranslate(i)).style("fill",function(t){return t.color}),d3.transition(t).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height})})},_drawPlotLines:function(t){var e=this.axis._preCalculatePlotLines(),i=this.axis.getPlotBounds();t.each(function(){var t=d3.select(this).selectAll("."+g).data(e);t.exit().remove();var r=t.enter().append("g").attr("class",g);r.append("line"),r.append("text"),d3.transition(t).attr("transform",a.makeTranslate(i)),d3.transition(t.select("line")).attr("x1",function(t){return t.startPos.x}).attr("y1",function(t){return t.startPos.y}).attr("x2",function(t){return t.endPos.x}).attr("y2",function(t){return t.endPos.y}).style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dataArray}),d3.transition(t.select("text")).text(function(t){return t.text}).attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("dy","0.85em").each(function(t){d3.select(this).call(a.setTextStyle,t.style)})})},_drawGridLine:function(t){var e=this.axis.componentOption,i=this.axis.getPlotBounds(),r=e.gridLineWidth,n=this.axis.getTickData(),s=this.axis.scale,o=this.axis.lastScale||s,l="x1",h="y1",c="x2",u="y2",g=i.height,f=i.width;this.axis.isHorizontal()||(l="y1",h="x1",c="y2",u="x2",g=i.width,f=0);var p=e.gridLineColor,m=a.lineSubPixelOpt(0,r);t.each(function(){var t=d3.select(this).selectAll("."+d).data(n,function(t){return t.tickValue});if(r){d3.transition(t.exit()).style("opacity",0).attr(l,function(t){return s(t.tickValue)}).attr(h,0).attr(c,function(t){return s(t.tickValue)}).attr(u,g).remove();var e=t.enter();e.append("line").attr("class",d).attr("transform",a.makeTranslate(i)).attr(l,function(t){return o(t.tickValue)+m}).attr(h,0).attr(c,function(t){return o(t.tickValue)+m}).attr(u,g).style({stroke:p,"stroke-width":r,opacity:0}),d3.transition(t).attr("transform",a.makeTranslate(i)).attr(l,function(t){return t.tickPos+m}).attr(h,0).attr(c,function(t){return t.tickPos+m}).attr(u,g).style("opacity",1)}else t.remove()})},_drawTickLine:function(t){var e=this.axis.componentOption,i=this.axis.getMainTickData(),r=e.enableTick?e.tickLength:0,s=e.tickWidth,o=e.tickColor,l=this.axis._getAxisOriginPoint(),c=this.axis.getPosition(),d="x1",u="y1",g="x2",f="y2";this.axis.isHorizontal()||(d="y1",u="x1",g="y2",f="x2");var p=c==n.TOP||c==n.LEFT?-1:1,m=a.lineSubPixelOpt(0,s);t.each(function(){var t=d3.select(this).selectAll("."+h).data(i);r&&s?(t.enter().append("line").attr("class",h).attr("transform",a.makeTranslate(l)).style({stroke:o,"stroke-width":s}),t.exit().remove(),d3.transition(t).attr("transform",a.makeTranslate(l)).attr(d,function(t){return t.tickPos+m}).attr(u,0).attr(g,function(t){return t.tickPos+m}).attr(f,p*r)):t.remove()})},_drawTickLabel:function(t){var e=this.axis.componentOption,i=(this.axis.getPlotBounds(),this.axis.scale),r=this.axis.lastScale||i,s=this.axis.getTickData(),o=e.enableTick?e.tickLength:0,h=e.labelRotation||0,c=this.axis._getAxisOriginPoint(),d=e.useHtml&&!e.labelRotation,u=e.labelStyle,g=a.getTextHeight(u),f=e.tickPadding+o,p=this.axis.getPosition(),m=p==n.TOP||p==n.LEFT?-1:1,v=this.axis.isHorizontal(),_="x",y="y";v||(_="y",y="x");var b=this;t.each(function(){var t=d3.select(this).selectAll("."+l).data(s,function(t){return t.tickValue});e.showLabel&&!d?(t.enter().append("text").attr("class",l).attr("transform",function(t){return b._getLabelTransform(r,t,m,f,c,h)}).attr(_,function(t){return r(t.tickValue)}).style("text-anchor","middle").style("opacity",0).call(a.setTextStyle,u),d3.transition(t.exit()).attr(_,function(t){return i(t.tickValue)}).style("opacity",0).remove(),d3.transition(t).attr("transform",function(t){return b._getLabelTransform(i,t,m,f,c,h)}).text(function(t){return t.tickContent}).attr(_,function(t){return t.tickLabelPos}).attr(y,function(t){if(v){var e=p==n.TOP?f+t.tickDim.height/2-g/2:f+t.tickDim.height/2+g/2;return m*e}return m*(f+t.tickDim.width/2)}).attr("dy",v?0:".32em").style("opacity",1)):t.remove()})},_getLabelTransform:function(t,e,i,r,n,s){var o,l,h=t.rangeBand?-t.rangeBand()/2:0,c=Math.round(t(e.tickValue))-h;return this.axis.isHorizontal()?(o=c,l=i*(r+e.tickDim.height/2)):(o=i*(r+e.tickDim.width/2),l=c),a.makeTranslate(n)+"rotate("+s+" "+o+","+l+")"},_drawAxisLine:function(t){var e=this.axis.componentOption,i=this.axis.getPlotBounds(),r=this.axis._getAxisOriginPoint(),n=e.lineWidth,s=e.lineColor,o="x1",l="y1",h="x2",c="y2",d=i.width;this.axis.isHorizontal()||(o="y1",l="x1",h="y2",c="x2",d=i.height);var u=a.lineSubPixelOpt(0,n);t.each(function(){var t=d3.select(this).selectAll("line."+f).data([0]);n?(t.exit().remove(),t.enter().append("line").attr("class",f),d3.transition(t).attr("transform",a.makeTranslate(r)).attr(o,0).attr(l,u).attr(h,d).attr(c,u).style({stroke:s,"stroke-width":n})):t.remove()})},_drawMinorTickLine:function(t){var e=this.axis.componentOption,i=e.enableMinorTick?e.minorTickLength:0,r=e.minorTickWidth,s=e.minorTickColor,o=this.axis.getMinorTickData(),l=this.axis._getAxisOriginPoint(),h=this.axis.getPosition(),d="x1",u="y1",g="x2",f="y2";this.axis.isHorizontal()||(d="y1",u="x1",g="y2",f="x2");var p=h==n.TOP||h==n.LEFT?-1:1,m=a.lineSubPixelOpt(0,r),v=this.axis.type==n.CATEGORY_AXIS_COMPONENT,_=this.axis.scale;t.each(function(){var t=d3.select(this).selectAll("."+c).data(o);i&&r?(t.enter().append("line").attr("class",c).attr("transform",a.makeTranslate(l)).style({stroke:s,"stroke-width":r}),t.exit().remove(),d3.transition(t).attr("transform",a.makeTranslate(l)).attr(d,function(t){return(v?t:_(t))+m}).attr(u,0).attr(g,function(t){return(v?t:_(t))+m}).attr(f,p*i)):t.remove()})},_drawDivLabels:function(){var t=this.labelDivManager,e=this.axis.componentOption;if(e.useHtml&&!e.labelRotation){var i,r,s=this.axis._getAxisOriginPoint(),o=s.x,l=s.y,h=this.axis.getPosition(),c=this.axis.isHorizontal(),d=this.axis.getTickScale(),u=this.axis.getTickData(),g=e.enableTick?e.tickLength:0,f=(d.rangeBand?0:g)+e.tickPadding,p=e.labelStyle,m=a.getTextHeight(p);e.useHtml&&!e.labelRotation&&(c?(r=h==n.TOP?-(f+m):f,u.forEach(function(e){i=e.tickLabelPos-e.tickDim.width/2,t.addLabel(e.tickContent,{x:i+o,y:r+l},p)})):u.forEach(function(e){i=h==n.LEFT?-(f+e.tickDim.width):f,r=e.tickLabelPos-m/2,t.addLabel(e.tickContent,{x:i+o,y:r+l},p)}))}},_drawAxis:function(t){this._drawPlotBands(t),this._drawGridLine(t),this._drawAxisLine(t),this._drawArrow(t),this._drawTickLine(t),this._drawTickLabel(t),this._drawDivLabels(),this._drawMinorTickLine(t),this._drawPlotLines(t)},_drawArrow:function(t){if(this.axis.showArrow()){var e=this.axis.getPlotBounds(),i=this.axis.componentOption,r=i.lineWidth,n=i.lineColor,s=a.lineSubPixelOpt(0,r),o=this.axis._getAxisOriginPoint();this._axisG.select("g.arrow").remove();var l=this._axisG.append("g").attr("class","arrow").attr("transform",a.makeTranslate(o));l.append("line"),l.append("path"),this.axis.isHorizontal()?(l.select("line").attr("x1",e.width).attr("y1",s).attr("x2",e.width+6).attr("y2",s).style({stroke:n,"stroke-width":r}),l.select("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("transform","translate("+e.width+",-6)").style("fill",n)):(l.select("line").attr("x1",s).attr("y1",-6).attr("x2",s).attr("y2",0).style({stroke:n,"stroke-width":r}),l.select("path").attr("d","M2,-2 L6,-10 L10,-2 L6,-6 L2,-2").attr("transform","translate(-6,0)").style("fill",n))}},_drawAxisTitle:function(t){this.axis.isHorizontal()?this._drawHorizontalTitle(t):this._drawVerticalTitle(t)},_drawHorizontalTitle:function(t){var e=this.axis.componentOption;if(e.title){var i=e.title;if(i.useHtml)this._drawHorizontalAxisTitleWithHtml(i,t);else{var r,s,o,l=i.rotation||0,h=a.getTextDimension(i.text,i.style,i.useHtml),c=i.align||"left";switch(c){case"left":r=0,o=r+h.width/2,s="start";break;case"center":r=t.width/2,o=r,s="middle";break;case"right":r=t.width,o=r-h.width/2,s="end"}var d=this.axis.getTitleLabelGap(),u=t.height/2,g=.85*h.height+(this.axis.getPosition()==n.BOTTOM?d:-d);this._axisTitleG.select("text").remove(),this._axisTitleG.append("text").attr("x",r).attr("y",g).text(i.text).style("text-anchor",s).attr("transform","rotate("+l+" "+o+","+u+")").call(a.setTextStyle,i.style)}}},_drawVerticalTitle:function(t){var e=this.axis.componentOption;if(e.title){var i=e.title;if(i.useHtml)this._drawVerticalAxisTitleWithHtml(i,t);else{var r,n,s=i.rotation||0,o=a.getTextDimension(i.text,i.style,i.useHtml),l=a.getTextDimensionWithRotation(i.text,i.style,i.useHtml,s),h=t.width/2,c=h,d=i.align||"top";switch(d){case"top":r=o.height+l.height/2;break;case"center":r=o.height+(t.height-o.height)/2;break;case"bottom":r=t.height-l.height/2}n=r,this._axisTitleG.append("text").attr("x",h).attr("y",r).text(i.text).style("text-anchor","middle").attr("transform","rotate("+s+" "+c+","+n+")").call(a.setTextStyle,i.style)}}}},a.inherit(e,i),e}),i("render/CategoryAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.categoryAxis=t}var i=t("./BaseAxisSvgRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.CATEGORY_AXIS_SVG,e)}),i("render/ValueAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.valueAxis=t}var i=t("./BaseAxisSvgRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.VALUE_AXIS_SVG,e)}),i("render/RadiusAxisSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.radiusAxis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),s=400,o=(r.css.swing,"radius-axis-grid-line"),l="plot-bands",h="plot-lines",c="value-axis-line",d=2,u="value-axis-tick-text";e.prototype={constructor:e,render:function(){var t=this.radiusAxis.getVanchartRender().getRenderRoot(),e="polarClip"+this.radiusAxis.vanchart.getIDPrefix();this._axisG?this._axisG.transition().ease("linear").duration(s).call(this._drawAxis.bind(this)):(this._axisG=t.append("g").attr("clip-path",function(){return"url(#"+e+")"}),this._axisG.append("defs").append("clipPath").attr("id",e),this._axisG.call(this._drawAxis.bind(this)));var i=this.radiusAxis,r=this._axisG.select("#"+e);r.select("path").remove(),r.append("path").attr("d",function(){return i._getRadiusGridPath(i.scale.domain()[1])}),this._axisG.attr("transform",a.makeTranslate(this.radiusAxis.polar.center))},_drawAxis:function(t){this._drawAxisLine(t),this._drawGridLine(t),this._drawPlotBands(t),this._drawPlotLines(t),this._drawTickLabel(t)},_drawAxisLine:function(t){var e=this.radiusAxis.componentOption,i=e.lineWidth,a=e.lineColor,r=this.radiusAxis.getPolarInitPoint();t.each(function(){var t=d3.select(this).selectAll("line."+c).data([r]);i?(t.exit().remove(),t.enter().append("line").attr("class",c),d3.transition(t).attr("x2",function(t){return t[0]}).attr("y2",function(t){return t[1]}).style({stroke:a,"stroke-width":i})):t.remove()})},_drawGridLine:function(t){var e=this.radiusAxis,i=e.lastScale||e.valueScale,a=e.componentOption,r=e.getTickData(),n=a.gridLineColor,s=a.gridLineWidth;t.each(function(){var t=d3.select(this).selectAll("path."+o).data(r,function(t){return t.tickValue});if(s){t.enter().append("path").attr("class",o).attr("d",function(t){return this._currentPos_=e._getRadiusGridData(t.tickValue,!1,i),e._getRadiusGridPathByData(this._currentPos_)}).style({fill:"none",stroke:n,"stroke-width":s,opacity:1});var a=d3.transition(t).style("opacity",1);a.attrTween?a.attrTween("d",function(t){var i=this._currentPos_;this._currentPos_=e._getRadiusGridData(t.tickValue);var a=d3.interpolate(i,this._currentPos_);return function(t){return e._getRadiusGridPathByData(a(t))}}):a.attr("d",function(t){return this._currentPos_=e._getRadiusGridData(t.tickValue),e._getRadiusGridPathByData(this._currentPos_)});var l=d3.transition(t.exit()).style("opacity",0).remove();l.attrTween&&l.attrTween("d",function(t){var i=this._currentPos_;this._currentPos_=e._getRadiusGridData(t.tickValue);var a=d3.interpolate(i,this._currentPos_);return function(t){return e._getRadiusGridPathByData(a(t))}})}else t.remove()})},_drawPlotBands:function(t){var e=this.radiusAxis.getRadiusPlotBands();t.each(function(){var t=d3.select(this).selectAll("path."+l).data(e);t.exit().remove(),t.enter().append("path").attr("class",l),d3.transition(t).attr("d",function(t){return t.path}).style("fill",function(t){return t.color})})},_drawPlotLines:function(t){var e=this.radiusAxis.getPlotLines(),i=this;t.each(function(){var t=d3.select(this).selectAll("."+h).data(e);t.exit().remove();var r=t.enter().append("g").attr("class",h);r.append("path"),r.append("text"),d3.transition(t.select("path")).attr("d",function(t){return i.radiusAxis._getRadiusGridPath(t.value)}).style("fill","none").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dataArray}),d3.transition(t.select("text")).text(function(t){return t.text}).attr("y",function(t){return t.baseY}).attr("text-anchor",function(t){return t.textAnchor}).each(function(t){d3.select(this).call(a.setTextStyle,t.style)})})},_drawTickLabel:function(t){var e=this.radiusAxis,i=e.scale,r=e.lastScale||e.scale,n=e.componentOption,s=e.getTickData();s.length=Math.max(s.length-1,0);var o=n.labelStyle,l=n.labelRotation,h=n.useHtml;if(h&&!l)for(var c=e.polar.center,g=0,f=s.length;f>g;g++){var p=s[g],m=-p.tickDim.width-d+c[0],v=-i(p.tickValue)-p.tickDim.height+c[1];this.divManager.addLabel(p.tickContent,{x:m,y:v},o)}else t.each(function(){var t=d3.select(this).selectAll("text."+u).data(s,function(t){return t.tickValue});n.showLabel?(t.exit().remove(),t.enter().append("text").attr("class",u).attr("x",-d).attr("y",function(t){return-r(t.tickValue)}).attr("transform",function(t){return"rotate("+l+" 0 0)"}),t.call(a.setTextStyle,o),d3.transition(t).text(function(t){return t.tickContent}).attr("y",function(t){return-i(t.tickValue)}).style("text-anchor","end")):t.remove()})}},a.inherit(e,i),t("./RenderLibrary").register(n.RADIUS_AXIS_SVG,e)}),i("render/AngleAxisSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.angleAxis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),s=400,o=(r.css.swing,"angle-axis-line"),l="angle-axis-grid-line",h="category-axis-tick-text";e.prototype={constructor:e,render:function(){var t=this.angleAxis.getVanchartRender().getRenderRoot();this._axisG?this._axisG.transition().ease("linear").duration(s).call(this._drawAxis.bind(this)):(this._axisG=t.append("g"),this._axisG.call(this._drawAxis.bind(this))),this._axisG.attr("transform",a.makeTranslate(this.angleAxis.polar.center))},_drawAxis:function(t){this._drawAxisLine(t),this._drawGridLine(t),this._drawTickLabel(t)},_drawAxisLine:function(t){var e=this.angleAxis.polar.radiusAxis,i=this.angleAxis,a=i.componentOption.lineWidth,r=i.componentOption.lineColor,n=e.scale.domain()[1];t.each(function(){var t=d3.select(this).selectAll("path."+o).data([0]);a?(t.enter().append("path").attr("class",o),d3.transition(t).attr("d",function(){return e._getRadiusGridPath(n)}).style({fill:"none",stroke:r,"stroke-width":a})):t.remove()})},_drawGridLine:function(t){var e=this.angleAxis.componentOption,i=e.gridLineWidth,a=e.gridLineColor,r=this.angleAxis.getAngleAxisLineData();t.each(function(){var t=d3.select(this).selectAll("line."+l).data(r);i?(t.exit().remove(),t.enter().append("line").attr("class",l),d3.transition(t).attr("x2",function(t){return t[0]}).attr("y2",function(t){return t[1]}).style({stroke:a,"stroke-width":i})):t.remove()})},_drawTickLabel:function(t){var e=this.angleAxis,i=e.componentOption,r=i.labelStyle,n=i.labelRotation||0,s=i.useHtml,o=e.tickData,l=a.getTextHeight(r);if(s&&!n)for(var c=e.polar.center,d=0,u=o.length;u>d;d++){var g=o[d],f=g.tickPos.x+c[0],p=g.tickPos.y+c[1];this.labelDivManager.addLabel(g.tickContent,{x:f,y:p},r)}else t.each(function(){d3.select(this).selectAll("text."+h).remove();var t=d3.select(this).selectAll("text."+h).data(o);i.showLabel&&(t.enter().append("text").attr("class",h).call(a.setTextStyle,r),t.each(function(t){var e=t.tickContent;if(a.isArray(e)){for(var i=t.tickPos.x<0?t.tickDim.width:0,o=t.tickPos.x<0?"end":"start",h=0,c=e.length;c>h;h++)0==h?d3.select(this).append("tspan").text(e[h]).attr("x",i+t.tickPos.x).attr("y",.85*l+t.tickPos.y).attr("text-anchor",o):d3.select(this).append("tspan").text(e[h]).attr("x",i+t.tickPos.x).attr("y",.85*l+h*(1.3*l)+t.tickPos.y).attr("text-anchor",o);if(n){var d=t.tickPos.x+t.tickDim.width/2,u=t.tickPos.y+t.tickDim.height/2;d3.select(this).attr("transform","rotate("+n+" "+d+","+u+")")}}else{var d=t.tickPos.x+t.tickDim.width/2,u=t.tickPos.y+t.tickDim.height/2,g=a.getTextDimension(e,r,s);d3.select(this).text(e).attr("x",d-g.width/2).attr("y",u-g.height/2).attr("text-anchor","start").attr("dy",".85em").attr("transform","rotate("+n+" "+d+","+u+")")}}))})}},a.inherit(e,i),t("./RenderLibrary").register(n.ANGLE_AXIS_SVG,e)}),i("render/DateAxisSvgRender",["require","./BaseAxisSvgRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.dateAxis=t}var i=t("./BaseAxisSvgRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.DATE_AXIS_SVG,e)}),i("render/LegendSvgRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){this.legend=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/BezierEasing"),n=t("../Constants"),s=t("./LegendIconFactory"),o="legend-item",l="legend-marker",h="legend-label",c="legend-gradual-background",d="legend-pages",u="rgb(67,67,72)",g="rgb(204,204,204)";return e.prototype={constructor:e,render:function(){var t=this.legend.getVanchartRender().getRenderRoot(),e=this.legend.bounds;this._legendG=this._legendG||t.append("g"),this._legendG.attr("transform","translate("+e.x+","+e.y+")"),this._updateBackground(),this.legend.isHorizontal()?this._updateHorizontal():this._updateVertical()},_updateBackground:function(){var t=this.legend.componentOption,e=this.legend.bounds,i=this.legend.vanchart.getIDPrefix(),a=c+i;this._renderSvgBackground(this._legendG,t,e,a)},_renderVerticalWithPages:function(t){var e=this.legend.bounds.width,i=this.legend.bounds.height;i-=this.legend.getButtonHeight();var n=this.legend.vanchart.getIDPrefix()+d,s=t.selectAll("defs").data([0]);s.enter().append("defs");var o=s.selectAll("#"+n).data([0]);o.enter().append("clipPath").attr("id",n).append("rect"),o.select("rect").attr("width",e).attr("height",i);var l=t.selectAll("g.clip").data([0]);l.enter().append("g").attr("class","clip"),l=t.select("g.clip").attr("clip-path","url(#"+n+")");var h=l.selectAll("g.pageG").data([0]);h.enter().append("g").attr("class","pageG"),h=l.select("g.pageG"),this._renderVerticalWithoutPages(h);var c=40,f=t.selectAll("g.button").data([0]);f.enter().append("g").attr("class","button"),f=t.select("g.button").attr("transform","translate(0,"+i+")");var p=(e-c)/2,m=(e+c)/2,v=i-this.legend.getPadding(),_=this.legend.getPreHeight();this.pageIndex=a.pick(this.pageIndex,0);var y=Math.ceil((_-i)/v)+1,b=e/2,x=f.selectAll("text").data([0]);x.enter().append("text"),x.attr("x",b).attr("y",0).attr("dy",".71em").attr("text-anchor","middle").text(this.pageIndex+1+"/"+y).style("font-Family","Verdana").style("font-Size","14px");var C=this,L=f.selectAll("path.left").data([0]);L.enter().append("path").attr("class","left").attr("d",this._prePageButtonPath(p)).style("cursor","pointer").style("fill",g).on("click",function(){if(!(C.pageIndex<=0)){var t=d3.transform(h.attr("transform")).translate,e=t[0],i=1==C.pageIndex?0:t[1]+v;h.transition().duration(500).ease(r.css.swing).attr("transform","translate("+e+","+i+")"),C.pageIndex--;var a=C.pageIndex+1;x.text(a+"/"+y),A.style("fill",C.pageIndex==y-1?g:u),d3.select(this).style("fill",C.pageIndex<=0?g:u)}});var A=f.selectAll("path.right").data([0]);A.enter().append("path").attr("class","right").attr("d",this._nextPageButtonPath(m)).style("cursor","pointer").style("fill",u).on("click",function(){if(C.pageIndex!=y-1){var t=d3.transform(h.attr("transform")).translate,e=t[0],i=t[1]-v;h.transition().duration(800).ease(r.css.swing).attr("transform","translate("+e+","+i+")"),C.pageIndex++;var a=C.pageIndex+1;x.text(a+"/"+y),d3.select(this).style("fill",C.pageIndex==y-1?g:u),L.style("fill",C.pageIndex<=0?g:u)}})},_prePageButtonPath:function(t){var e=12,i=0,a=t-e/2,r=e/2*Math.sqrt(3),n=t+e/2,s=r;return"M"+t+","+i+"L"+a+","+r+"L"+n+","+s+"Z"},_nextPageButtonPath:function(t){var e=12,i=0,a=t-e/2,r=i,n=t+e/2,s=i,o=t,l=e/2*Math.sqrt(3);return"M"+a+","+r+"L"+n+","+s+"L"+o+","+l+"Z"},_renderVerticalWithoutPages:function(t){var e=this.legend.getLegendItems(),i=this,r=this.legend,c=this.legend.componentOption,d=this.legend.getPadding()+this.legend.verticalAlign,u=this.legend.getGap(),g=t.selectAll("g."+o).data(e);g.exit().remove(),g.enter().append("g").attr("class",o).each(function(){var t=d3.select(this);t.append("path").attr("class",l),t.append("text").attr("class",h),t.call(i._bindMouseEvent.bind(i))}),t.selectAll("g."+o).each(function(t,e){var i=d3.select(this),o=s.getLegendIconSize(t.legendIconType),g=a.getTextDimension(t.itemName,c.style,!0),f=Math.max(o.height,g.height)/2,p=r.getPreHeight(e),m=i.select("path."+l);m.attr("transform","translate("+d+","+(p+f-o.height/2)+")").attr("d",function(){return s.getLegendIconPath(t.legendIconType)}).style("fill",function(t){return t.visible?t.color:t.hiddenColor}),t.series.type==n.BUBBLE_CHART&&m.style("fill-opacity",.7).style("stroke",function(t){return t.visible?t.color:t.hiddenColor}).style("stroke-width",1),i.select("text."+h).text(function(t){return t.itemName}).attr("x",d+o.width+u).attr("y",p+f).attr("dy",".35em").call(a.setTextStyle,c.style).style("fill",function(t){return t.visible?c.style.color:t.hiddenColor})})},_updateVertical:function(){var t=this._legendG.selectAll("g.vertical").data([0]);t.enter().append("g").attr("class","vertical"),t=this._legendG.select("g.vertical");var e=a.pick(this.hasEnoughSpace,this.legend.hasEnoughVerticalSpace()),i=this.legend.hasEnoughVerticalSpace();i!=e&&(t.remove(),t=this._legendG.append("g").attr("class","vertical"),this.hasEnoughSpace=i),this.legend.hasEnoughVerticalSpace()?this._renderVerticalWithoutPages(t):this._renderVerticalWithPages(t)},_updateHorizontal:function(){function t(t,e){for(var i=0,a=0;a<t.lineIndex;a++)i+=c[a].length;return e-i}for(var e=this.legend.getPadding(),i=this.legend.getHorizontalGap(),r=this.legend.getGap(),c=this.legend.getHorizontalLineItems(),d=this.legend.getLineHeight(),u=[],g=[],f=this.legend.componentOption,p=this.legend.bounds.width,m=e,v=0,_=c.length;_>v;v++){for(var y=c[v],b=this.legend.getHorizontalItemsWidth(y),x=Math.round((p-b)/2),C=[x],L=1;L<y.length;L++){var A=y[L-1],T=s.getLegendIconSize(A.legendIconType),S=a.getTextDimension(A.itemName,f.style,!0);x+=T.width+r+S.width+i,C.push(x)}u.push(C),g.push(m),m+=d[v]+e}var R=this,y=this.legend.getLegendItems(),k=this._legendG.selectAll("g."+o).data(y);k.exit().remove();var O=k.enter();O.append("g").attr("class",o).each(function(){var t=d3.select(this);t.append("path").attr("class",l),t.append("text").attr("class",h),t.call(R._bindMouseEvent.bind(R))}),k.each(function(e,i){var o=d3.select(this),l=s.getLegendIconSize(e.legendIconType),h=a.getTextDimension(e.itemName,f.style,!0),c=Math.max(l.height,h.height)/2;i=t(e,i);var d=u[e.lineIndex][i],p=g[e.lineIndex],m=e.visible?f.style.color:e.hiddenColor,v=e.visible?e.color:e.hiddenColor,_=o.select("path");_.attr("transform","translate("+d+","+(p+c-l.height/2)+")").attr("d",function(){return s.getLegendIconPath(e.legendIconType)}).style("fill",v),e.series.type==n.BUBBLE_CHART&&_.style("fill-opacity",.3).style("stroke",v).style("stroke-width",1),o.select("text").text(function(t){return t.itemName}).attr("x",d+l.width+r).attr("y",p+c).attr("dy",".35em").call(a.setTextStyle,f.style).style("fill",m)})},_bindMouseEvent:function(t){var e=this.legend.vanchart,i=this.legend.componentOption;t.style("cursor","pointer").on("mouseenter",function(t){d3.select(this).select("."+h).style("fill",t.hoverColor)}).on("mouseleave",function(t){var e=t.visible?i.style.color:t.hiddenColor;d3.select(this).select("."+h).style("fill",e)}).on("click",function(t){var i=(t.series,t.itemName);e.series.map(function(t){t.type==n.PIE_CHART?(t.points.map(function(t){t.seriesName==i&&(t.visible=!t.visible)}),t.updateVisiblePoints()):t.name===i&&(t.visible=!t.visible)}),e.currentOption.byClassName=!0,e.refreshComponentsAndSeries()})}},a.inherit(e,i),t("./RenderLibrary").register(n.LEGEND_SVG,e),e}),i("render/ToolbarSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.toolbar=t,this._bodyG=null}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.toolbar.componentOption;if(t.enabled&&!this._bodyG){var e=this.toolbar.getVanchartRender().getRenderRoot(),i=this.toolbar.getToolbarPos();this._bodyG||(this._bodyG=e.append("g").attr("transform","translate("+i.x+","+i.y+")")),this.toolbar.menuIcon&&this.toolbar.menuIcon.render(this._bodyG),this.toolbar.refreshIcon.render(this._bodyG);for(var a=this.toolbar.getToolbarIcons(),r=0,n=a.length;n>r;r++)a[r].render(this._bodyG)}},hide:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,i=[],a=0;e>a;a++)i.push(100+80*a);for(var a=0;e>a;a++){var r=e-a;t[a].hideIcon(r,i[a])}var n=this.toolbar.getRefreshIcon(),s=4*(e+1),o=4*(e+1)+33*e;n.visible&&n.refreshMove(s,o)},show:function(){for(var t=[0],e=this.toolbar.getToolbarIcons(),i=e.length,a=0;i-1>a;a++)t.push(100+80*a);for(var a=0;i>a;a++){var r=i-a;e[a].showIcon(r,t[a])}var n=this.toolbar.getRefreshIcon(),s=4*(i+1)+33*i,o=4*(i+1);n.visible&&n.refreshMove(s,o)},toFront:function(){this._bodyG&&a.toFrontOfAll(this._bodyG.node())}},a.inherit(e,i),t("./RenderLibrary").register(r.TOOLBAR_SVG,e),e}),i("render/DataSheetSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.dataSheet=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory");e.prototype={constructor:e,render:function(){var t=this.dataSheet.getVanchartRender().getRenderRoot();this._tableG&&this._tableG.remove();var e=this.dataSheet.vanchart.xAxis(),i=e.getCategories(),a=this.dataSheet.getPlotBounds().width/i.length,r=this.dataSheet.getMaxSeriesWidth(),n=this.dataSheet.getCategoryHeight(),s=this.dataSheet.bounds.x,o=this.dataSheet.bounds.y;this._tableG=t.append("g").attr("transform","translate("+s+","+o+")"),this._drawLines(r,n,a),this._drawCategory(r,n,a),this._drawSeries(r,n),this._drawValues(r,n,a)},_drawLines:function(t,e,i){var a=this._tableG.append("g"),r=this.dataSheet.componentOption,n=this.dataSheet.bounds.width,s=this.dataSheet.bounds.height;a.append("path").attr("d","M"+t+",0L"+n+",0L"+n+" "+s+"L0,"+s+"L0,"+e).style({fill:"none",stroke:r.borderColor,
"stroke-width":r.borderWidth});for(var o=this.dataSheet.categoryNames.length,l=t,h=0;o>h;h++)a.append("line").attr("x1",l).attr("y1",0).attr("x2",l).attr("y2",s),l+=i;for(var c=this.dataSheet.seriesNames.length,d=e,h=0;c>h;h++)a.append("line").attr("x1",0).attr("y1",d).attr("x2",n).attr("y2",d),d+=this.dataSheet.getSeriesHeight(h);a.selectAll("line").style({fill:"none",stroke:r.borderColor,"stroke-width":r.borderWidth})},_drawValues:function(t,e,i){for(var r=this._tableG.append("g"),n=this.dataSheet.values,s=this.dataSheet._valueStyle(),o=a.getTextHeight(s),l=this.dataSheet.getTextPadding(),h=t,c=e,d=0;d<n.length;d++){for(var u=n[d],g=this.dataSheet.getSeriesHeight(d),f=0;f<u.length;f++){var p=u[f];if(p)for(var m=c+this._getStartY(p,s,g)+.85*o,v=0;v<p.length;v++)r.append("text").text(p[v]).attr("x",h+i/2+i*f).attr("y",m+(o+l)*v)}c+=g}r.selectAll("text").style({"text-anchor":"middle"}).call(a.setTextStyle,s)},_drawCategory:function(t,e,i){for(var r=this._tableG.append("g"),n=this.dataSheet.categoryNames,s=t,o=this.dataSheet._categoryStyle(),l=a.getTextHeight(o),h=this.dataSheet.getTextPadding(),c=0,d=n.length;d>c;c++)for(var u=n[c],g=this._getStartY(u,o,e)+.85*l,f=0;f<u.length;f++)r.append("text").text(u[f]).attr("x",s+i/2+i*c).attr("y",g+(l+h)*f);r.selectAll("text").style({"text-anchor":"middle"}).call(a.setTextStyle,o)},_drawSeries:function(t,e){for(var i=this._tableG.append("g"),r=this.dataSheet.seriesNames,s=16+(t-16)/2,o=e,l=this.dataSheet._seriesStyle(),h=a.getTextHeight(l),c=this.dataSheet.getTextPadding(),d=0,u=r.length;u>d;d++){for(var g=r[d],f=this.dataSheet.getSeriesHeight(d),p=o+this._getStartY(g,l,f)+.85*h,m=0;m<g.length;m++)i.append("text").text(g[m]).attr("x",s).attr("y",p+(h+c)*m);var v=this.dataSheet.getLegendIconTypeWithSeriesIndex(d),_=n.getLegendIconSize(v).height;i.append("path").attr("d",n.getLegendIconPath(v)).attr("transform","translate(2,"+((f-_)/2+o)+")").style("fill",this.dataSheet._getDefaultSeriesColor(g[0])),o+=f}i.selectAll("text").style({"text-anchor":"middle"}).call(a.setTextStyle,l)},_getStartY:function(t,e,i){var r=this.dataSheet.getTextPadding(),n=t.length,s=a.getTextHeight(e)*n+(n-1)*r;return(i-s)/2}},a.inherit(e,i),t("./RenderLibrary").register(r.DATA_SHEET_SVG,e)}),i("render/RangeLegendSvgRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.rangeLegend=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=10,s=15,o=100,l=15,h=10,c=5,d=25,u=2,g="linear-color-clip-path-id",f="min-bar-class-name",p="max-bar-class-name",m="range-item";return e.prototype={constructor:e,render:function(){var t=this.rangeLegend.getVanchartRender().getRenderRoot(),e=this.rangeLegend.bounds;this.isHorizontal=this.rangeLegend.isHorizontal(),this._legendG||(this._legendG=t.append("g"),this.minPos=0,this.maxPos=o),this.rangeLegend.vanchart.isZoomRefreshState()||(this.minPos=0,this.maxPos=o),this._legendG.attr("transform","translate("+this._getIntPos(e.x)+","+this._getIntPos(e.y)+")"),this._updateBackground(),this.rangeLegend.isIntervalLegend?this._renderInterval():this._renderGradient()},_updateBackground:function(){var t=this.rangeLegend.componentOption,e=this.rangeLegend.bounds,i=this.rangeLegend.vanchart.getIDPrefix(),a="range-legend-background"+i;this._renderSvgBackground(this._legendG,t,e,a)},_renderGradient:function(){var t=this._createDefs(),e=((this.isHorizontal?this.rangeLegend.bounds.width:this.rangeLegend.bounds.height)-o)/2;e=this._getIntPos(e);var i=this._legendG.selectAll("rect.gradient-bar-background").data([0]);i.enter().append("rect").attr("class","gradient-bar-background"),i.attr("rx",2).attr("ry",2).attr("x",this.isHorizontal?e:n).attr("y",this.isHorizontal?n:e).attr("width",this.isHorizontal?o:s).attr("height",this.isHorizontal?s:o).style("fill","#eaeaea");var r=this.rangeLegend.vanchart.getIDPrefix(),l=this._legendG.selectAll("rect.gradient-bar").data([0]);l.enter().append("rect").attr("class","gradient-bar"),l.attr("clip-path","url(#"+g+r+")").attr("rx",2).attr("ry",2).attr("x",this.isHorizontal?e:n).attr("y",this.isHorizontal?n:e).attr("width",this.isHorizontal?o:s).attr("height",this.isHorizontal?s:o).style("fill","url(#"+t.attr("id")+")");var h=this,c=d3.behavior.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("drag",function(){var t=0;if(h.isHorizontal){var i=h.minPos;h.minPos+=Math.round(d3.event.dx),h.minPos=Math.max(h.minPos,0),h.minPos=Math.min(h.minPos,h.maxPos),t=h.minPos-i}else{var i=h.maxPos;h.maxPos+=Math.round(d3.event.dy),h.maxPos=Math.min(h.maxPos,o),h.maxPos=Math.max(h.maxPos,h.minPos),t=h.maxPos-i}Math.abs(t)>=1&&(h._updateMinBar(e),h.rangeLegend.refreshPoints(h.minPos,h.maxPos))}),d=d3.behavior.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("drag",function(){var t=0;if(h.isHorizontal){var i=h.maxPos;h.maxPos+=Math.round(d3.event.dx),h.maxPos=Math.min(h.maxPos,o),h.maxPos=Math.max(h.maxPos,h.minPos),t=h.maxPos-i}else{var i=h.minPos;h.minPos+=Math.round(d3.event.dy),h.minPos=Math.max(h.minPos,0),h.minPos=Math.min(h.minPos,h.maxPos),t=h.minPos-i}Math.abs(t)>=1&&(h._updateMaxBar(e),h.rangeLegend.refreshPoints(h.minPos,h.maxPos))}),u=this._legendG.selectAll("path."+f).data([0]);u.enter().append("path").attr("class",f),u.attr("d",this.isHorizontal?this.rangeLegend.getLeftBarPath():this.rangeLegend.getTopBarPath()).call(c);var m=this._legendG.selectAll("path."+p).data([0]);m.enter().append("path").attr("class",p),m.attr("d",this.isHorizontal?this.rangeLegend.getRightBarPath():this.rangeLegend.getBottomBarPath()).call(d);var v=this.rangeLegend.componentOption.style;if(!this._labelUseHtml()){var _=this._legendG.selectAll("text."+f).data([0]);_.enter().append("text").attr("class",f),_.attr("dy",".32em").call(a.setTextStyle,v);var y=this._legendG.selectAll("text."+p).data([0]);y.enter().append("text").attr("class",p),y.attr("dy",".32em").call(a.setTextStyle,v)}this._updateMinBar(e),this._updateMaxBar(e)},_createDefs:function(){if(!this._legendG.selectAll("defs").empty())return this._legendG.selectAll("defs").select("linearGradient");var t=this._legendG.append("defs"),e=this.rangeLegend.vanchart.getIDPrefix();t.append("clipPath").attr("id",g+e).append("rect");var i=t.append("linearGradient").attr("id","gradient-range-legend"+e).attr("x1","0%").attr("y1",this.isHorizontal?"0%":"100%").attr("x2",this.isHorizontal?"100%":"0%").attr("y2","0%"),a=this.rangeLegend.getValueAndColors();return a.forEach(function(t){var e=t[0],a=t[1];i.append("stop").attr("offset",e).style("stop-color",a)}),i},_updateMinBar:function(t){this.isHorizontal?this._updateHorizontalMinBar(t):this._updateVerticalMinBar(t)},_updateVerticalMinBar:function(t){var e=n+s,i=t+this.maxPos;this._legendG.select("path."+f).attr("transform","translate("+e+","+i+")").style("fill",this.rangeLegend.colorScale((o-this.maxPos)/o));var r=this.rangeLegend.getGradientLabelContent(this.maxPos),d=this.rangeLegend.componentOption.style,u=a.getTextDimension(r,d,!0);if(this._labelUseHtml()){var g=this._getIntPos(t+this.maxPos+h/2-u.height/2),p=this._getAbsoluteBounds(u,n+s+l+c,g);this.labelDivManager.clearLabels(f),this.labelDivManager.addLabelWidthBounds(r,p,d,f)}else this._legendG.select("text."+f).attr("text-anchor","middle").attr("x",this._getIntPos(n+s+l+c+u.width/2)).attr("y",this._getIntPos(t+this.maxPos+h/2)).text(r);this._updateVerticalLinearColorClipPath(t)},_getAbsoluteBounds:function(t,e,i){return{x:this.rangeLegend.bounds.x+e,y:this.rangeLegend.bounds.y+i,width:t.width,height:t.height}},_getIntPos:function(t){return Math.round(t)},_labelUseHtml:function(){return this.rangeLegend.componentOption.useHtml},_updateHorizontalMinBar:function(t){var e=t-h+this.minPos,i=n+s;this._legendG.select("path."+f).attr("transform","translate("+e+","+i+")").style("fill",this.rangeLegend.colorScale(this.minPos/o));var r=this.rangeLegend.getGradientLabelContent(this.minPos),d=this.rangeLegend.componentOption.style,u=a.getTextDimension(r,d,!0);if(this._labelUseHtml()){var g=this._getAbsoluteBounds(u,this._getIntPos(t+this.minPos-u.width),n+s+l+c);this.labelDivManager.clearLabels(f),this.labelDivManager.addLabelWidthBounds(r,g,d,f)}else this._legendG.select("text."+f).attr("text-anchor","left").attr("y",this._getIntPos(n+s+l+c+u.height/2)).attr("x",this._getIntPos(t+this.minPos-u.width)).text(r);this._updateHorizontalLinearColorClipPath(t)},_updateMaxBar:function(t){this.isHorizontal?this._updateHorizontalMaxBar(t):this._updateVerticalMaxBar(t)},_updateVerticalMaxBar:function(t){var e=n+s,i=t-h+this.minPos;this._legendG.select("path."+p).attr("transform","translate("+e+","+i+")").style("fill",this.rangeLegend.colorScale((o-this.minPos)/o));var r=this.rangeLegend.getGradientLabelContent(this.minPos),d=this.rangeLegend.componentOption.style,u=a.getTextDimension(r,d,!0);if(this._labelUseHtml()){var g=this._getIntPos(t+this.minPos-h/2-u.height/2),f=this._getAbsoluteBounds(u,n+s+l+c,g);this.labelDivManager.clearLabels(p),this.labelDivManager.addLabelWidthBounds(r,f,d,p)}else this._legendG.select("text."+p).attr("text-anchor","middle").attr("x",this._getIntPos(n+s+l+c+u.width/2)).attr("y",this._getIntPos(t+this.minPos-h/2)).text(r);this._updateVerticalLinearColorClipPath(t)},_updateHorizontalMaxBar:function(t){var e=t+this.maxPos,i=n+s;this._legendG.select("path."+p).attr("transform","translate("+e+","+i+")").style("fill",this.rangeLegend.colorScale(this.maxPos/o));var r=this.rangeLegend.getGradientLabelContent(this.maxPos),h=this.rangeLegend.componentOption.style,d=a.getTextDimension(r,h,!0);if(this._labelUseHtml()){var u=this._getAbsoluteBounds(d,this._getIntPos(t+this.maxPos),n+s+l+c);this.labelDivManager.clearLabels(p),this.labelDivManager.addLabelWidthBounds(r,u,h,p)}else this._legendG.select("text."+p).attr("text-anchor","left").attr("y",this._getIntPos(n+s+l+c+d.height/2)).attr("x",this._getIntPos(t+this.maxPos)).text(r);this._updateHorizontalLinearColorClipPath(t)},_updateVerticalLinearColorClipPath:function(t){var e=this.rangeLegend.vanchart.getIDPrefix();this._legendG.select("defs").select("clipPath#"+g+e).select("rect").attr("x",n).attr("y",t+this.minPos).attr("width",s).attr("height",this.maxPos-this.minPos)},_updateHorizontalLinearColorClipPath:function(t){var e=this.rangeLegend.vanchart.getIDPrefix();this._legendG.select("defs").select("clipPath#"+g+e).select("rect").attr("x",t+this.minPos).attr("y",n).attr("width",this.maxPos-this.minPos).attr("height",s)},_renderInterval:function(){if(!(this.rangeLegend.items.length<=0)){var t=this._legendG.selectAll("g."+m).data(this.rangeLegend.items),e=this;t.enter().append("g").attr("class",m).each(function(){var t=d3.select(this);t.append("rect").attr("class",m),e._labelUseHtml()||t.append("text").attr("class",m),t.call(e._bindMouseEvent.bind(e))}),this.isHorizontal?this._updateHorizontalIntervalItems(t):this._updateVerticalIntervalItems(t)}},_updateVerticalIntervalItems:function(t){var e=this.rangeLegend.componentOption,i=e.style,r=n,o=n+s+c,l=(this.rangeLegend.bounds.height-this.rangeLegend.items.length*d-(this.rangeLegend.items.length-1)*u)/2;l=this._getIntPos(l);var h=this;t.each(function(t){var e=d3.select(this),n=a.getTextDimension(t.label,i);if(e.select("rect").attr("rx",2).attr("ry",2).attr("x",r).attr("y",l).attr("width",s).attr("height",d).style("fill",t.visible?t.color:t.hiddenColor),h._labelUseHtml()){var c=h._getAbsoluteBounds(n,h._getIntPos(o),h._getIntPos(l+d/2-n.height/2));h.labelDivManager.addLabelWidthBounds(t.label,c,i)}else e.select("text").text(function(t){return t.label}).attr("x",h._getIntPos(o+n.width/2)).attr("y",h._getIntPos(l+d/2)).attr("dy",".32em").attr("text-anchor","middle").call(a.setTextStyle,i).style("fill",t.visible?i.color:t.hiddenColor);l+=d+u})},_updateHorizontalIntervalItems:function(t){var e=this.rangeLegend.componentOption,i=e.style,r=(this.rangeLegend.bounds.width-this.rangeLegend.items.length*d-(this.rangeLegend.items.length-1)*u)/2;r=this._getIntPos(r);var o=this;t.each(function(t,e){var l=d3.select(this),h=a.getTextDimension(t.label,i),g=n,f=g+h.height+c,p=f+s+c;if(l.select("rect").attr("rx",2).attr("ry",2).attr("x",r).attr("y",f).attr("width",d).attr("height",s).style("fill",t.visible?t.color:t.hiddenColor),o._labelUseHtml()){var m=o._getIntPos(e%2==0?g:p),v=o._getAbsoluteBounds(h,o._getIntPos(r),m);o.labelDivManager.addLabelWidthBounds(t.label,v,i)}else l.select("text").text(function(t){return t.label}).attr("x",o._getIntPos(r+d/2)).attr("y",o._getIntPos(e%2==0?g+h.height/2:p+h.height/2)).attr("dy",".32em").attr("text-anchor","middle").call(a.setTextStyle,i).style("fill",t.visible?i.color:t.hiddenColor);r+=d+u})},_bindMouseEvent:function(t){var e=this.rangeLegend.vanchart,i=this.rangeLegend.componentOption,a=i.style.color;t.style("cursor","pointer").on("mouseenter",function(t){d3.select(this).select("text."+m).style("fill",t.hoverColor)}).on("mouseleave",function(t){var e=t.visible?a:t.hiddenColor;d3.select(this).select("text."+m).style("fill",e)}).on("click",function(t){t.visible=!t.visible;var i=t.visible?t.color:t.hiddenColor,r=t.visible?a:t.hiddenColor;d3.select(this).select("rect."+m).style("fill",i),d3.select(this).select("text."+m).style("fill",r),t.points.forEach(function(e){e.visible=t.visible}),e.renderOnlyCharts()})}},a.inherit(e,i),t("./RenderLibrary").register(r.RANGE_LEGEND_SVG,e),e}),i("render/VanChartSvgRender",["require","../Constants","./BaseRender","../utils/BaseUtils","./RenderLibrary"],function(t){function e(t){this.vanchart=t}var i=t("../Constants"),a=t("./BaseRender"),r=t("../utils/BaseUtils"),n="chart-gradual-background",s="plot-gradual-background";return e.prototype={constructor:e,render:function(){var t=this.vanchart.getParentDom(),e=this.vanchart.chartWidth(),a=this.vanchart.chartHeight();if(!this.svgRoot){this.svgRoot=d3.select(t).append("svg").attr("width",e).attr("height",a);var r=this.vanchart.getBodyClipID();this.svgRoot.append("defs").append("clipPath").attr("id",r)}this._updateBodyClip();var n=this.vanchart.getChartRenders(),s=this.vanchart.getFixedComponentRenders(),o=this.vanchart.getFloatComponentRenders();this._renderBackground(),s.forEach(function(t){t.render()}),n.forEach(function(t){t.render()}),o.forEach(function(t){t.render()}),this.vanchart.getComponent(i.TOOLBAR_COMPONENT)&&this.vanchart.getComponent(i.TOOLBAR_COMPONENT).render.toFront(),this._renderTrendLine()},_updateBodyClip:function(){var t=this.vanchart.getPlotClipBounds(),e=this.svgRoot.select("#"+this.vanchart.getBodyClipID());e.select("rect").remove(),e.append("rect").attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height)},_renderBackground:function(){var t=this.vanchart.getIDPrefix(),e=r.makeBounds(0,0,this.vanchart.chartWidth()-5,this.vanchart.chartHeight()-5),i=this.vanchart.getChartBackgroundOption(),a=this.vanchart.getPlotBounds(),o=this.vanchart.getPlotBackgroundOption();this._backgroundG||(this._backgroundG=this.svgRoot.append("g")),this._backgroundG.selectAll(".background").remove(),this._backgroundG.selectAll("defs").remove(),this._createGradualDefs(this._backgroundG,i.color,n+t),this._createGradualDefs(this._backgroundG,o.color,s+t),this._renderBackgroundWithBounds(i,e,n+t),this._renderBackgroundWithBounds(o,a,s+t)},_renderBackgroundWithBounds:function(t,e,i){if(-1!=i.indexOf(n)){var a=t.borderWidth;e=r.rectSubPixelOpt(e.x+a/2,e.y+a/2,e.width-a,e.height-a,t.borderWidth)}else e=r.rectSubPixelOpt(e.x,e.y,e.width,e.height,t.borderWidth);var s=this.vanchart.getParentDom();if(t.chartShadow)d3.select(s).style("box-shadow","1px 1px 2px rgba(0,0,0,0.1)");else if(t.plotShadow){for(var o=[5,3,1],l=[.05,.1,.15],h=r.rectSubPixelOpt(e.x,e.y,e.width,e.height,1),c=0;3>c;c++)this._backgroundG.append("rect").attr("class","background").attr("x",h.x).attr("y",h.y).attr("width",h.width).attr("height",h.height).attr("transform","translate(1, 1)").attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","none").style("stroke","black").style("stroke-width",o[c]).style("stroke-opacity",l[c]);this._backgroundG.append("rect").attr("class","background").attr("x",h.x).attr("y",h.y).attr("width",h.width).attr("height",h.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill","white")}this._backgroundG.append("rect").attr("class","background").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("rx",t.borderRadius).attr("ry",t.borderRadius).style("fill",function(){return t.color?"string"==typeof t.color?t.color:"url(#"+i+")":"none"}).style("stroke",t.borderColor).style("stroke-width",t.borderWidth),t.image&&this._backgroundG.append("image").attr("class","background").attr("preserveAspectRatio","none").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("xlink:href",t.image)},_renderTrendLine:function(){var t=this.vanchart.getTrendLineOption(),e=this.vanchart.getPlotBounds(),a=this.vanchart.getBodyClipID();this._trendG||(this._trendG=this.svgRoot.append("g").attr("clip-path","url(#"+a+")")),this._trendG.attr("transform","translate("+e.x+","+e.y+")");var r=this._trendG.selectAll("line").data(t);r.enter().append("line"),r.exit().remove(),r.attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).style("stroke",function(t){return t.trendLine.color}).style("stroke-width",function(t){return t.trendLine.width}).style("stroke-dasharray",function(t){return i.DASH_TYPE[t.trendLine.dashStyle]})},getRenderRoot:function(){return this.svgRoot},remove:function(){this.svgRoot.remove();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();t.forEach(function(t){t.removeDivLabels()}),e.forEach(function(t){t.removeDivLabels()})}},r.inherit(e,a),t("./RenderLibrary").register(i.VANCHART_SVG,e),e}),i("ModernBrowserRequire",["require","./chart/Pie","./chart/Bar","./chart/Line","./chart/Area","./chart/Gauge","./chart/Radar","./chart/Bubble","./chart/Scatter","./chart/Map","./render/PieSvgRender","./render/BarSvgRender","./render/LineSvgRender","./render/AreaSvgRender","./render/GaugeSvgRender","./render/RadarSvgRender","./render/BubbleSvgRender","./render/ScatterSvgRender","./render/MapSvgRender","./render/DrillToolsSvgRender","./render/TitleSvgRender","./render/CategoryAxisSvgRender","./render/ValueAxisSvgRender","./render/RadiusAxisSvgRender","./render/AngleAxisSvgRender","./render/DateAxisSvgRender","./render/LegendSvgRender","./render/ToolbarSvgRender","./render/DataSheetSvgRender","./render/RangeLegendSvgRender","./VanCharts","./render/VanChartSvgRender"],function(t){t("./chart/Pie"),t("./chart/Bar"),t("./chart/Line"),t("./chart/Area"),t("./chart/Gauge"),t("./chart/Radar"),t("./chart/Bubble"),t("./chart/Scatter"),t("./chart/Map"),t("./render/PieSvgRender"),t("./render/BarSvgRender"),t("./render/LineSvgRender"),t("./render/AreaSvgRender"),t("./render/GaugeSvgRender"),t("./render/RadarSvgRender"),t("./render/BubbleSvgRender"),t("./render/ScatterSvgRender"),t("./render/MapSvgRender"),t("./render/DrillToolsSvgRender"),t("./render/TitleSvgRender"),t("./render/CategoryAxisSvgRender"),t("./render/ValueAxisSvgRender"),t("./render/RadiusAxisSvgRender"),t("./render/AngleAxisSvgRender"),t("./render/DateAxisSvgRender"),t("./render/LegendSvgRender"),t("./render/ToolbarSvgRender"),t("./render/DataSheetSvgRender"),t("./render/RangeLegendSvgRender"),t("./VanCharts"),t("./render/VanChartSvgRender")}),i("render/RadarVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.radar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=2;e.prototype={constructor:e,render:function(){this._removeAll();var t=this.radar.getVanchartRender().getRenderRoot(),e=this.radar.getRadarCenter();this._bodySet=t.set(),this._axisSet=t.set(),this._lineSet={},this.markerMap={},this._drawRadarAxis(t,e),this._drawRadarSeries(t,e),this._drawDataLabels(t,e)},_drawDataLabels:function(t,e){var i=this.radar.getVisibleChartData(),a=t.set();this._axisSet.push(a);for(var r=0,n=i.length;n>r;r++){var s=i[r].points;this._drawVmlDataLabels(t,a,s,e[0],e[1])}},_drawRadarSeries:function(t,e){for(var i=this.radar.getVisibleChartData(),r=0,n=i.length;n>r;r++){var s=i[r],o=s.points,l=t.set();if(this._lineSet[s.seriesName]=l,this._bodySet.push(l),this.radar.isColumnType())for(var h=0,c=o.length;c>h;h++){var d=o[h],u=t.path(this.radar._getRadarColumnPath(d.y0,d.y,d.radian)).attr({fill:d.color,"fill-opacity":d.fillColorOpacity,stroke:d.borderColor,"stroke-width":d.borderWidth}).transform(a.makeTranslate(e));u.node._data_=d,this.markerMap[d.className]=u,this.addShapeEventHandler(u),l.push(u)}else{var g=t.path(this.radar._getRadarSeriesStrokePath(s.pathSegment,s.connectNulls)).attr({fill:"none",stroke:s.lineColor,"stroke-width":s.lineWidth}).transform(a.makeTranslate(e));g.node._data_=s,this.addSeriesEventHandler(g),l.push(g);var f=t.path(this.radar._getRadarSeriesFillPath(s.pathSegment,s.connectNulls)).attr({fill:s.fillColor,"fill-opacity":s.fillColor?s.fillColorOpacity:0,stroke:"none"}).transform(a.makeTranslate(e));f.node._data_=s,this.addSeriesEventHandler(f),l.push(f);for(var h=0,c=o.length;c>h;h++){var p=o[h],m=p.pos,v=this._createVmlMarker(t,p,[e[0]+m[0],e[1]+m[1]]);this.markerMap[p.className]=v,l.push(v.marker)}}}},_drawRadarAxis:function(t,e){},_drawPlotBands:function(t,e){var i=this.radar.getRadarPlotBands(),r=this._axisSet;i.forEach(function(i){r.push(t.path(i.path).attr({fill:i.color,stroke:"none"}).transform(a.makeTranslate(e)))})},_drawPlotLines:function(t,e){var i=this.radar.getRadarPlotLines(),r=this;i.forEach(function(i){if(r._axisSet.push(t.path(r.radar._getGridPath(i.value)).attr({fill:"none",stroke:i.color,"stroke-width":i.width,"stroke-dasharray":i.dataArray}).transform(a.makeTranslate(e))),i.text){var n=a.cssNormalization(i.style);t.text(0,i.baseY,i.text).attr(n).attr("text-anchor",i.textAnchor).transform(a.makeTranslate(e))}})},_drawGridLine:function(t,e){var i=this.radar.getValueAxis(),r=i.componentOption,n=i.getTickData(),s=r.gridLineColor,o=r.gridLineWidth,l=this;n.forEach(function(i){l._axisSet.push(t.path(l.radar._getGridPath(i.tickValue)).attr({fill:"none",stroke:s,"stroke-width":o}).transform(a.makeTranslate(e)))})},_drawAxisLine:function(t,e){var i=this.radar.getValueAxis(),r=i.componentOption,n=r.lineWidth,s=r.lineColor,o=this,l=this.radar.getAxisLineData();l.forEach(function(i){o._axisSet.push(t.path(o._getLinePath([0,0],i)).attr({fill:"none",stroke:s,"stroke-width":n}).transform(a.makeTranslate(e)))});var h=this.radar.getBaseAxis(),c=h.componentOption.lineWidth,d=h.componentOption.lineColor,u=i.scale.domain()[1];this._axisSet.push(t.path(this.radar._getGridPath(u)).attr({fill:"none",stroke:d,"stroke-width":c}).transform(a.makeTranslate(e)))},_drawTickLabel:function(t,e){this._drawValueTickLabel(t,e),this._drawCategoryTickLabel(t,e)},_drawValueTickLabel:function(t,e){var i=this.radar.getValueAxis(),r=i.componentOption,n=a.clone(i.getTickData());n.length=Math.max(n.length-1,0);var o=r.labelStyle,l=r.labelRotation||0,h=r.useHtml,c=this.radar.valueScale;if(h&&!l)for(var d=0,u=n.length;u>d;d++){var g=n[d],f=-g.tickDim.width-s+e[0],p=-c(g.tickValue)-g.tickDim.height+e[1];this.labelDivManager.addLabel(g.tickContent,{x:f,y:p},o)}else for(var d=0,m=n.length;m>d;d++){var g=n[d],v=a.getTextDimension(g.tickContent,o,h),f=e[0]-s-v.width/2,p=e[1]-c(g.tickValue)-v.height/2;this._axisSet.push(t.text(f,p,g.tickContent).attr(a.cssNormalization(o)).transform("r"+l))}},_drawCategoryTickLabel:function(t,e){var i=this.radar.getBaseAxis(),r=i.componentOption,n=r.labelStyle,s=r.labelRotation||0,o=r.useHtml,l=this.radar.categoryLabel,h=a.getTextHeight(n);if(o&&!s)for(var c=0,d=l.length;d>c;c++){var u=l[c],g=u.tickPos.x+e[0],f=u.tickPos.y+e[1];this.labelDivManager.addLabel(u.tickContent,{x:g,y:f},n)}else for(var c=0,p=l.length;p>c;c++){var u=l[c],m=u.tickContent;if(a.isArray(m))for(var v=e[0]+u.tickPos.x,_=e[1]+u.tickPos.y+h/2,y=u.tickPos.x<0?u.tickDim.width:0,b=u.tickPos.x<0?"end":"start",g=y+v,x=0,d=m.length;d>x;x++){var f=_+x*(1.3*h),C=m[x];this._axisSet.push(t.text(g,f,C).attr(a.cssNormalization(n)).attr("text-anchor",b).transform("t"+s))}else{var L=e[0]+u.tickPos.x+u.tickDim.width/2,A=e[1]+u.tickPos.y+u.tickDim.height/2;this._axisSet.push(t.text(L,A,m).attr(a.cssNormalization(n)).transform("r"+s))}}},getElementByData:function(t){return this.markerMap[t.className]},cancelChosenState:function(t){if(t.columnType){var e=this.getElementByData(t);e.attr({stroke:t.borderColor,fill:t.color,"stroke-width":t.borderWidth})}else this._cancelVmlMarkerChosenState(t)},makeChosenState:function(t){if(t.columnType){var e=this.getElementByData(t);e.attr({stroke:r.mixColorWithAlpha(t.mouseOverColor,.35),fill:t.mouseOverColor?t.mouseOverColor:t.color,"stroke-width":6})}else this._makeVmlMarkerChosenState(t)},_removeAll:function(){this._bodySet&&(this.radar.getVisibleChartData().length?(this._bodySet.remove(),this._axisSet.remove()):this._bodySet.remove(),this.labelDivManager.clearAllLabels())}},a.inherit(e,i),t("./RenderLibrary").register(n.RADAR_VML,e)}),i("render/GaugeVmlRender",["require","../utils/BaseUtils","../Constants","./BaseRender","../utils/ColorUtils","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.gauge=t}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("./BaseRender"),n=t("../utils/ColorUtils"),s=5;e.prototype={constructor:e,render:function(){this._removeAll();var t=this.gauge.getVanchartRender().getRenderRoot(),e=this.gauge.getPlotBounds(),i=e.x,r=e.y;this._bodySet=t.set();for(var n=this.gauge.getVisibleChartData(),s=0,o=n.length;o>s;s++){var l=t.set(),h=n[s],c=h.style;switch(c){case a.GAUGE_POINTER:this._createPointer(t,l,h);break;case a.GAUGE_POINTER_SEMI:this._createPointerSemi(t,l,h);break;case a.GAUGE_SLOT:this._createSlot(t,l,h);break;case a.GAUGE_THERMOMETER:this._createThermometer(t,l,h);break;case a.GAUGE_RING:this._createRing(t,l,h)}l.transform("t"+(h.centerX+i)+","+(h.centerY+r)),this._bodySet.push(l)}this.gauge.vanchart.hoverSeries=n[0]},_createPointer:function(t,e,a){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(a.radius),s=a.gaugeAxis.scale.domain(),o=d3.scale.linear().domain(s).range([i.toRadian(-150),i.toRadian(150)]);e.push(t.path(r()).attr({fill:a.paneBackgroundColor,"fill-opacity":n.getColorOpacity(a.paneBackgroundColor),stroke:"none"})),r.outerRadius(.16*a.radius),e.push(t.path(r()).attr({fill:a.hingeBackgroundColor,"fill-opacity":n.getColorOpacity(a.hingeBackgroundColor),stroke:"none"})),this._drawGaugeLabels(t,e,a),this._drawPointerTicks(t,e,a,o),this._drawPointerArrow(t,e,a,o),r.outerRadius(.07*a.radius),e.push(t.path(r()).attr({fill:a.hinge,"fill-opacity":n.getColorOpacity(a.hinge),stroke:"none"}))},_createPointerSemi:function(t,e,a){var r=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),s=d3.svg.arc().startAngle(i.toRadian(-98)).endAngle(i.toRadian(98)).innerRadius(0).outerRadius(a.radius).toCenter(!1),o=a.gaugeAxis.scale.domain(),l=d3.scale.linear().domain(o).range([i.toRadian(-90),i.toRadian(90)]);e.push(t.path(s()).attr({fill:a.paneBackgroundColor,"fill-opacity":n.getColorOpacity(a.paneBackgroundColor),stroke:"none"})),r.outerRadius(.11*a.radius),e.push(t.path(r()).attr({fill:a.hingeBackgroundColor,"fill-opacity":n.getColorOpacity(a.hingeBackgroundColor),stroke:"none"})),this._drawGaugeLabels(t,e,a),this._drawPointerTicks(t,e,a,l),this._drawPointerArrow(t,e,a,l),r.outerRadius(.055*a.radius),e.push(t.path(r()).attr({fill:a.hinge,"fill-opacity":n.getColorOpacity(a.hinge),stroke:"none"}))},_drawGaugeLabels:function(t,e,i){if(i.seriesLabelContent&&this._drawLabel(t,e,i.seriesLabelContent,i.seriesLabelPos,i.seriesLabelStyle,i.seriesLabelDim,i,i.seriesLabel.useHtml),i.percentageLabelContent&&this._drawLabel(t,e,i.percentageLabelContent,i.percentageLabelPos,i.percentageLabelStyle,i.percentageLabelDim,i,i.percentageLabel.useHtml),i.valueLabelContent){if(i.valueLabelBackground){var a=i.valueLabelBackground;e.push(t.rect(a.x,a.y,a.width,a.height).attr({fill:i.valueLabel.backgroundColor,"fill-opacity":n.getColorOpacity(i.valueLabel.backgroundColor),stroke:"none"}))}for(var r=0,s=i.valueLabelContent.length;s>r;r++){var o=i.valueLabelContent[r];this._drawLabel(t,e,o.labelContent,o.labelPos,o.labelStyle,o.labelDim,i,i.valueLabel.useHtml)}}},_drawLabel:function(t,e,i,a,r,n,s,o){var l=this.gauge.getPlotBounds(),h=s.centerX,c=s.centerY;a={x:a.x+h+l.x,y:a.y+c+l.y},this.labelDivManager.addLabel(i,a,r)},_drawPointerArrow:function(t,e,i,a){var r=this;i.points.forEach(function(s){var o=a(s.valueInDomain),l=r._getArcPoint(.9*i.radius,o),h=r._getArcPoint(.02*i.radius,o+Math.PI/2),c=r._getArcPoint(.02*i.radius,o-Math.PI/2),d=t.path("M"+r._dealWithFloat(l[0])+","+r._dealWithFloat(l[1])+"L"+r._dealWithFloat(h[0])+","+r._dealWithFloat(h[1])+"L"+r._dealWithFloat(c[0])+","+r._dealWithFloat(c[1])+"Z");d.attr({fill:i.needle,"fill-opacity":n.getColorOpacity(i.needle),stroke:"none"}),d.node._data_=s,r.addShapeEventHandler(d),e.push(d)})},_drawPointerTicks:function(t,e,a,r){var n=a.gaugeAxis.getTickData(),s=a.gaugeAxis.componentOption,o=s.labelStyle,l=s.useHtml,h=a.gaugeAxis.getMinorTickData(),c=this,d=.95*a.radius,u=a.bands,g=this.gauge.getPlotBounds(),f=g.x+a.centerX,p=g.y+a.centerY;n.forEach(function(n){var s=r(n.tickValue),h=c._getArcPoint(d,s),g=c._getArcPoint(d-.1*a.radius,s),m=c.gauge._getColorFromBands(n.tickValue,u);e.push(t.path(c._getLinePath(h,g)).attr({stroke:m}));var v,_,y=.84*a.radius,b=n.tickDim,x=Math.atan(b.width/b.height),C=c._getArcPoint(y,s),L=C[0],A=C[1];if(Math.abs(s)<x){var T=b.height/2;v=L+T*L/A,_=A+T}else if(s>=x&&s<=Math.PI-x){var T=b.width/2;v=L-T,_=A-T*A/L}else if(s>=x-Math.PI&&-x>=s){var T=b.width/2;v=L+T,_=A+T*A/L}else{var T=b.height/2;v=L-T*L/A,_=A-T}if(l){var S={x:f+v-n.tickDim.width/2,y:p+_-n.tickDim.height/2};c.labelDivManager.addLabel(n.tickContent,S,o)}else e.push(t.text(v,_,n.tickContent).attr(i.cssNormalization(o)))}),h.forEach(function(i){var n=r(i),s=c._getArcPoint(d,n),o=c._getArcPoint(d-.05*a.radius,n),l=c.gauge._getColorFromBands(i,u);e.push(t.path(c._getLinePath(s,o)).attr({stroke:l}))})},_getArcPoint:function(t,e){return[t*Math.sin(e),-t*Math.cos(e)]},_createSlot:function(t,e,a){var r=d3.svg.arc().startAngle(i.toRadian(-135)).endAngle(i.toRadian(135)).innerRadius(0).outerRadius(a.radius).toCenter(!1).closePath(!1),s=d3.svg.arc().startAngle(i.toRadian(-135)).endAngle(i.toRadian(135)).innerRadius(0).outerRadius(a.radius).toCenter(!1).closePath(!1);e.push(t.path(s()).attr({fill:"none",stroke:a.slotBackgroundColor,"stroke-linecap":"round","stroke-width":.16*a.radius}));var o=a.gaugeAxis.scale.domain(),l=i.toRadian(-135),h=d3.scale.linear().domain(o).range([l,i.toRadian(135)]),c=a.points[0];if(c){var d=c.valueInDomain,u=h(d),g=c.color,f=this._getArcPoint(a.radius,u);Math.abs(u-l)<1e-6?e.push(t.circle(f[0],f[1],.08*a.radius).attr({fill:g,stroke:"none"})):e.push(t.path(r.endAngle(u)()).attr({fill:"none",stroke:g,"stroke-linecap":"round","stroke-width":.16*a.radius})),e.push(t.circle(f[0],f[1],.048*a.radius).attr({fill:a.needle,"fill-opacity":n.getColorOpacity(a.needle),stroke:"none"})),this._drawGaugeLabels(t,e,a)}},_createThermometer:function(t,e,i){i.thermometerLayout==a.HORIZONTAL_LAYOUT?this._createHorizontalThermometer(t,e,i):this._createVerticalThermometer(t,e,i)},_createHorizontalThermometer:function(t,e,i){var a=i.gaugeAxis.scale.domain(),r=i.points[0];if(r){var o=r.valueInDomain,l=r.color,h=i.radius,c=d3.scale.linear().domain(a).range([-h,h]);e.push(t.path(this._getLinePath([-h,0],[h,0])).attr({fill:"none",stroke:i.slotBackgroundColor,"stroke-width":2*s,"stroke-linecap":"round"})),e.push(t.path(this._getLinePath([-h,0],[c(o),0])).attr({fill:"none",stroke:l,"stroke-width":2*s,"stroke-linecap":"round"})),e.push(t.circle(c(o),0,.9*s).attr({fill:i.needle,"fill-opacity":n.getColorOpacity(i.needle),"stroke-width":.6*s,
stroke:n.mixColorWithHSB(l,0,.1,-.1)})),this._drawGaugeLabels(t,e,i),this._drawHorizontalThermometerTicks(t,e,i,c)}},_drawHorizontalThermometerTicks:function(t,e,a,r){var n=a.gaugeAxis.getTickData(),s=a.gaugeAxis.componentOption,o=s.labelStyle,l=s.useHtml,h=a.gaugeAxis.getMinorTickData(),c=this.gauge.getPlotBounds(),d=c.x+a.centerX,u=c.y+a.centerY,g=this;n.forEach(function(a){var n=r(a.tickValue);if(e.push(t.path(g._getLinePath([n,-9],[n,-15])).attr({stroke:s.tickColor,"stroke-width":1})),l){var h={x:d+n-a.tickDim.width/2,y:u-19-a.tickDim.height};g.labelDivManager.addLabel(a.tickContent,h,o)}else e.push(t.text(n,-19-a.tickDim.height/2,a.tickContent).attr(i.cssNormalization(o)))}),h.forEach(function(i){var a=r(i);e.push(t.path(g._getLinePath([a,-9],[a,-13])).attr({stroke:s.minorTickColor,"stroke-width":1}))})},_createVerticalThermometer:function(t,e,i){var a=i.gaugeAxis.scale.domain(),r=i.points[0];if(r){var o=r.color,l=r.valueInDomain,h=i.radius,c=d3.scale.linear().domain(a).range([h,-h]);e.push(t.path(this._getLinePath([0,h],[0,-h])).attr({fill:"none",stroke:i.slotBackgroundColor,"stroke-width":2*s,"stroke-linecap":"round"})),e.push(t.path(this._getLinePath([0,h],[0,c(l)])).attr({fill:"none",stroke:o,"stroke-width":2*s,"stroke-linecap":"round"})),e.push(t.circle(0,c(l),.9*s).attr({fill:i.needle,"fill-opacity":n.getColorOpacity(i.needle),"stroke-width":.6*s,stroke:n.mixColorWithHSB(o,0,.1,-.1)})),this._drawGaugeLabels(t,e,i),this._drawVerticalThermometerTicks(t,e,i,c)}},_drawVerticalThermometerTicks:function(t,e,a,r){var n=a.gaugeAxis.getTickData(),s=a.gaugeAxis.componentOption,o=s.labelStyle,l=s.useHtml,h=a.gaugeAxis.getMinorTickData(),c=this.gauge.getPlotBounds(),d=c.x+a.centerX,u=c.y+a.centerY,g=this;n.forEach(function(a){var n=r(a.tickValue);if(e.push(t.path(g._getLinePath([9,n],[15,n])).attr({stroke:s.tickColor,"stroke-width":1})),l){var h={x:d+19,y:u+n-a.tickDim.height/2};g.labelDivManager.addLabel(a.tickContent,h,o)}else e.push(t.text(19,n,a.tickContent).attr(i.cssNormalization(o)).attr("text-anchor","start"))}),h.forEach(function(i){var a=r(i);e.push(t.path(g._getLinePath([9,a],[13,a])).attr({stroke:s.minorTickColor,"stroke-width":1}))})},_createRing:function(t,e,i){var a=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(i.radius),r=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(i.radius),s=i.points[0];if(s){var o=Math.max(s.percentage,0),l=2*Math.PI*o*(i.clockwise?1:-1),h=s.color,c=.8*i.radius,d=c+2;e.push(t.path(a()).attr({fill:i.paneBackgroundColor,"fill-opacity":n.getColorOpacity(i.paneBackgroundColor),stroke:"none"})),e.push(t.path(r.endAngle(l)()).attr({fill:h,"fill-opacity":n.getColorOpacity(h),stroke:"none"})),e.push(t.path(a.outerRadius(c)()).attr({fill:i.innerPaneBackgroundColor,"fill-opacity":n.getColorOpacity(i.innerPaneBackgroundColor),stroke:"none"})),e.push(t.path(a.outerRadius(d)).attr({fill:"none",stroke:"#000000","stroke-opacity":.05,"stroke-width":4})),this._drawGaugeLabels(t,e,i)}},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()}},i.inherit(e,r),t("./RenderLibrary").register(a.GAUGE_VML,e)}),i("render/LineVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.line=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){this._removeAll();var t=this.line.getVanchartRender().getRenderRoot(),e=this.line.getPlotBounds(),i=e.x,a=e.y;this._bodySet=t.set(),this._lineSet=t.set(),this._markerSet=t.set(),this._labelSet=t.set(),this._bodySet.push(this._lineSet),this._bodySet.push(this._markerSet),this._bodySet.push(this._labelSet),this.markerMap={};var n=this.line.getVisibleChartData(),s=this;n.forEach(function(e){var i=e.dataBands,a=i.length>1;i.forEach(function(e){var i=e.lineData;if(s.line.componentType==r.AREA_CHART&&i.isStack){var n=t.path(i.areaSvg(i.points)).attr({fill:e.fillColor,"fill-opacity":e.fillColorOpacity,stroke:"none"});n.node._data_=i,s.addSeriesEventHandler(n),a&&n.attr("clip-rect",s._getClipRect(e)),s._lineSet.push(n)}})}),n.forEach(function(e){var i=e.dataBands,a=i.length>1;i.forEach(function(e){var i=e.lineData;if(s.line.componentType==r.AREA_CHART&&!i.isStack){var n=t.path(i.areaSvg(i.points)).attr({fill:e.fillColor,"fill-opacity":e.fillColorOpacity,stroke:"none"});n.node._data_=i,s.addSeriesEventHandler(n),a&&n.attr("clip-rect",s._getClipRect(e)),s._lineSet.push(n)}var o=t.path(i.lineSvg(i.points)).attr({fill:"none",stroke:e.color,"stroke-width":i.lineWidth,"clip-rect":s._getClipRect(e)});o.node._data_=i,s.addSeriesEventHandler(o),a&&o.attr("clip-rect",s._getClipRect(e)),s._lineSet.push(o)})}),n.forEach(function(e){e.points.forEach(function(e){var r=e.x+i,n=e.y+a,o=s._createVmlMarker(t,e,[r,n]);s.markerMap[e.className]=o,o.marker&&s._markerSet.push(o.marker),o.strokeMarker&&s._markerSet.push(o.strokeMarker)})}),this._drawDataLabels(t),this._lineSet.transform("t"+e.x+","+e.y)},_getClipRect:function(t){var e=this.line.getPlotBounds();return t.x+e.x+","+(t.y+e.y)+","+t.width+","+t.height},getElementByData:function(t){return this.markerMap&&this.markerMap[t.className]?this.markerMap[t.className]:void 0},makeChosenState:function(t){t&&this._makeVmlMarkerChosenState(t)},cancelChosenState:function(t){t&&this._cancelVmlMarkerChosenState(t)},_drawDataLabels:function(t){var e=this.line.getVisibleChartData(),i=this.line.getPlotBounds(),a=this._labelSet,r=this;e.forEach(function(e){var n=e.points;r._drawVmlDataLabels(t,a,n,i.x,i.y)})},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()}},a.inherit(e,i),t("./RenderLibrary").register(r.LINE_VML,e),e}),i("render/AreaVmlRender",["require","../utils/BaseUtils","../Constants","./LineVmlRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.area=t}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("./LineVmlRender");e.prototype={constructor:e},i.inherit(e,r),t("./RenderLibrary").register(a.AREA_VML,e)}),i("render/BarVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.bar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants");e.prototype={constructor:e,render:function(){this._removeAll();var t=this.bar.getVanchartRender().getRenderRoot(),e=this.bar.getPlotBounds();this._bodySet=t.set();var i=t.set();this._bodySet.push(i),this.shapeMap={};for(var a=this._getPlotClipRect(),r=this.bar.getVisibleChartData(),n=0,s=r.length;s>n;n++)for(var o=r[n].points,l=0,h=o.length;h>l;l++)i.push(this._createBar(o[l],t,a));i.transform("t"+e.x+","+e.y),this._drawDataLabels(t)},_createBar:function(t,e,i){var a=e.rect(t.x,t.y,t.width,t.height).attr({rx:t.borderRadius,ry:t.borderRadius,fill:t.color,"fill-opacity":r.getColorOpacity(t.color),stroke:t.borderColor,"stroke-width":t.borderWidth});return a.node._data_=t,this.addShapeEventHandler(a),this.shapeMap[t.className]=a,a},_getPlotClipRect:function(){var t=this.bar.vanchart.getPlotClipBounds(),e=this.bar.getPlotBounds(),i=e.x+t.x,a=e.y+t.y,r=t.width,n=t.height;return i+","+a+","+r+","+n},_drawDataLabels:function(t){for(var e=this.bar.getVisibleChartData(),i=this.bar.getPlotBounds(),a=0,r=e.length;r>a;a++){var n=t.set();this._bodySet.push(n);var s=e[a].points;this._drawVmlDataLabels(t,n,s,i.x,i.y)}},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()},getElementByData:function(t){return this.shapeMap[t.className]},makeChosenState:function(t){var e=this.getElementByData(t);e&&e.attr({stroke:t.mouseOverColor,"stroke-opacity":.35,fill:t.mouseOverColor?t.mouseOverColor:t.color,"stroke-width":6})},cancelChosenState:function(t){var e=this.getElementByData(t);e.attr({fill:t.color,"fill-opacity":r.getColorOpacity(t.color),stroke:t.borderColor,"stroke-opacity":1,"stroke-width":t.borderWidth})},makeClickedState:function(t){var e=this.getElementByData(t);e&&e.attr("fill",t.clickColor)},cancelClickedState:function(t){var e=this.getElementByData(t);e&&e.attr("fill",t.mouseOverColor)}},a.inherit(e,i),t("./RenderLibrary").register(n.BAR_VML,e)}),i("render/PieVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/ColorUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.pie=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../utils/ColorUtils"),n=t("../Constants"),s=1.1;return e.prototype={constructor:e,render:function(){this._removeAll();var t=this.pie.getVanchartRender().getRenderRoot(),e=this.pie.getPlotBounds();this._bodySet=t.set(),this.dataMap={},t.customAttributes.segment=function(t,e,i,a,n){var s=d3.svg.arc().innerRadius(t).outerRadius(e),o={path:s({startAngle:i,endAngle:a})};return n&&(o.fill=n,o["fill-opacity"]=r.getColorOpacity(n)),o};for(var i=this.pie.getVisibleChartData(),a=0,n=i.length;n>a;a++){var s=i[a],o=t.set();this._bodySet.push(o);for(var l=e.x+s.centerX,h=e.y+s.centerY,c=s.innerRadius,d=s.visiblePoints,u=0,g=d.length;g>u;u++){var f=d[u],p=t.path().attr({segment:[c,f.radius,f.startAngle,f.endAngle],fill:f.color,"fill-opacity":r.getColorOpacity(f.color),stroke:f.borderColor,"stroke-width":f.borderWidth});p.node._data_=f,this.dataMap[f.className]=p,this.addShapeEventHandler(p),o.push(p)}o.transform("t"+l+","+h)}this._renderDataLabels(t)},_renderDataLabels:function(t){for(var e=this.pie.getVisibleChartData(),i=0,a=e.length;a>i;i++){var r=e[i],n=t.set();this._bodySet.push(n);var s=this.pie.getPlotBounds(),o=s.x+r.centerX,l=s.y+r.centerY,h=r.visiblePoints;this._drawVmlDataLabels(t,n,h,o,l)}},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()},makeChosenState:function(t){var e=this.dataMap[t.className];if(e){var i=t.startAngle,a=t.endAngle,r=t.innerRadius,n=t.radius,o=t.mouseOverColor?t.mouseOverColor:t.color;e.attr("segment")&&e.attr({segment:[r,n*s,i,a,o]})}},cancelChosenState:function(t){var e=this.dataMap[t.className];if(e){var i=t.startAngle,a=t.endAngle,r=t.innerRadius,n=t.radius;e.attr("segment")&&e.attr({segment:[r,n,i,a,t.color]})}}},a.inherit(e,i),t("./RenderLibrary").register(n.PIE_VML,e),e}),i("render/BubbleVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.bubble=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){this._removeAll();var t=this.bubble.getVanchartRender().getRenderRoot();this._bodySet=t.set(),this.shapeMap={},this._createBubbles(t)},filterRender:function(){this.render()},_createBubbles:function(t){for(var e=this.bubble.getPlotBounds(),i=this.bubble.getVisibleChartData(),a=t.set(),r=e.x,n=e.y,s=0,o=i.length;o>s;s++){var l=i[s];this._createSeriesLine(t,l,r,n);for(var h=l.points,c=0,d=h.length;d>c;c++){var u=h[c];u.visible&&a.push(this._createPoint(u,t,r,n))}var g=t.set();this._bodySet.push(g),this._drawVmlDataLabels(t,g,h,r,n)}this._bodySet.push(a)},_createSeriesLine:function(t,e,i,a){},_createPoint:function(t,e,i,a){var r=this.bubble.getPlotBounds(),n=r.y+5,s=e.path(d3.svg.arc().outerRadius(t.radius)({startAngle:0,endAngle:2*Math.PI})).attr({"clip-rect":r.x+","+n+","+r.width+","+r.height,fill:t.color,"fill-opacity":t.fillColorOpacity,"stroke-width":0}).transform("t"+(t.posX+i)+","+(t.posY+a));return s.node._data_=t,this.addShapeEventHandler(s),this.shapeMap[t.className]=s,s},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()},getElementByData:function(t){return this.shapeMap[t.className]},makeChosenState:function(t){var e=this.getElementByData(t);e&&e.attr({stroke:t.mouseOverColor,"stroke-opacity":.35,"stroke-width":6,fill:t.mouseOverColor,"fill-opacity":.65})},cancelChosenState:function(t){var e=this.getElementByData(t);e.attr({fill:t.color,"fill-opacity":t.fillColorOpacity,"stroke-width":0})},makeClickedState:function(t){var e=this.getElementByData(t);e&&e.attr("fill",t.clickColor)},cancelClickedState:function(t){var e=this.getElementByData(t);e&&e.attr("fill",t.mouseOverColor)}},a.inherit(e,i),t("./RenderLibrary").register(r.BUBBLE_VML,e),e}),i("render/ScatterVmlRender",["require","./BubbleVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.scatter=t}var i=t("./BubbleVmlRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,_createSeriesLine:function(t,e,i,a){var r=this.scatter.getPlotBounds(),n=t.path(e.lineSvg(e.points)).transform("t"+i+","+a).attr({"clip-rect":r.x+","+r.y+","+r.width+","+r.height,fill:"none",stroke:e.color,"stroke-width":e.lineWidth});n.node._data_=e,this._bodySet.push(n)},_createPoint:function(t,e,i,a){var r=t.posX+i,n=t.posY+a,s=this._createVmlMarker(e,t,[r,n]);return this.shapeMap[t.className]=s,s.marker},getElementByData:function(t){return this.shapeMap&&this.shapeMap[t.className]?this.shapeMap[t.className]:void 0},makeChosenState:function(t){t&&this._makeVmlMarkerChosenState(t)},cancelChosenState:function(t){t&&this._cancelVmlMarkerChosenState(t)},makeClickedState:function(t){},cancelClickedState:function(t){}},a.inherit(e,i),t("./RenderLibrary").register(r.SCATTER_VML,e),e}),i("render/MapVmlRender",["require","../utils/BaseUtils","../Constants","./BaseRender","./RenderLibrary"],function(t){function e(t){r.call(this,t),this.map=t}var i=t("../utils/BaseUtils"),a=t("../Constants"),r=t("./BaseRender");e.prototype={constructor:e},i.inherit(e,r),t("./RenderLibrary").register(a.MAP_VML,e)}),i("render/DrillToolsVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.dTools=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){}},a.inherit(e,i),t("./RenderLibrary").register(r.DRILL_TOOLS_VML,e),e}),i("render/DataSheetVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.dataSheet=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory");e.prototype={constructor:e,render:function(){if(!this.dataSheetSet){var t=this.dataSheet.getVanchartRender().getRenderRoot(),e=this.dataSheet.vanchart.xAxis(),i=e.getCategories(),a=this.dataSheet.getPlotBounds().width/i.length,r=this.dataSheet.getMaxSeriesWidth(),n=this.dataSheet.getCategoryHeight(),s=this.dataSheet.bounds.x,o=this.dataSheet.bounds.y;this.dataSheetSet=t.set(),this.iconSet=t.set(),this._drawLines(t,r,n,a),this._drawCategory(t,r,n,a),this._drawSeries(t,r,n,s,o),this._drawValues(t,r,n,a),this.dataSheetSet.transform("t"+s+","+o)}},_drawLines:function(t,e,i,a){var r=t.set();this.dataSheetSet.push(r);var n=this.dataSheet.componentOption,s=this.dataSheet.bounds.width,o=this.dataSheet.bounds.height,l={fill:"none",stroke:n.borderColor,"stroke-width":n.borderWidth};r.push(t.path("M"+e+",0L"+s+",0L"+s+" "+o+"L0,"+o+"L0,"+i));for(var h=this.dataSheet.categoryNames.length,c=e,d=0;h>d;d++)r.push(t.path(this._getLinePath([c,0],[c,o]))),c+=a;for(var u=this.dataSheet.seriesNames.length,g=i,d=0;u>d;d++)r.push(t.path(this._getLinePath([0,g],[s,g]))),g+=this.dataSheet.getSeriesHeight(d);r.attr(l)},_drawValues:function(t,e,i,r){var n=t.set();this.dataSheetSet.push(n);for(var s=this.dataSheet.values,o=this.dataSheet._valueStyle(),l=a.getTextHeight(o),h=this.dataSheet.getTextPadding(),c=e,d=i,u=0;u<s.length;u++){for(var g=s[u],f=this.dataSheet.getSeriesHeight(u),p=0;p<g.length;p++){var m=g[p];if(m)for(var v=d+this._getStartY(m,o,f)+.5*l,_=0;_<m.length;_++)n.push(t.text(c+r/2+r*p,v+(l+h)*_,m[_]))}d+=f}o=a.cssNormalization(o),o["text-anchor"]="middle",n.attr(o)},_drawCategory:function(t,e,i,r){var n=t.set();this.dataSheetSet.push(n);for(var s=this.dataSheet.categoryNames,o=e,l=this.dataSheet._categoryStyle(),h=a.getTextHeight(l),c=this.dataSheet.getTextPadding(),d=0,u=s.length;u>d;d++)for(var g=s[d],f=this._getStartY(g,l,i)+.5*h,p=0;p<g.length;p++)n.push(t.text(o+r/2+r*d,f+(h+c)*p,g[p]));l=a.cssNormalization(l),l["text-anchor"]="middle",n.attr(l)},_drawSeries:function(t,e,i,r,s){var o=t.set(),l=t.set();this.dataSheetSet.push(o),this.dataSheetSet.push(l);for(var h=this.dataSheet.seriesNames,c=16+(e-16)/2,d=i,u=this.dataSheet._seriesStyle(),g=a.getTextHeight(u),f=this.dataSheet.getTextPadding(),p=0,m=h.length;m>p;p++){for(var v=h[p],_=this.dataSheet.getSeriesHeight(p),y=d+this._getStartY(v,u,_)+.5*g,b=0;b<v.length;b++)o.push(t.text(c,y+(g+f)*b,v[b]));var x=this.dataSheet.getLegendIconTypeWithSeriesIndex(p),C=n.getLegendIconSize(x).height,L=2+r,A=(_-C)/2+d+s;this.iconSet.push(t.path(n.getLegendIconPath(x)).attr({fill:this.dataSheet._getDefaultSeriesColor(v[0]),stroke:"none"}).transform("t"+L+","+A)),d+=_}u=a.cssNormalization(u),u["text-anchor"]="middle",o.attr(u)},_getStartY:function(t,e,i){var r=this.dataSheet.getTextPadding(),n=t.length,s=a.getTextHeight(e)*n+(n-1)*r;return(i-s)/2}},a.inherit(e,i),t("./RenderLibrary").register(r.DATA_SHEET_VML,e)}),i("render/ToolbarVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.toolbar=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.toolbar.componentOption;if(t.enabled)if(this.toolbar.refreshIcon.iconRender.itemSet)this.toFront();else{var e=this.toolbar.getVanchartRender().getRenderRoot();this.toolbar.menuIcon&&this.toolbar.menuIcon.render(e),this.toolbar.refreshIcon.render(e);for(var i=this.toolbar.getToolbarIcons(),a=0,r=i.length;r>a;a++)i[a].render(e)}},hide:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,i=0;e>i;i++)t[i].hideIcon();var a=this.toolbar.getRefreshIcon(),r=4*(e+1),n=4*(e+1)+33*e;a.visible&&a.refreshMove(r,n)},show:function(){for(var t=this.toolbar.getToolbarIcons(),e=t.length,i=0;e>i;i++)t[i].showIcon();var a=this.toolbar.getRefreshIcon(),r=4*(e+1)+33*e,n=4*(e+1);a.visible&&a.refreshMove(r,n)},toFront:function(t){if(t)t.itemSet.toFront();else{this.toolbar.menuIcon&&this.toFront(this.toolbar.menuIcon.iconRender),this.toFront(this.toolbar.refreshIcon.iconRender);for(var e=this.toolbar.getToolbarIcons(),i=0,a=e.length;a>i;i++)this.toFront(e[i].iconRender)}}},a.inherit(e,i),t("./RenderLibrary").register(r.TOOLBAR_VML,e),e}),i("render/LegendVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./LegendIconFactory","./RenderLibrary"],function(t){function e(t){this.legend=t,this.markerSet=[],this.labelSet=[],this.rectSet=[],this.pageButton=[],this.background=[]}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=t("./LegendIconFactory"),s="rgb(67,67,72)",o="rgb(204,204,204)";return e.prototype={constructor:e,render:function(){this.legend.componentOption.initState?(this.background.forEach(function(t){a.toFront(t.node)}),this.pageButton.forEach(function(t){a.toFront(t.node)}),this.rectSet.forEach(function(t){a.toFront(t.node)}),this.markerSet.forEach(function(t){a.toFront(t.node)}),this.labelSet.forEach(function(t){a.toFront(t.node)})):(this.refreshRestore(),this.legend.componentOption.initState=!0)},_render:function(){var t=this.legend.componentOption,e=this.legend.bounds,i=this.legend.getVanchartRender().getRenderRoot();this._renderVmlBackground(this.background,i,t,e),this.legend.isHorizontal()?this._renderHorizontal(i):this._renderVertical(i)},_renderWithPages:function(t){var e=this.legend.getVerticalPages();this._renderWithoutPages(t,e[0],0);var i=this.legend.bounds.x,a=this.legend.bounds.y,r=this.legend.bounds.width,n=this.legend.bounds.height;n-=this.legend.getButtonHeight();var l=40,h=i+(r-l)/2,c=i+(r+l)/2,d=a+n+this.legend.getPadding(),u=i+r/2,g=e.length,f=t.text(u,d,"1/"+g).attr({textAnchor:"middle","font-family":"Verdana","font-size":"14"}),p=0,m=this,v=t.path(this._prePageButtonPath(h,d)).attr({cursor:"pointer",fill:o,stroke:"none"}).click(function(){if(!(0>=p)){p--;var i=p+1;f.attr("text",i+"/"+g),m._clearAllLegendItems(),m._renderWithoutPages(t,e[p],m._preItemCount(p)),_.attr("fill",p==g-1?o:s),v.attr("fill",0>=p?o:s)}}),_=t.path(this._nextPageButtonPath(c,d)).attr({cursor:"pointer",fill:s,stroke:"none"}).click(function(){if(p!=g-1){p++;var i=p+1;f.attr("text",i+"/"+g),m._clearAllLegendItems(),m._renderWithoutPages(t,e[p],m._preItemCount(p)),_.attr("fill",p==g-1?o:s),v.attr("fill",0>=p?o:s)}});this.pageButton.push(f),this.pageButton.push(v),this.pageButton.push(_)},_preItemCount:function(t){for(var e=this.legend.getVerticalPages(),i=0,a=0;t>a;a++)i+=e[a].length;return i},_prePageButtonPath:function(t,e){var i=12,a=t-i/2,r=i/2*Math.sqrt(3)+e,n=t+i/2,s=r;return"M"+t+","+e+"L"+a+","+r+"L"+n+","+s+"Z"},_nextPageButtonPath:function(t,e){var i=12,a=t-i/2,r=e,n=t+i/2,s=e,o=t,l=i/2*Math.sqrt(3)+e;return"M"+a+","+r+"L"+n+","+s+"L"+o+","+l+"Z"},_renderWithoutPages:function(t,e,i){e=e||this.legend.getLegendItems(),i=i||0;for(var r=this.legend.componentOption,s=this.legend.getPadding()+this.legend.verticalAlign,o=this.legend.getGap(),l=this.legend.bounds.x,h=this.legend.bounds.y,c=this.legend.bounds.width,d=a.cssNormalization(r.style),u=0,g=e.length;g>u;u++){var f=e[u],p=n.getLegendIconSize(f.legendIconType),m=a.getTextDimension(f.itemName,r.style,!0),v=Math.max(p.height,m.height)/2,_=i+u,y=this.legend.getPreHeight(i,_),b=this.legend.getVerticalItemHeight(_),x=l+s,C=h+y,L=t.rect(l,C+v-p.height/2,c,b).attr({fill:"white","fill-opacity":0,stroke:"none"}),A=f.visible?f.color:f.hiddenColor,T=f.visible?r.style.color:f.hiddenColor,S=t.path(n.getLegendIconPath(f.legendIconType)).attr("fill",A).attr("stroke-width",0).transform("t"+x+","+(C+v-p.height/2)),R=t.text(x+p.width+o,C+v,f.itemName).attr("text-anchor","start").attr(d).attr("fill",T);this._bindDataAndMarkerEvent(L,f,u),this._bindDataAndMarkerEvent(S,f,u),this._bindDataAndLabelEvent(R,f,u),this.rectSet.push(L),this.markerSet.push(S),this.labelSet.push(R)}},_clearAllLegendItems:function(){this.markerSet.forEach(function(t){t.remove()}),this.labelSet.forEach(function(t){t.remove()}),this.rectSet.forEach(function(t){t.remove()}),this.markerSet=[],this.labelSet=[],this.rectSet=[]},_renderVertical:function(t){this.legend.hasEnoughVerticalSpace()?this._renderWithoutPages(t):this._renderWithPages(t)},_renderHorizontal:function(t){for(var e=this.legend.getPadding(),i=this.legend.getHorizontalGap(),r=this.legend.getGap(),s=this.legend.getHorizontalLineItems(),o=this.legend.componentOption,l=a.cssNormalization(o.style),h=this.legend.getLineHeight(),c=this.legend.bounds.width,d=this.legend.bounds.x,u=this.legend.bounds.y,g=u+e,f=0,p=0,m=s.length;m>p;p++){for(var v=s[p],_=this.legend.getHorizontalItemsWidth(v),y=d+(c-_)/2,b=[y],x=1,C=v.length;C>x;x++){var L=v[x-1],A=n.getLegendIconSize(L.legendIconType),T=a.getTextDimension(L.itemName,o.style,!0);y+=A.width+r+T.width+i,b.push(y)}for(var x=0,C=v.length;C>x;x++){var S=v[x],A=n.getLegendIconSize(S.legendIconType),T=a.getTextDimension(S.itemName,o.style,!0),R=Math.max(A.height,T.height)/2,k=this.legend.getHorizontalItemWidth(x),O=h[p]+e,P=t.rect(b[x],g+R-A.height/2,k,O).attr({fill:"white","fill-opacity":0,stroke:"none"}),E=S.visible?S.color:S.hiddenColor,M=S.visible?o.style.color:S.hiddenColor,w=t.path(n.getLegendIconPath(S.legendIconType)).attr("fill",E).attr("stroke-width",0).transform("t"+b[x]+","+(g+R-A.height/2)),B=t.text(b[x]+A.width+r,g+R,S.itemName).attr("text-anchor","start").attr(l).attr("fill",M);this._bindDataAndMarkerEvent(P,S,f),this._bindDataAndMarkerEvent(w,S,f),this._bindDataAndLabelEvent(B,S,f),f++,this.rectSet.push(P),this.markerSet.push(w),this.labelSet.push(B)}g+=h[p]+e}},_clickHandler:function(t,e){var i=this.legend.vanchart,a=this.legend.componentOption,n=(t.series,t.itemName);i.series.map(function(t){t.type==r.PIE_CHART?(t.points.map(function(t){t.seriesName==n&&(t.visible=!t.visible)}),t.updateVisiblePoints()):t.name===n&&(t.visible=!t.visible)}),i.currentOption.byClassName=!0,i.refreshComponentsAndSeries();var s=t.visible?t.color:t.hiddenColor;this.markerSet[e].attr("fill",s);var o=t.visible?a.style.color:t.hiddenColor;this.labelSet[e].attr("fill",o)},_bindDataAndMarkerEvent:function(t,e,i){t.data("data",e),t.attr("cursor","pointer");var a=this;t.click(function(){a._clickHandler(e,i)})},_bindDataAndLabelEvent:function(t,e,i){var a=this.legend.componentOption;t.data("data",e),t.attr("cursor","pointer"),t.mousemove(function(){this.attr("fill",e.hoverColor)}),t.mouseout(function(){var t=e.visible?a.style.color:e.hiddenColor;this.attr("fill",t)});var r=this;t.click(function(){r._clickHandler(e,i)})},refreshRestore:function(){this._clearAllLegendItems(),this.background.forEach(function(t){t.remove()}),this.pageButton.forEach(function(t){t.remove()}),this.background=[],this.pageButton=[],this._render()}},a.inherit(e,i),t("./RenderLibrary").register(r.LEGEND_VML,e),e}),i("render/AngleAxisVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","../utils/ColorUtils","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.angleAxis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=(t("../utils/BezierEasing"),t("../Constants"));t("../utils/ColorUtils");e.prototype={constructor:e,render:function(){this._removeAll();var t=this.angleAxis.polar.getVanchartRender().getRenderRoot(),e=this.angleAxis.polar.center;this._axisSet=t.set(),this.markerMap={},this._drawAxisLine(t,e),this._drawGridLine(t,e),this._drawTickLabel(t,e)},_removeAll:function(){this._axisSet&&this._axisSet.remove(),this.labelDivManager.clearAllLabels()},_drawAxisLine:function(t,e){var i=this.angleAxis.polar.radiusAxis,r=this.angleAxis,n=r.componentOption.lineWidth,s=r.componentOption.lineColor,o=i.scale.domain()[1];this._axisSet.push(t.path(i._getRadiusGridPath(o)).attr({fill:"none",stroke:s,"stroke-width":n}).transform(a.makeTranslate(e)))},_drawGridLine:function(t,e){var i=this.angleAxis.componentOption,r=i.gridLineWidth,n=i.gridLineColor,s=this.angleAxis.getAngleAxisLineData(),o=this;s.forEach(function(i){o._axisSet.push(t.path(o._getLinePath([0,0],i)).attr({fill:"none",stroke:n,"stroke-width":r}).transform(a.makeTranslate(e)))})},_drawTickLabel:function(t,e){var i=this.angleAxis,r=i.componentOption,n=r.labelStyle,s=r.labelRotation||0,o=r.useHtml,l=i.tickData,h=a.getTextHeight(n);if(o&&!s)for(var c=i.polar.center,d=0,u=l.length;u>d;d++){var g=l[d],f=g.tickPos.x+c[0],p=g.tickPos.y+c[1];this.labelDivManager.addLabel(g.tickContent,{x:f,y:p},n)}else for(var d=0,m=l.length;m>d;d++){var g=l[d],v=g.tickContent;if(a.isArray(v))for(var _=e[0]+g.tickPos.x,y=e[1]+g.tickPos.y+h/2,b=g.tickPos.x<0?g.tickDim.width:0,x=g.tickPos.x<0?"end":"start",f=b+_,C=0,u=v.length;u>C;C++){var p=y+C*(1.3*h),L=v[C];this._axisSet.push(t.text(f,p,L).attr(a.cssNormalization(n)).attr("text-anchor",x).transform("t"+s))}else{var A=e[0]+g.tickPos.x+g.tickDim.width/2,T=e[1]+g.tickPos.y+g.tickDim.height/2;this._axisSet.push(t.text(A,T,v).attr(a.cssNormalization(n)).transform("r"+s))}}}},a.inherit(e,i),t("./RenderLibrary").register(r.ANGLE_AXIS_VML,e)}),i("render/RadiusAxisVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","../utils/ColorUtils","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.radiusAxis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=(t("../utils/BezierEasing"),t("../Constants")),n=(t("../utils/ColorUtils"),2);e.prototype={constructor:e,render:function(){this._removeAll();var t=this.radiusAxis.polar.getVanchartRender().getRenderRoot(),e=this.radiusAxis.polar.center;this._axisSet=t.set(),this.markerMap={},this._drawAxisLine(t,e),this._drawGridLine(t,e),this._drawPlotBands(t,e),this._drawPlotLines(t,e),this._drawTickLabel(t,e)},_removeAll:function(){this._axisSet&&this._axisSet.remove(),this.labelDivManager.clearAllLabels()},_drawAxisLine:function(t,e){var i=this.radiusAxis.componentOption,r=i.lineWidth,n=i.lineColor,s=this.radiusAxis.getPolarInitPoint();this._axisSet.push(t.path(this._getLinePath([0,0],s)).attr({fill:"none",stroke:n,"stroke-width":r}).transform(a.makeTranslate(e)))},_drawGridLine:function(t,e){var i=this.radiusAxis,r=i.componentOption,n=i.getTickData(),s=r.gridLineColor,o=r.gridLineWidth,l=this;n.forEach(function(i){l._axisSet.push(t.path(l.radiusAxis._getRadiusGridPath(i.tickValue)).attr({fill:"none",stroke:s,"stroke-width":o}).transform(a.makeTranslate(e)))})},_drawPlotBands:function(t,e){var i=this.radiusAxis.getRadiusPlotBands(),r=this;i.forEach(function(i){r._axisSet.push(t.path(i.path).attr({fill:i.color,stroke:"none"}).transform(a.makeTranslate(e)))})},_drawPlotLines:function(t,e){var i=this.radiusAxis.getPlotLines(),r=this;i.forEach(function(i){if(r._axisSet.push(t.path(r.radiusAxis._getRadiusGridPath(i.value)).attr({fill:"none",stroke:i.color,"stroke-width":i.width,"stroke-dasharray":i.dataArray}).transform(a.makeTranslate(e))),i.text){var n=a.cssNormalization(i.style);t.text(0,i.baseY,i.text).attr(n).attr("text-anchor",i.textAnchor).transform(a.makeTranslate(e))}})},_drawTickLabel:function(t,e){var i=this.radiusAxis,r=i.scale,s=(i.lastScale||i.scale,i.componentOption),o=i.getTickData();o.length=Math.max(o.length-1,0);var l=s.labelStyle,h=s.labelRotation||0,c=s.useHtml;if(c&&!h)for(var d=0,u=o.length;u>d;d++){var g=o[d],f=-g.tickDim.width-n+e[0],p=-r(g.tickValue)-g.tickDim.height+e[1];this.labelDivManager.addLabel(g.tickContent,{x:f,y:p},l)}else for(var d=0,m=o.length;m>d;d++){var g=o[d],v=a.getTextDimension(g.tickContent,l,c),f=e[0]-n-v.width/2,p=e[1]-r(g.tickValue)-v.height/2;this._axisSet.push(t.text(f,p,g.tickContent).attr(a.cssNormalization(l)).transform("r"+h))}}},a.inherit(e,i),t("./RenderLibrary").register(r.RADIUS_AXIS_VML,e)}),i("render/BaseAxisVmlRender",["require","./BaseRender","../utils/BaseUtils","../utils/BezierEasing","../Constants","../utils/ColorUtils"],function(t){function e(t){i.call(this,t),this.axis=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=(t("../utils/BezierEasing"),t("../Constants")),n=t("../utils/ColorUtils");return e.prototype={constructor:e,render:function(){this._removeAll();var t=this.axis.getVanchartRender().getRenderRoot();this._bodySet=t.set();var e=this.axis.componentOption;this._drawAxisLine(t,e),this._drawArrow(t,e),this._drawAxisTicks(t,e),this._drawMinorTickLine(t,e),this._drawGridLines(t,e),this._drawAxisLabels(t,e),this._drawPlotBands(t),this._drawAxisTitle(t),this._drawPlotLines(t,e)},_removeAll:function(){this._bodySet&&this._bodySet.remove(),this.labelDivManager.clearAllLabels()},_drawAxisLine:function(t,e){var i,r=this.axis._getAxisOriginPoint(),n=e.lineWidth,s=e.lineColor,o=this.axis.bounds.width,l=this.axis.bounds.height;i=this.axis.isHorizontal()?t.path(this._getLinePath([0,0],[o,0])):t.path("M0,0L0,"+l),i.attr({stroke:s,"stroke-width":n}).transform(a.makeTranslate(r)),this._bodySet.push(i)},_drawArrow:function(t,e){if(this.axis.showArrow()){var i,r,n,s,o=this.axis.getPlotBounds(),e=this.axis.componentOption,l=e.lineWidth,h=e.lineColor,c=(a.lineSubPixelOpt(0,l),this.axis._getAxisOriginPoint());this.axis.isHorizontal()?(i=t.path(this._getLinePath([o.width,0],[o.width+6,0])),r=t.path("M2,2 L10,6 L2,10 L6,6 L2,2"),n=o.width,s=-6):(i=t.path(this._getLinePath([0,-6],[0,0])),r=t.path("M2,-2 L6,-10 L10,-2 L6,-6 L2,-2"),n=-6,s=0),i.attr({fill:"none",stroke:h,"stroke-width":l}).transform(a.makeTranslate(c)),r.attr({fill:h,stroke:"none"}).transform(a.makeTranslate([c.x+n,c.y+s])),this._bodySet.push(i),this._bodySet.push(r)}},_drawMinorTickLine:function(t,e){var i=e.enableMinorTick?e.minorTickLength:0,n=e.minorTickWidth,s=e.minorTickColor,o=this.axis.getMinorTickData(),l=this.axis._getAxisOriginPoint(),h=this.axis.type==r.CATEGORY_AXIS_COMPONENT,c=this.axis.scale,d=this;i&&o.forEach(function(e){d._bodySet.push(t.path(d._getTickPath(h?e:c(e),i)).attr({stroke:s,"stroke-width":n
}).transform(a.makeTranslate(l)))})},_drawAxisTicks:function(t,e){var i=this.axis.getMainTickData(),r=this,n=this.axis._getAxisOriginPoint();if(e.enableTick){var s=e.tickColor,o=e.tickWidth,l=e.tickLength;i.forEach(function(e){r._bodySet.push(t.path(r._getTickPath(e.tickPos,l)).attr({stroke:s,"stroke-width":o}).transform(a.makeTranslate(n)))})}},_getTickPath:function(t,e){var i=this.axis.getPosition();switch(i){case r.TOP:return this._getLinePath([t,0],[t,-e]);case r.BOTTOM:return this._getLinePath([t,0],[t,e]);case r.LEFT:return this._getLinePath([0,t],[-e,t]);case r.RIGHT:return this._getLinePath([0,t],[e,t])}},_getGridLinePath:function(t,e){return this.axis.isHorizontal()?this._getLinePath([t,0],[t,e]):this._getLinePath([0,t],[e,t])},_drawGridLines:function(t,e){var i=e.gridLineColor,r=e.gridLineWidth,n=this.axis.getPlotBounds(),s=this.axis.isHorizontal()?n.height:n.width,o=this.axis.getTickData(),l=this;o.forEach(function(e){l._bodySet.push(t.path(l._getGridLinePath(e.tickPos,s)).attr({stroke:i,"stroke-width":r}).transform(a.makeTranslate(n)))})},_drawAxisLabels:function(t){this.labelDivManager.clearAllLabels();var e=this.labelDivManager,i=this.axis.componentOption,n=this.axis._getAxisOriginPoint(),s=n.x,o=n.y,l=this.axis.getPosition(),h=this.axis.isHorizontal(),c=this.axis.getTickScale(),d=this.axis.getTickData(),u=(c.rangeBand?0:i.tickLength)+i.tickPadding,g=i.labelStyle,f=a.getTextHeight(g);if(c.rangeBand){var p=c.copy(),m=p.rangeBand();c=function(t){return p(t)+m/2}}var v=this,_="top"===l||"right"===l?-1:1;d.forEach(function(n){var d,p,m=a.getTextDimension(n.tickContent,g,!1);if(h?(p=l==r.TOP?-(u+f):u,d=c(n.tickValue)-m.width/2):(d=l==r.LEFT?-(u+m.width):u,p=c(n.tickValue)-f/2),i.useHtml)e.addLabel(n.tickContent,{x:d+s,y:p+o},g);else{var y=i.labelRotation||0,b=s+d+m.width/2,x=o+p+f/2;if(Math.abs(y)){var C=Math.abs(m.height-n.tickDim.height),L=Math.abs(m.width-n.tickDim.width);l===r.TOP||l===r.BOTTOM?x+=_*C/2:b+=_*L/2}var A=t.text(b,x,n.tickContent).attr(a.cssNormalization(g)).transform("r"+y);v._bodySet.push(A)}})},_drawAxisTitle:function(t){this.axis.isHorizontal()?this._drawHorizontalTitle(t):this._drawVerticalTitle(t)},_drawHorizontalTitle:function(t){var e=this.axis.getPosition(),i=this.axis.getAxisTitleBounds(),n=i.x,s=i.y+(e==r.TOP?i.height:0),o=this.axis.componentOption;if(o.title){var l=o.title,h=a.cssNormalization(l.style),c=l.rotation||0,d=a.getTextDimension(l.text,l.style,l.useHtml),u=a.getTextDimensionWithRotation(l.text,l.style,l.useHtml,c),g=e==r.BOTTOM?1:-1,f=n,p=s+g*d.height/2,m=l.align||"left";switch(m){case"left":f+=d.width/2;break;case"center":f+=i.width/2;break;case"right":f+=i.width-d.width/2}var v=Math.abs(u.height-d.height)/2;this._bodySet.push(t.text(f,p+g*v,l.text).attr(h).transform("r"+c))}},_drawVerticalTitle:function(t){var e=this.axis.getPosition(),i=this.axis.getAxisTitleBounds(),n=i.x+(e==r.LEFT?i.width:0),s=i.y,o=this.axis.componentOption,l=e==r.LEFT?1:-1;if(o.title){var h=o.title,c=a.cssNormalization(h.style),d=h.rotation||0,u=a.getTextDimension(h.text,h.style,h.useHtml),g=a.getTextDimensionWithRotation(h.text,h.style,h.useHtml,d),f=n-u.width/2*l,p=s,m=h.align||"top";switch(m){case"top":p+=u.width/2;break;case"center":p+=i.height/2;break;case"bottom":p+=i.height-u.width/2}var v=Math.abs(g.width-u.width)/2;this._bodySet.push(t.text(f+v*l,p,h.text).attr(c).transform("r"+d))}},_drawPlotLines:function(t){var e=this.axis._preCalculatePlotLines(),i=this.axis.getPlotBounds(),r=this;e.forEach(function(e){r._bodySet.push(t.path(r._getLinePath([e.startPos.x,e.startPos.y],[e.endPos.x,e.endPos.y])).attr({stroke:e.color,"stroke-width":e.width,"stroke-dasharray":e.dataArray}).transform(a.makeTranslate(i)));var n=e.text,s=a.cssNormalization(e.style);n&&r._bodySet.push(t.text(e.textX+e.textDim.width/2,e.textY+e.textDim.height/2,n).attr(s).transform(a.makeTranslate(i)))})},_drawPlotBands:function(t){var e=this.axis._preCalculatePlotBands(),i=this.axis.getPlotBounds(),r=this;e.forEach(function(e){r._bodySet.push(t.rect(e.x,e.y,e.width,e.height).attr({stroke:"none",fill:e.color,"fill-opacity":n.getColorOpacity(e.color)}).transform(a.makeTranslate(i)))})}},a.inherit(e,i),e}),i("render/DateAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.dateAxis=t}var i=t("./BaseAxisVmlRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.DATE_AXIS_VML,e)}),i("render/ValueAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.valueAxis=t}var i=t("./BaseAxisVmlRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.VALUE_AXIS_VML,e)}),i("render/CategoryAxisVmlRender",["require","./BaseAxisVmlRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.categoryAxis=t}var i=t("./BaseAxisVmlRender"),a=t("../utils/BaseUtils"),r=t("../Constants");a.inherit(e,i),t("./RenderLibrary").register(r.CATEGORY_AXIS_VML,e)}),i("render/TitleVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.title=t,this.textEndX=0,this.usedWidth=0,this.textBounds={}}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){if(this.titleSet)return this.background&&this.background.toFront(),void this.titleSet.toFront();var t=this.title.componentOption,e=this.title.bounds,i=this.title.vanchart.getToolbarWidth();i=this.title.isFloat?0:i;var a=this.title.getVanchartRender().getRenderRoot();t.backgroundColor&&(this.background=a.rect(e.x,e.y,e.width,e.height).attr({rx:t.borderRadius,ry:t.borderRadius,fill:this._getRaphaelFill(t.backgroundColor),"stroke-width":0}).attr("fill-opacity",this._getFillOpacity(t.backgroundColor))),this.titleSet=a.set();var r=this.title.textDim,n=this.title.getPadding(),s={x:e.x+n,y:e.y+n,width:r.width,height:r.height};this.title.isFloat||"center"!==t.align||(s.x=e.x+e.width/2-r.width/2),this.textBounds=s,this._drawTitle(t,s)},changeTextRightSpace:function(t){if(!this.title.isFloat)switch(this.title.componentOption.align){case"center":var e=this.title.bounds,i=this.title.textDim,a=e.x+e.width/2-i.width/2,r=this.textBounds,n=this.title.getPadding(),s=this.title.vanchart.getToolbarWidth(),o=this.title.initBarWidth,l=e.width/2-i.width/2-o-n,h=s-o,c=r.x,d=r.width;0>=l?(c=e.x,d=e.width-s):h>l?c=a-(h-l):(c=a,d=i.width),this.labelDivManager.changeLabelDim({left:c-r.x,width:d-r.width}),this.textBounds.x=c,this.textBounds.width=d;break;default:this.labelDivManager.changeLabelDim({width:-t})}},translateX:function(t){this.labelDivManager.translateLabelsHorizontal(t);var e=this.usedWidth-this.textEndX;e>Math.abs(t)||this.titleSet.forEach(function(e){var i=e.matrix;i.translate(t,0),e.transform(i.toTransformString())})},_removeAll:function(){this.titleSet&&this.titleSet.remove(),this.labelDivManager.clearAllLabels()}},a.inherit(e,i),t("./RenderLibrary").register(r.TITLE_VML,e),e}),i("render/RangeLegendVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){i.call(this,t),this.rangeLegend=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants"),n=10,s=15,o=100,l=15,h=10,c=5,d=25,u=2,g="min-bar-class-name",f="max-bar-class-name";return e.prototype={constructor:e,render:function(){this._removeAll();var t=this.rangeLegend.componentOption,e=this.rangeLegend.bounds;this.isHorizontal=this.rangeLegend.isHorizontal();var i=this.rangeLegend.getVanchartRender().getRenderRoot();this.background=[],this._bodySet=i.set(),this._renderVmlBackground(this.background,i,t,e),this.rangeLegend.isIntervalLegend?this._renderInterval(i,e):this._renderGradient(i,e)},_removeAll:function(){this.background&&this.background.forEach(function(t){t.remove()}),this._bodySet&&this._bodySet.remove()},_renderGradient:function(t,e){this.minPos=0,this.maxPos=o;var i=this.rangeLegend.componentOption.style,r=this.isHorizontal?e.x:e.y;r+=((this.isHorizontal?e.width:e.height)-o)/2,this._bodySet.push(t.rect(this.isHorizontal?r:e.x+n,this.isHorizontal?e.y+n:r,this.isHorizontal?o:s,this.isHorizontal?s:o).attr("class","legend-gradient-background").attr("rx",2).attr("ry",2).attr("fill","#eaeaea").attr("stroke-width",0));var l=t.rect(this.isHorizontal?r:e.x+n,this.isHorizontal?e.y+n:r,this.isHorizontal?o:s,this.isHorizontal?s:o).attr("class","legend-gradient-bar").attr("rx",2).attr("ry",2).attr("fill",this._getGradientFillColor()).attr("stroke-width",0).attr("clip-rect",this._getGradientClipRect(r)),h=t.path(this.isHorizontal?this.rangeLegend.getLeftBarPath():this.rangeLegend.getTopBarPath()).attr("class",g).attr("fill",this.rangeLegend.colorScale(this.minPos/o)).transform("t"+this._getMinBarPosX(this.isHorizontal,e,this.minPos,this.maxPos,r)+","+this._getMinBarPosY(this.isHorizontal,e,this.minPos,this.maxPos,r)).attr("cursor","pointer").attr("stroke-width",0),c=this.rangeLegend.getGradientLabelContent(this.isHorizontal?this.minPos:this.maxPos),d=a.getTextDimension(c,i,!0),u=t.text(this._getMinLabelCenterX(this.isHorizontal,d,e,r),this._getMinLabelCenterY(this.isHorizontal,d,e,r),c).attr(a.cssNormalization(i)),p=this;h.mousedown(function(t){p._mindraging=!0,p._mosX=t.screenX,p._mosY=t.screenY}),h.mouseup(function(t){p._mindraging=!1}),h.mouseout(function(t){p._mindraging=!1}),h.mousemove(function(t){if(p._mindraging){var n=0;if(p.isHorizontal){var s=p.minPos;p.minPos+=Math.round(t.screenX-p._mosX),p.minPos=Math.max(0,p.minPos),p.minPos=Math.min(p.minPos,p.maxPos),n=p.minPos-s}else{var s=p.maxPos;p.maxPos+=Math.round(t.screenY-p._mosY),p.maxPos=Math.min(o,p.maxPos),p.maxPos=Math.max(p.maxPos,p.minPos),n=p.maxPos-s}if(p._mosX=t.screenX,p._mosY=t.screenY,Math.abs(n)>=1){h.attr("fill",p.rangeLegend.colorScale((p.isHorizontal?p.minPos:o-p.maxPos)/o)).transform("t"+p._getMinBarPosX(p.isHorizontal,e,p.minPos,p.maxPos,r)+","+p._getMinBarPosY(p.isHorizontal,e,p.minPos,p.maxPos,r));var c=p.rangeLegend.getGradientLabelContent(p.isHorizontal?p.minPos:p.maxPos),d=a.getTextDimension(c,i,!0);u.attr("text",c).attr("x",p._getMinLabelCenterX(p.isHorizontal,d,e,r)).attr("y",p._getMinLabelCenterY(p.isHorizontal,d,e,r)),l.attr("clip-rect",p._getGradientClipRect(r)),p.rangeLegend.refreshPoints(p.minPos,p.maxPos)}}});var m=t.path(this.isHorizontal?this.rangeLegend.getRightBarPath():this.rangeLegend.getBottomBarPath()).attr("class",f).attr("fill",this.rangeLegend.colorScale(this.maxPos/o)).transform("t"+this._getMaxBarPosX(this.isHorizontal,e,this.minPos,this.maxPos,r)+","+this._getMaxBarPosY(this.isHorizontal,e,this.minPos,this.maxPos,r)).attr("cursor","pointer").attr("stroke-width",0),v=this.rangeLegend.getGradientLabelContent(this.isHorizontal?this.maxPos:this.minPos),_=a.getTextDimension(v,i,!0),y=t.text(this._getMaxLabelCenterX(this.isHorizontal,_,e,r),this._getMaxLabelCenterY(this.isHorizontal,_,e,r),v).attr(a.cssNormalization(i));m.mousedown(function(){p._maxdraging=!0,p._mosX=event.screenX,p._mosY=event.screenY}),m.mouseup(function(){p._maxdraging=!1}),m.mouseout(function(){p._maxdraging=!1}),m.mousemove(function(t){if(p._maxdraging){var n=0;if(p.isHorizontal){var s=p.maxPos;p.maxPos+=Math.round(t.screenX-p._mosX),p.maxPos=Math.min(o,p.maxPos),p.maxPos=Math.max(p.maxPos,p.minPos),n=p.maxPos-s}else{var s=p.minPos;p.minPos+=Math.round(t.screenY-p._mosY),p.minPos=Math.max(0,p.minPos),p.minPos=Math.min(p.minPos,p.maxPos),n=p.minPos-s}if(p._mosX=t.screenX,p._mosY=t.screenY,Math.abs(n)>=1){m.attr("fill",p.rangeLegend.colorScale((p.isHorizontal?p.maxPos:o-p.minPos)/o)).transform("t"+p._getMaxBarPosX(p.isHorizontal,e,p.minPos,p.maxPos,r)+","+p._getMaxBarPosY(p.isHorizontal,e,p.minPos,p.maxPos,r));var h=p.rangeLegend.getGradientLabelContent(p.isHorizontal?p.maxPos:p.minPos),c=a.getTextDimension(h,i,!0);y.attr("text",h).attr("x",p._getMaxLabelCenterX(p.isHorizontal,c,e,r)).attr("y",p._getMaxLabelCenterY(p.isHorizontal,c,e,r)),l.attr("clip-rect",p._getGradientClipRect(r)),p.rangeLegend.refreshPoints(p.minPos,p.maxPos)}}}),this._bodySet.push([l,h,u,m,y])},_getMinBarPosX:function(t,e,i,a,r){return t?r-h+i:e.x+n+s},_getMinBarPosY:function(t,e,i,a,r){return t?e.y+n+s:r+a},_getMaxBarPosX:function(t,e,i,a,r){return t?r+a:e.x+n+s},_getMaxBarPosY:function(t,e,i,a,r){return t?e.y+n+s:r-h+i},_getMinLabelCenterX:function(t,e,i,a){return t?a+this.minPos-h/2-e.width/2:i.x+n+s+l+c+e.width/2},_getMinLabelCenterY:function(t,e,i,a){return t?i.y+n+s+l+c+e.height/2:a+this.maxPos+h/2},_getMaxLabelCenterX:function(t,e,i,a){return t?a+this.maxPos+h/2+e.width/2:i.x+n+s+l+c+e.width/2},_getMaxLabelCenterY:function(t,e,i,a){return t?i.y+n+s+l+c+e.height/2:a+this.minPos-h/2},_getGradientClipRect:function(t){var e=this.rangeLegend.bounds,i=e.x+n,a=t+this.minPos,r=s,o=this.maxPos-this.minPos;return this.isHorizontal&&(i=t+this.minPos,a=e.y+n,r=this.maxPos-this.minPos,o=s),i+","+a+","+r+","+o},_getGradientFillColor:function(){var t=this.isHorizontal?0:90,e=this.rangeLegend.getValueAndColors();return e.forEach(function(e){var i=e[0],a=e[1];t+="-"+a+":"+100*i}),t},_renderInterval:function(t,e){var i=this.rangeLegend.items,a=this.rangeLegend.componentOption.style;this.isHorizontal?this._renderHorizontalInterval(t,e,i,a):this._renderVerticalInterval(t,e,i,a)},_renderHorizontalInterval:function(t,e,i,r){for(var o=this.rangeLegend.items.length,l=e.x+(e.width-o*d-(o-1)*u)/2,h=0;o>h;h++){var g=i[h],f=g.label,p=a.getTextDimension(f,r),m=e.y+n,v=m+p.height+c,_=v+s+c,y=t.rect(l,v,d,s).attr({fill:g.visible?g.color:g.hiddenColor,"fill-opacity":1,stroke:"none"}),b=t.text(l+d/2,h%2==0?m+p.height/2:_+p.height/2,f).attr("text-anchor","middle").attr(a.cssNormalization(r));this._bindMouseEvent(g,y,b,r),this._bodySet.push([y,b]),l+=d+u}},_renderVerticalInterval:function(t,e,i,r){for(var o=e.x+n,l=e.x+n+s+c,h=e.y+(this.rangeLegend.bounds.height-this.rangeLegend.items.length*d-(this.rangeLegend.items.length-1)*u)/2,g=0,f=i.length;f>g;g++){var p=i[g],m=p.label,v=a.getTextDimension(m,r),_=t.rect(o,h,s,d).attr({fill:p.visible?p.color:p.hiddenColor,"fill-opacity":1,stroke:"none"}),y=t.text(l+v.width/2,h+d/2,m).attr("text-anchor","middle").attr(a.cssNormalization(r));this._bindMouseEvent(p,_,y,r),this._bodySet.push([_,y]),h+=d+u}},_bindMouseEvent:function(t,e,i,a){e.attr("cursor","pointer"),i.attr("cursor","pointer"),i.mousemove(function(){i.attr("fill",t.hoverColor)}),i.mouseout(function(){var e=t.visible?a.color:t.hiddenColor;i.attr("fill",e)});var r=this;e.click(function(){r._clickHandler(t,e,i,a.color)}),i.click(function(){r._clickHandler(t,e,i,a.color)})},_clickHandler:function(t,e,i,a){t.visible=!t.visible;var r=t.visible?t.color:t.hiddenColor,n=t.visible?a:t.hiddenColor;i.attr("fill",n),e.attr("fill",r),t.points.forEach(function(e){e.visible=t.visible}),this.rangeLegend.vanchart.renderOnlyCharts()}},a.inherit(e,i),t("./RenderLibrary").register(r.RANGE_LEGEND_VML,e),e}),i("render/VanChartVmlRender",["require","./BaseRender","../utils/BaseUtils","../Constants","./RenderLibrary"],function(t){function e(t){this.vanchart=t}var i=t("./BaseRender"),a=t("../utils/BaseUtils"),r=t("../Constants");return e.prototype={constructor:e,render:function(){var t=this.vanchart.getParentDom(),e=this.vanchart.chartWidth(),i=this.vanchart.chartHeight();this.paper||(this.paper=Raphael(t,e,i));var a=this.vanchart.getChartRenders(),n=this.vanchart.getFixedComponentRenders(),s=this.vanchart.getFloatComponentRenders();this._renderBackground(),n.forEach(function(t){t.render()}),a.forEach(function(t){t.render()}),s.forEach(function(t){t.render()}),this.vanchart.getComponent(r.TOOLBAR_COMPONENT)&&this.vanchart.getComponent(r.TOOLBAR_COMPONENT).render.toFront(),this._renderTrendLine()},_renderBackground:function(){this.backgroundSet&&this.backgroundSet.remove(),this.backgroundSet=this.paper.set();var t=a.makeBounds(0,0,this.vanchart.chartWidth()-5,this.vanchart.chartHeight()-5),e=this.vanchart.getChartBackgroundOption();t=a.rectSubPixelOpt(t.x,t.y,t.width-e.borderWidth,t.height-e.borderWidth,e.borderWidth);var i=this.vanchart.getPlotBounds(),r=this.vanchart.getPlotBackgroundOption();this._renderBackgroundWithBounds(e,t),this._renderBackgroundWithBounds(r,i)},_renderTrendLine:function(){this.trendLineSet&&this.trendLineSet.remove(),this.trendLineSet=this.paper.set();var t=this.vanchart.getTrendLineOption(),e=this.vanchart.getPlotBounds(),i=this;t.forEach(function(t){i.trendLineSet.push(i.paper.path(i._getLinePath([t.x1,t.y1],[t.x2,t.y2])).attr({stroke:t.trendLine.color,"stroke-width":t.trendLine.width,"stroke-dasharray":t.trendLine.dashStyle==r.DASH_TYPE?"-":""}))}),this.trendLineSet.transform("t"+e.x+","+e.y)},_renderBackgroundWithBounds:function(t,e){var i=this.vanchart.getParentDom();if(t.chartShadow)i.style.boxShadow="1px 1px 2px rgba(0,0,0,0.1)";else if(t.plotShadow){for(var r=[5,3,1],n=[.05,.1,.15],s=a.rectSubPixelOpt(e.x,e.y,e.width,e.height,1),o=0;3>o;o++){var l=this.paper.rect(s.x,s.y,s.width,s.height).attr({fill:"none",stroke:"rgb(0,0,0)","stroke-opacity":n[o],"stroke-width":r[o],rx:t.borderRadius,ry:t.borderRadius}).transform("t1,1");this.backgroundSet.push(l)}var l=this.paper.rect(s.x,s.y,s.width,s.height).attr({fill:"white",stroke:"none",rx:t.borderRadius,ry:t.borderRadius});this.backgroundSet.push(l)}var h=t.borderWidth;e=a.rectSubPixelOpt(e.x+h/2,e.y+h/2,e.width-h,e.height-h,t.borderWidth);var l=this.paper.rect(e.x,e.y,e.width,e.height).attr({fill:this._getRaphaelFill(t.color),stroke:t.borderColor,"stroke-width":t.borderWidth,rx:t.borderRadius,ry:t.borderRadius}).attr("fill-opacity",this._getFillOpacity(t.color));if(this.backgroundSet.push(l),t.image){var c=this.paper.image(t.image,e.x,e.y,e.width,e.height);this.backgroundSet.push(c)}},getRenderRoot:function(){return this.paper},remove:function(){this.paper.remove();var t=this.vanchart.getChartRenders(),e=this.vanchart.getComponentRenders();t.forEach(function(t){t.removeDivLabels()}),e.forEach(function(t){t.removeDivLabels()})}},a.inherit(e,i),t("./RenderLibrary").register(r.VANCHART_VML,e),e}),i("IERequire",["require","./chart/Pie","./chart/Bar","./chart/Line","./chart/Area","./chart/Gauge","./chart/Radar","./chart/Bubble","./chart/Scatter","./chart/Map","./render/RadarVmlRender","./render/GaugeVmlRender","./render/AreaVmlRender","./render/LineVmlRender","./render/BarVmlRender","./render/PieVmlRender","./render/BubbleVmlRender","./render/ScatterVmlRender","./render/MapVmlRender","./render/DrillToolsVmlRender","./render/DataSheetVmlRender","./render/ToolbarVmlRender","./render/LegendVmlRender","./render/AngleAxisVmlRender","./render/RadiusAxisVmlRender","./render/DateAxisVmlRender","./render/ValueAxisVmlRender","./render/CategoryAxisVmlRender","./render/TitleVmlRender","./render/RangeLegendVmlRender","./VanCharts","./render/VanChartVmlRender"],function(t){t("./chart/Pie"),t("./chart/Bar"),t("./chart/Line"),t("./chart/Area"),t("./chart/Gauge"),t("./chart/Radar"),t("./chart/Bubble"),t("./chart/Scatter"),t("./chart/Map"),t("./render/RadarVmlRender"),t("./render/GaugeVmlRender"),t("./render/AreaVmlRender"),t("./render/LineVmlRender"),t("./render/BarVmlRender"),t("./render/PieVmlRender"),t("./render/BubbleVmlRender"),t("./render/ScatterVmlRender"),t("./render/MapVmlRender"),t("./render/DrillToolsVmlRender"),t("./render/DataSheetVmlRender"),t("./render/ToolbarVmlRender"),t("./render/LegendVmlRender"),t("./render/AngleAxisVmlRender"),t("./render/RadiusAxisVmlRender"),t("./render/DateAxisVmlRender"),t("./render/ValueAxisVmlRender"),t("./render/CategoryAxisVmlRender"),t("./render/TitleVmlRender"),t("./render/RangeLegendVmlRender"),t("./VanCharts"),t("./render/VanChartVmlRender")});var a=e("VanCharts");return e("chart/Pie"),e("chart/Bar"),e("chart/Line"),e("chart/Area"),e("chart/Gauge"),e("chart/Radar"),e("chart/Scatter"),e("chart/Bubble"),e("render/VanChartSvgRender"),e("render/VanChartVmlRender"),e("render/TitleSvgRender"),e("render/CategoryAxisSvgRender"),e("render/ValueAxisSvgRender"),e("render/DateAxisSvgRender"),e("render/LegendSvgRender"),e("render/ToolbarSvgRender"),e("render/DataSheetSvgRender"),e("render/RangeLegendSvgRender"),e("render/PieSvgRender"),e("render/BarSvgRender"),e("render/LineSvgRender"),e("render/AreaSvgRender"),e("render/GaugeSvgRender"),e("render/RadarSvgRender"),e("render/ScatterSvgRender"),e("render/BubbleSvgRender"),e("render/RadarVmlRender"),e("render/GaugeVmlRender"),e("render/AreaVmlRender"),e("render/LineVmlRender"),e("render/BarVmlRender"),e("render/PieVmlRender"),e("render/ScatterVmlRender"),e("render/BubbleVmlRender"),e("render/DataSheetVmlRender"),e("render/ToolbarVmlRender"),e("render/LegendVmlRender"),e("render/DateAxisVmlRender"),e("render/ValueAxisVmlRender"),e("render/CategoryAxisVmlRender"),e("render/TitleVmlRender"),e("render/RangeLegendVmlRender"),a});
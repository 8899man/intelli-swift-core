<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--正常注入-->
    <bean id="localSegmentProvider" class="com.fr.swift.manager.LocalSegmentProvider"/>
    <bean id="indexingSegmentManager" class="com.fr.swift.manager.IndexingSegmentManager"/>
    <bean class="com.fr.swift.manager.LocalDataOperatorProvider"/>
    <bean id="swiftProperty" class="com.fr.swift.property.SwiftProperty"/>
    <bean id="serviceRegistry" class="com.fr.swift.netty.rpc.registry.impl.SimpleServiceRegistry"/>
    <bean id="serviceDiscovery" class="com.fr.swift.netty.rpc.registry.impl.SimpleServiceDiscovery"/>
    <bean id="rpcServer" class="com.fr.swift.netty.rpc.server.RpcServer"/>
    <bean id="swiftQuerySessionFactory" class="com.fr.swift.query.session.factory.SessionFactoryImpl"/>
    <bean id="redisClient" class="com.fr.swift.redis.RedisClient"/>
    <bean id="queryIndexRunner" class="com.fr.swift.service.QueryIndexService"/>

    <bean id="inserter" class="com.fr.swift.segment.operator.insert.SwiftInserter" scope="prototype"/>
    <bean id="incrementer" class="com.fr.swift.segment.Incrementer" scope="prototype"/>
    <bean id="decrementer" class="com.fr.swift.segment.Decrementer" scope="prototype"/>

    <bean id="columnIndexer" class="com.fr.swift.generate.ColumnIndexer" scope="prototype"/>
    <bean id="columnDictMerger" class="com.fr.swift.generate.ColumnDictMerger" scope="prototype"/>

    <bean id="realtimeSegment" class="com.fr.swift.segment.RealTimeSegmentImpl" scope="prototype"/>
    <bean id="historySegment" class="com.fr.swift.segment.HistorySegmentImpl" scope="prototype"/>

    <bean id="serviceTaskExecutor" class="com.fr.swift.task.service.SwiftServiceTaskExecutor">
        <constructor-arg index="0" value="swiftServiceTaskExecutor"/>
        <constructor-arg index="1" value="10"/>
    </bean>

    <!--配置不同的实现class注入-->
    <!--<bean id="segmentBackup" class="com.fr.swift.segment.backup.RedisSegmentBackup" scope="prototype"/>-->
    <!--<bean id="segmentRecovery" class="com.fr.swift.segment.recover.RedisSegmentRecovery"/>-->
    <!--<bean id="transactionManager" class="com.fr.swift.transaction.RedisTransactionManager" scope="prototype"/>-->
    <!--<bean id="allShowIndexBackup" class="com.fr.swift.segment.backup.RedisAllShowIndexBackup" scope="prototype"/>-->
    <bean id="segmentBackup" class="com.fr.swift.segment.backup.FileSegmentBackup" scope="prototype"/>
    <bean id="segmentRecovery" class="com.fr.swift.segment.recover.FileSegmentRecovery"/>
    <bean id="transactionManager" class="com.fr.swift.transaction.FileTransactionManager" scope="prototype"/>
    <bean id="allShowIndexBackup" class="com.fr.swift.segment.backup.FileAllshowIndexBackup" scope="prototype"/>
</beans>

<<<<<<< HEAD
package com.fr.bi.cal.analyze.cal.multithread;import com.finebi.cube.api.ICubeDataLoader;import com.finebi.cube.api.ICubeTableService;import com.fr.bi.cal.analyze.cal.index.loader.TargetAndKey;import com.fr.bi.cal.analyze.cal.result.Node;import com.fr.bi.stable.gvi.GroupValueIndex;/** * Created by Hiram on 2015/5/14. */public class SummaryCall implements BISingleThreadCal {    protected Node node;    protected TargetAndKey targetAndKey;    protected GroupValueIndex gvi;    private ICubeTableService ti;    private ICubeDataLoader loader;    public SummaryCall(ICubeTableService ti, Node node, TargetAndKey targetAndKey, GroupValueIndex gvi, ICubeDataLoader loader) {        this.ti = ti;        this.node = node;        this.targetAndKey = targetAndKey;        this.gvi = gvi;        this.loader = loader;    }    @Override    public void cal() {        if (node.getSummaryValue(targetAndKey.getTargetGettingKey()) == null){            targetAndKey.getCalculator().calculateFilterIndex(loader);            targetAndKey.getCalculator().doCalculator(ti, node, gvi, targetAndKey.getTargetGettingKey());        }    }}
=======
package com.fr.bi.cal.analyze.cal.multithread;import com.fr.bi.cal.analyze.cal.result.Node;import com.fr.bi.cal.analyze.cal.sssecret.NoneDimensionGroup;import com.fr.bi.stable.report.result.TargetCalculator;/** * Created by Hiram on 2015/5/14. */public class SummaryCall implements BISingleThreadCal {    protected Node node;    protected NoneDimensionGroup noneDimensionGroup;    protected TargetCalculator calculator;    public SummaryCall(Node node, NoneDimensionGroup noneDimensionGroup, TargetCalculator calculator) {        this.node = node;        this.noneDimensionGroup = noneDimensionGroup;        this.calculator = calculator;    }    @Override    public void cal() {        if (calculator != null) {            Number v = noneDimensionGroup.getSummaryValue(calculator);            if (v != null) {                node.setSummaryValue(calculator.createTargetGettingKey(), v);            }        }    }}
>>>>>>> 67b55d486e769f445942f15883303ca839ffd092
